(function(){function d(){if(d.is(arguments[0],s)){for(var b=arguments[0],e=sa[H](d,b.splice(0,3+d.is(b[0],u))),g=e.set(),m=0,v=b[r];m<v;m++){var f=b[m]||{};N[q](f.type)&&g[B](e[f.type]().attr(f))}return g}return sa[H](d,arguments)}function p(){for(var b=[],e=0;e<32;e++)b[e]=(~~(w.random()*16))[C](16);b[12]=4;b[16]=(b[16]&3|8)[C](16);return"r-"+b[x]("")}function l(b,e,g){function m(){var v=Array[y].slice.call(arguments,0),f=v[x]("\u25ba"),a=m.cache=m.cache||{},c=m.count=m.count||[];if(a[q](f))return g?
g(a[f]):a[f];c[r]>=1E3&&delete a[c.shift()];c[B](f);a[f]=b[H](e,v);return g?g(a[f]):a[f]}return m}function h(){return this.x+J+this.y}function D(b){return function(e,g,m,v){var f={back:b};d.is(m,"function")?v=m:f.rot=m;e&&e.constructor==P&&(e=e.attrs.path);e&&(f.along=e);return this.animate(f,g,v)}}function E(b,e,g,m,v,f){function a(b,e){var g,f,m,v;m=b;for(f=0;f<8;f++){v=((n*m+d)*m+c)*m-b;if(i(v)<e)return m;g=(3*n*m+2*d)*m+c;if(i(g)<1.0E-6)break;m-=v/g}g=0;f=1;m=b;if(m<g)return g;if(m>f)return f;
for(;g<f;){v=((n*m+d)*m+c)*m;if(i(v-b)<e)break;b>v?g=m:f=m;m=(f-g)/2+g}return m}var c=3*e,d=3*(m-e)-c,n=1-c-d,k=3*g,j=3*(v-g)-k,o=1-k-j;return function(b,e){var g=a(b,e);return((o*g+j)*g+k)*g}(b,1/(200*f))}d.version="1.5.2";var F=/[, ]+/,N={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},Q=/\{(\d+)\}/g,y="prototype",q="hasOwnProperty",t=document,z=window,S={was:Object[y][q].call(z,"Raphael"),is:z.Raphael},R=function(){this.customAttributes={}},G,H="apply",O="createTouch"in t,J=" ",a=String,c="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend".split(J),
j={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},x="join",r="length",K=a[y].toLowerCase,w=Math,M=w.max,T=w.min,i=w.abs,k=w.pow,o=w.PI,u="number",s="array",C="toString",ab=Object[y][C],B="push",Ea=/^url\(['"]?([^\)]+?)['"]?\)$/i,bb=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
cb={NaN:1,Infinity:1,"-Infinity":1},db=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,U=w.round,I=parseFloat,aa=parseInt,ia=a[y].toUpperCase,ja={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt",
"stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},ta={along:"along",blur:u,"clip-rect":"csv",cx:u,cy:u,fill:"colour","fill-opacity":u,"font-size":u,height:u,opacity:u,path:"path",r:u,rotation:"csv",rx:u,ry:u,scale:"csv",stroke:"colour","stroke-opacity":u,"stroke-width":u,translation:"csv",width:u,x:u,y:u},eb=/^(from|to|\d+%?)$/,ua=/\s*,\s*/,fb={hs:1,rg:1},gb=/,?([achlmqrstvxz]),?/gi,
hb=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,ib=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,Fa=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,jb=function(b,e){return b.key-e.key};d.type=z.SVGAngle||t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(d.type=="VML"){var X=t.createElement("div");X.innerHTML='<v:shape adj="1"/>';X=X.firstChild;X.style.behavior="url(#default#VML)";if(!(X&&typeof X.adj=="object"))return d.type=null;X=null}d.svg=
!(d.vml=d.type=="VML");R[y]=d[y];G=R[y];d._id=0;d._oid=0;d.fn={};d.is=function(b,e){e=K.call(e);if(e=="finite")return!cb[q](+b);return e=="null"&&b===null||e==typeof b||e=="object"&&b===Object(b)||e=="array"&&Array.isArray&&Array.isArray(b)||ab.call(b).slice(8,-1).toLowerCase()==e};d.angle=function(b,e,g,m,v,f){if(v==null){b-=g;e-=m;if(!b&&!e)return 0;return((b<0)*180+w.atan(-e/-b)*180/o+360)%360}return d.angle(b,e,v,f)-d.angle(g,m,v,f)};d.rad=function(b){return b%360*o/180};d.deg=function(b){return b*
180/o%360};d.snapTo=function(b,e,g){g=d.is(g,"finite")?g:10;if(d.is(b,s))for(var m=b.length;m--;){if(i(b[m]-e)<=g)return b[m]}else{b=+b;m=e%b;if(m<g)return e-m;if(m>b-g)return e-m+b}return e};d.setWindow=function(b){z=b;t=z.document};var ka=function(b){if(d.vml){var e=/^\s+|\s+$/g,g;try{var m=new ActiveXObject("htmlfile");m.write("<body>");m.close();g=m.body}catch(v){g=createPopup().document.body}var f=g.createTextRange();ka=l(function(b){try{g.style.color=a(b).replace(e,"");var m=f.queryCommandValue("ForeColor");
return"#"+("000000"+((m&255)<<16|m&65280|(m&16711680)>>>16)[C](16)).slice(-6)}catch(v){return"none"}})}else{var c=t.createElement("i");c.title="Rapha\u00ebl Colour Picker";c.style.display="none";t.body.appendChild(c);ka=l(function(b){c.style.color=b;return t.defaultView.getComputedStyle(c,"").getPropertyValue("color")})}return ka(b)},Ga=function(){return"hsb("+[this.h,this.s,this.b]+")"},kb=function(){return"hsl("+[this.h,this.s,this.l]+")"},lb=function(){return this.hex};d.hsb2rgb=function(b,e,g,
m){if(d.is(b,"object")&&"h"in b&&"s"in b&&"b"in b)g=b.b,e=b.s,b=b.h,m=b.o;return d.hsl2rgb(b,e,g/2,m)};d.hsl2rgb=function(b,e,g,m){if(d.is(b,"object")&&"h"in b&&"s"in b&&"l"in b)g=b.l,e=b.s,b=b.h;if(b>1||e>1||g>1)b/=360,e/=100,g/=100;var v={},f=["r","g","b"],a;if(e){g<0.5?a=g*(1+e):a=g+e-g*e;for(var e=2*g-a,c=0;c<3;c++)g=b+1/3*-(c-1),g<0&&g++,g>1&&g--,g*6<1?v[f[c]]=e+(a-e)*6*g:g*2<1?v[f[c]]=a:g*3<2?v[f[c]]=e+(a-e)*(2/3-g)*6:v[f[c]]=e}else v={r:g,g:g,b:g};v.r*=255;v.g*=255;v.b*=255;v.hex="#"+(16777216|
v.b|v.g<<8|v.r<<16).toString(16).slice(1);d.is(m,"finite")&&(v.opacity=m);v.toString=lb;return v};d.rgb2hsb=function(b,e,g){if(e==null&&d.is(b,"object")&&"r"in b&&"g"in b&&"b"in b)g=b.b,e=b.g,b=b.r;if(e==null&&d.is(b,"string"))g=d.getRGB(b),b=g.r,e=g.g,g=g.b;if(b>1||e>1||g>1)b/=255,e/=255,g/=255;var m=M(b,e,g),v=T(b,e,g),f;if(v==m)return{h:0,s:0,b:m,toString:Ga};v=m-v;b==m?f=(e-g)/v:e==m?f=2+(g-b)/v:f=4+(b-e)/v;f/=6;f<0&&f++;f>1&&f--;return{h:f,s:v/m,b:m,toString:Ga}};d.rgb2hsl=function(b,e,g){if(e==
null&&d.is(b,"object")&&"r"in b&&"g"in b&&"b"in b)g=b.b,e=b.g,b=b.r;if(e==null&&d.is(b,"string"))g=d.getRGB(b),b=g.r,e=g.g,g=g.b;if(b>1||e>1||g>1)b/=255,e/=255,g/=255;var m=M(b,e,g),v=T(b,e,g),f,a=(m+v)/2;if(v==m)b={h:0,s:0,l:a};else{var c=m-v;b==m?f=(e-g)/c:e==m?f=2+(g-b)/c:f=4+(b-e)/c;f/=6;f<0&&f++;f>1&&f--;b={h:f,s:a<0.5?c/(m+v):c/(2-m-v),l:a}}b.toString=kb;return b};d._path2string=function(){return this.join(",").replace(gb,"$1")};d.getRGB=l(function(b){if(!b||(b=a(b)).indexOf("-")+1)return{r:-1,
g:-1,b:-1,hex:"none",error:1};if(b=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(fb[q](b.toLowerCase().substring(0,2))||b.charAt()=="#")&&(b=ka(b));var e,g,m,v,f;if(b=b.match(bb)){b[2]&&(m=aa(b[2].substring(5),16),g=aa(b[2].substring(3,5),16),e=aa(b[2].substring(1,3),16));b[3]&&(m=aa((f=b[3].charAt(3))+f,16),g=aa((f=b[3].charAt(2))+f,16),e=aa((f=b[3].charAt(1))+f,16));b[4]&&(f=b[4].split(ua),e=I(f[0]),f[0].slice(-1)=="%"&&(e*=2.55),g=I(f[1]),f[1].slice(-1)=="%"&&(g*=2.55),m=I(f[2]),f[2].slice(-1)==
"%"&&(m*=2.55),b[1].toLowerCase().slice(0,4)=="rgba"&&(v=I(f[3])),f[3]&&f[3].slice(-1)=="%"&&(v/=100));if(b[5])return f=b[5].split(ua),e=I(f[0]),f[0].slice(-1)=="%"&&(e*=2.55),g=I(f[1]),f[1].slice(-1)=="%"&&(g*=2.55),m=I(f[2]),f[2].slice(-1)=="%"&&(m*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="\u00b0")&&(e/=360),b[1].toLowerCase().slice(0,4)=="hsba"&&(v=I(f[3])),f[3]&&f[3].slice(-1)=="%"&&(v/=100),d.hsb2rgb(e,g,m,v);if(b[6])return f=b[6].split(ua),e=I(f[0]),f[0].slice(-1)=="%"&&(e*=2.55),g=I(f[1]),
f[1].slice(-1)=="%"&&(g*=2.55),m=I(f[2]),f[2].slice(-1)=="%"&&(m*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="\u00b0")&&(e/=360),b[1].toLowerCase().slice(0,4)=="hsla"&&(v=I(f[3])),f[3]&&f[3].slice(-1)=="%"&&(v/=100),d.hsl2rgb(e,g,m,v);b={r:e,g:g,b:m};b.hex="#"+(16777216|m|g<<8|e<<16).toString(16).slice(1);d.is(v,"finite")&&(b.opacity=v);return b}return{r:-1,g:-1,b:-1,hex:"none",error:1}},d);d.getColor=function(b){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:b||0.75},e=this.hsb2rgb(b.h,
b.s,b.b);b.h+=0.075;if(b.h>1)b.h=0,b.s-=0.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b});return e.hex};d.getColor.reset=function(){delete this.start};d.parsePathString=l(function(b){if(!b)return null;var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},g=[];d.is(b,s)&&d.is(b[0],s)&&(g=la(b));g[r]||a(b).replace(hb,function(b,v,f){var a=[],b=K.call(v);f.replace(ib,function(b,e){e&&a[B](+e)});b=="m"&&a[r]>2&&(g[B]([v].concat(a.splice(0,2))),b="l",v=v=="m"?"l":"L");for(;a[r]>=e[b];)if(g[B]([v].concat(a.splice(0,
e[b]))),!e[b])break});g[C]=d._path2string;return g});d.findDotsAtSegment=function(b,e,g,m,v,f,a,c,i){var d=1-i,j=k(d,3)*b+k(d,2)*3*i*g+d*3*i*i*v+k(i,3)*a,d=k(d,3)*e+k(d,2)*3*i*m+d*3*i*i*f+k(i,3)*c,u=b+2*i*(g-b)+i*i*(v-2*g+b),x=e+2*i*(m-e)+i*i*(f-2*m+e),r=g+2*i*(v-g)+i*i*(a-2*v+g),s=m+2*i*(f-m)+i*i*(c-2*f+m),b=(1-i)*b+i*g,e=(1-i)*e+i*m,v=(1-i)*v+i*a,f=(1-i)*f+i*c,c=90-w.atan((u-r)/(x-s))*180/o;(u>r||x<s)&&(c+=180);return{x:j,y:d,m:{x:u,y:x},n:{x:r,y:s},start:{x:b,y:e},end:{x:v,y:f},alpha:c}};var na=
l(function(b){if(!b)return{x:0,y:0,width:0,height:0};for(var b=ma(b),e=0,g=0,m=[],v=[],f,a=0,c=b[r];a<c;a++)f=b[a],f[0]=="M"?(e=f[1],g=f[2],m[B](e),v[B](g)):(e=mb(e,g,f[1],f[2],f[3],f[4],f[5],f[6]),m=m.concat(e.min.x,e.max.x),v=v.concat(e.min.y,e.max.y),e=f[5],g=f[6]);b=T[H](0,m);f=T[H](0,v);return{x:b,y:f,width:M[H](0,m)-b,height:M[H](0,v)-f}}),la=function(b){var e=[];if(!d.is(b,s)||!d.is(b&&b[0],s))b=d.parsePathString(b);for(var g=0,m=b[r];g<m;g++){e[g]=[];for(var v=0,f=b[g][r];v<f;v++)e[g][v]=
b[g][v]}e[C]=d._path2string;return e},va=l(function(b){if(!d.is(b,s)||!d.is(b&&b[0],s))b=d.parsePathString(b);var e=[],g=0,m=0,v=0,f=0,a=0;b[0][0]=="M"&&(g=b[0][1],m=b[0][2],v=g,f=m,a++,e[B](["M",g,m]));for(var c=b[r];a<c;a++){var i=e[a]=[],n=b[a];if(n[0]!=K.call(n[0]))switch(i[0]=K.call(n[0]),i[0]){case "a":i[1]=n[1];i[2]=n[2];i[3]=n[3];i[4]=n[4];i[5]=n[5];i[6]=+(n[6]-g).toFixed(3);i[7]=+(n[7]-m).toFixed(3);break;case "v":i[1]=+(n[1]-m).toFixed(3);break;case "m":v=n[1],f=n[2];default:for(var k=1,
j=n[r];k<j;k++)i[k]=+(n[k]-(k%2?g:m)).toFixed(3)}else{e[a]=[];n[0]=="m"&&(v=n[1]+g,f=n[2]+m);i=0;for(k=n[r];i<k;i++)e[a][i]=n[i]}n=e[a][r];switch(e[a][0]){case "z":g=v;m=f;break;case "h":g+=+e[a][n-1];break;case "v":m+=+e[a][n-1];break;default:g+=+e[a][n-2],m+=+e[a][n-1]}}e[C]=d._path2string;return e},0,la),ea=l(function(b){if(!d.is(b,s)||!d.is(b&&b[0],s))b=d.parsePathString(b);var e=[],g=0,m=0,v=0,f=0,a=0;b[0][0]=="M"&&(g=+b[0][1],m=+b[0][2],v=g,f=m,a++,e[0]=["M",g,m]);for(var c=b[r];a<c;a++){var i=
e[a]=[],n=b[a];if(n[0]!=ia.call(n[0]))switch(i[0]=ia.call(n[0]),i[0]){case "A":i[1]=n[1];i[2]=n[2];i[3]=n[3];i[4]=n[4];i[5]=n[5];i[6]=+(n[6]+g);i[7]=+(n[7]+m);break;case "V":i[1]=+n[1]+m;break;case "H":i[1]=+n[1]+g;break;case "M":v=+n[1]+g,f=+n[2]+m;default:for(var k=1,j=n[r];k<j;k++)i[k]=+n[k]+(k%2?g:m)}else{k=0;for(j=n[r];k<j;k++)e[a][k]=n[k]}switch(i[0]){case "Z":g=v;m=f;break;case "H":g=i[1];break;case "V":m=i[1];break;case "M":v=e[a][e[a][r]-2],f=e[a][e[a][r]-1];default:g=e[a][e[a][r]-2],m=e[a][e[a][r]-
1]}}e[C]=d._path2string;return e},null,la),Ha=function(b,e,g,m,a,f){var i=1/3,c=2/3;return[i*b+c*g,i*e+c*m,i*a+c*g,i*f+c*m,a,f]},Ia=function(b,e,g,m,a,f,c,d,k,n){var j=o*120/180,u=o/180*(+a||0),s=[],h,p=l(function(b,e,g){var f=b*w.cos(g)-e*w.sin(g),b=b*w.sin(g)+e*w.cos(g);return{x:f,y:b}});if(n)q=n[0],h=n[1],f=n[2],C=n[3];else{h=p(b,e,-u);b=h.x;e=h.y;h=p(d,k,-u);d=h.x;k=h.y;w.cos(o/180*a);w.sin(o/180*a);h=(b-d)/2;q=(e-k)/2;C=h*h/(g*g)+q*q/(m*m);C>1&&(C=w.sqrt(C),g*=C,m*=C);var C=g*g,da=m*m,C=(f==
c?-1:1)*w.sqrt(i((C*da-C*q*q-da*h*h)/(C*q*q+da*h*h))),f=C*g*q/m+(b+d)/2,C=C*-m*h/g+(e+k)/2,q=w.asin(((e-C)/m).toFixed(9));h=w.asin(((k-C)/m).toFixed(9));q=b<f?o-q:q;h=d<f?o-h:h;q<0&&(q=o*2+q);h<0&&(h=o*2+h);c&&q>h&&(q-=o*2);!c&&h>q&&(h-=o*2)}if(i(h-q)>j){var s=h,da=d,t=k;h=q+j*(c&&h>q?1:-1);d=f+g*w.cos(h);k=C+m*w.sin(h);s=Ia(d,k,g,m,a,0,c,da,t,[h,s,f,C])}f=h-q;a=w.cos(q);j=w.sin(q);c=w.cos(h);h=w.sin(h);f=w.tan(f/4);g=4/3*g*f;f*=4/3*m;m=[b,e];b=[b+g*j,e-f*a];e=[d+g*h,k-f*c];d=[d,k];b[0]=2*m[0]-b[0];
b[1]=2*m[1]-b[1];if(n)return[b,e,d].concat(s);s=[b,e,d].concat(s)[x]().split(",");n=[];d=0;for(k=s[r];d<k;d++)n[d]=d%2?p(s[d-1],s[d],u).y:p(s[d],s[d+1],u).x;return n},oa=function(b,e,g,m,a,f,c,i,d){var n=1-d;return{x:k(n,3)*b+k(n,2)*3*d*g+n*3*d*d*a+k(d,3)*c,y:k(n,3)*e+k(n,2)*3*d*m+n*3*d*d*f+k(d,3)*i}},mb=l(function(b,e,g,m,a,f,c,d){var k=a-2*g+b-(c-2*a+g),n=2*(g-b)-2*(a-g),j=b-g,o=(-n+w.sqrt(n*n-4*k*j))/2/k,k=(-n-w.sqrt(n*n-4*k*j))/2/k,u=[e,d],h=[b,c];i(o)>"1e12"&&(o=0.5);i(k)>"1e12"&&(k=0.5);o>0&&
o<1&&(o=oa(b,e,g,m,a,f,c,d,o),h[B](o.x),u[B](o.y));k>0&&k<1&&(o=oa(b,e,g,m,a,f,c,d,k),h[B](o.x),u[B](o.y));k=f-2*m+e-(d-2*f+m);n=2*(m-e)-2*(f-m);j=e-m;o=(-n+w.sqrt(n*n-4*k*j))/2/k;k=(-n-w.sqrt(n*n-4*k*j))/2/k;i(o)>"1e12"&&(o=0.5);i(k)>"1e12"&&(k=0.5);o>0&&o<1&&(o=oa(b,e,g,m,a,f,c,d,o),h[B](o.x),u[B](o.y));k>0&&k<1&&(o=oa(b,e,g,m,a,f,c,d,k),h[B](o.x),u[B](o.y));return{min:{x:T[H](0,h),y:T[H](0,u)},max:{x:M[H](0,h),y:M[H](0,u)}}}),ma=l(function(b,e){var g=ea(b),m=e&&ea(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,
qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=function(b,e){var g,f;if(!b)return["C",e.x,e.y,e.x,e.y,e.x,e.y];!(b[0]in{T:1,Q:1})&&(e.qx=e.qy=null);switch(b[0]){case "M":e.X=b[1];e.Y=b[2];break;case "A":b=["C"].concat(Ia[H](0,[e.x,e.y].concat(b.slice(1))));break;case "S":g=e.x+(e.x-(e.bx||e.x));f=e.y+(e.y-(e.by||e.y));b=["C",g,f].concat(b.slice(1));break;case "T":e.qx=e.x+(e.x-(e.qx||e.x));e.qy=e.y+(e.y-(e.qy||e.y));b=["C"].concat(Ha(e.x,e.y,e.qx,e.qy,b[1],b[2]));break;case "Q":e.qx=
b[1];e.qy=b[2];b=["C"].concat(Ha(e.x,e.y,b[1],b[2],b[3],b[4]));break;case "L":b=["C"].concat([e.x,e.y,b[1],b[2],b[1],b[2]]);break;case "H":b=["C"].concat([e.x,e.y,b[1],e.y,b[1],e.y]);break;case "V":b=["C"].concat([e.x,e.y,e.x,b[1],e.x,b[1]]);break;case "Z":b=["C"].concat([e.x,e.y,e.X,e.Y,e.X,e.Y])}return b},i=function(b,e){if(b[e][r]>7){b[e].shift();for(var f=b[e];f[r];)b.splice(e++,0,["C"].concat(f.splice(0,6)));b.splice(e,1);j=M(g[r],m&&m[r]||0)}},d=function(b,e,f,a,c){if(b&&e&&b[c][0]=="M"&&e[c][0]!=
"M")e.splice(c,0,["M",a.x,a.y]),f.bx=0,f.by=0,f.x=b[c][1],f.y=b[c][2],j=M(g[r],m&&m[r]||0)},k=0,j=M(g[r],m&&m[r]||0);for(;k<j;k++){g[k]=c(g[k],a);i(g,k);m&&(m[k]=c(m[k],f));m&&i(m,k);d(g,m,a,f,k);d(m,g,f,a,k);var o=g[k],u=m&&m[k],h=o[r],x=m&&u[r];a.x=o[h-2];a.y=o[h-1];a.bx=I(o[h-4])||a.x;a.by=I(o[h-3])||a.y;f.bx=m&&(I(u[x-4])||f.x);f.by=m&&(I(u[x-3])||f.y);f.x=m&&u[x-2];f.y=m&&u[x-1]}return m?[g,m]:g},null,la),Ja=l(function(b){for(var e=[],g=0,m=b[r];g<m;g++){var a={},f=b[g].match(/^([^:]*):?([\d\.]*)/);
a.color=d.getRGB(f[1]);if(a.color.error)return null;a.color=a.color.hex;f[2]&&(a.offset=f[2]+"%");e[B](a)}g=1;for(m=e[r]-1;g<m;g++)if(!e[g].offset){b=I(e[g-1].offset||0);f=0;for(a=g+1;a<m;a++)if(e[a].offset){f=e[a].offset;break}f||(f=100,a=m);f=I(f);for(f=(f-b)/(a-g+1);g<a;g++)b+=f,e[g].offset=b+"%"}return e}),Ka=function(b,e,g,m){if(d.is(b,"string")||d.is(b,"object")){if(b=d.is(b,"string")?t.getElementById(b):b,b.tagName)return e==null?{container:b,width:b.style.pixelWidth||b.offsetWidth,height:b.style.pixelHeight||
b.offsetHeight}:{container:b,width:e,height:g}}else return{container:1,x:b,y:e,width:g,height:m}},wa=function(b,e){var g=this,m;for(m in e)if(e[q](m)&&!(m in b))switch(typeof e[m]){case "function":(function(e){b[m]=b===g?e:function(){return e[H](g,arguments)}})(e[m]);break;case "object":b[m]=b[m]||{};wa.call(this,b[m],e[m]);break;default:b[m]=e[m]}},ca=function(b,e){b==e.top&&(e.top=b.prev);b==e.bottom&&(e.bottom=b.next);b.next&&(b.next.prev=b.prev);b.prev&&(b.prev.next=b.next)},La=function(b,e){if(e.top!==
b)ca(b,e),b.next=null,b.prev=e.top,e.top.next=b,e.top=b},Ma=function(b,e){if(e.bottom!==b)ca(b,e),b.next=e.bottom,b.prev=null,e.bottom.prev=b,e.bottom=b},Na=function(b,e,g){ca(b,g);e==g.top&&(g.top=b);e.next&&(e.next.prev=b);b.next=e.next;b.prev=e;e.next=b},Oa=function(b,e,g){ca(b,g);e==g.bottom&&(g.bottom=b);e.prev&&(e.prev.next=b);b.prev=e.prev;e.prev=b;b.next=e},Pa=function(b){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+b+"\u201d of removed object");}};d.pathToRelative=
va;if(d.svg){G.svgns="http://www.w3.org/2000/svg";G.xlink="http://www.w3.org/1999/xlink";var U=function(b){return+b+(~~b===b)*0.5},A=function(b,e){if(e)for(var g in e)e[q](g)&&b.setAttribute(g,a(e[g]));else return b=t.createElementNS(G.svgns,b),b.style.webkitTapHighlightColor="rgba(0,0,0,0)",b};d[C]=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var Qa=function(b,e){var g=A("path");e.canvas&&e.canvas.appendChild(g);g=new P(g,e);g.type="path";ba(g,{fill:"none",
stroke:"#000",path:b});return g},fa=function(b,e,g){var m="linear",c=0.5,f=0.5,d=b.style,e=a(e).replace(Fa,function(b,e,g){m="radial";e&&g&&(c=I(e),f=I(g),b=(f>0.5)*2-1,k(c-0.5,2)+k(f-0.5,2)>0.25&&(f=w.sqrt(0.25-k(c-0.5,2))*b+0.5)&&f!=0.5&&(f=f.toFixed(5)-1.0E-5*b));return""}),e=e.split(/\s*\-\s*/);if(m=="linear"){var j=e.shift(),j=-I(j);if(isNaN(j))return null;var j=[0,0,w.cos(j*o/180),w.sin(j*o/180)],u=1/(M(i(j[2]),i(j[3]))||1);j[2]*=u;j[3]*=u;j[2]<0&&(j[0]=-j[2],j[2]=0);j[3]<0&&(j[1]=-j[3],j[3]=
0)}e=Ja(e);if(!e)return null;u=b.getAttribute("fill");(u=u.match(/^url\(#(.*)\)$/))&&g.defs.removeChild(t.getElementById(u[1]));u=A(m+"Gradient");u.id=p();A(u,m=="radial"?{fx:c,fy:f}:{x1:j[0],y1:j[1],x2:j[2],y2:j[3]});g.defs.appendChild(u);g=0;for(j=e[r];g<j;g++){var n=A("stop");A(n,{offset:e[g].offset?e[g].offset:g?"100%":"0%","stop-color":e[g].color||"#fff"});u.appendChild(n)}A(b,{fill:"url(#"+u.id+")",opacity:1,"fill-opacity":1});d.fill="";d.opacity=1;return d.fillOpacity=1},xa=function(b){var e=
b.getBBox();A(b.pattern,{patternTransform:d.format("translate({0},{1})",e.x,e.y)})},ba=function(b,e){var g={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},m=b.node,c=b.attrs,f=b.rotate(),i=function(b,f){if(f=g[K.call(f)]){for(var a=b.attrs["stroke-width"]||"1",c={round:a,square:a,butt:0}[b.attrs["stroke-linecap"]||e["stroke-linecap"]]||0,i=[],d=f[r];d--;)i[d]=f[d]*a+(d%2?1:-1)*c;A(m,{"stroke-dasharray":i[x](",")})}};
e[q]("rotation")&&(f=e.rotation);var k=a(f).split(F);k.length-1?(k[1]=+k[1],k[2]=+k[2]):k=null;I(f)&&b.rotate(0,!0);for(var j in e)if(e[q](j)&&ja[q](j)){var n=e[j];c[j]=n;switch(j){case "blur":b.blur(n);break;case "rotation":b.rotate(n,!0);break;case "href":case "title":case "target":var o=m.parentNode;if(K.call(o.tagName)!="a"){var u=A("a");o.insertBefore(u,m);u.appendChild(m);o=u}j=="target"&&n=="blank"?o.setAttributeNS(b.paper.xlink,"show","new"):o.setAttributeNS(b.paper.xlink,j,n);break;case "cursor":m.style.cursor=
n;break;case "clip-rect":o=a(n).split(F);if(o[r]==4){b.clip&&b.clip.parentNode.parentNode.removeChild(b.clip.parentNode);var h=A("clipPath"),u=A("rect");h.id=p();A(u,{x:o[0],y:o[1],width:o[2],height:o[3]});h.appendChild(u);b.paper.defs.appendChild(h);A(m,{"clip-path":"url(#"+h.id+")"});b.clip=u}n||((n=t.getElementById(m.getAttribute("clip-path").replace(/(^url\(#|\)$)/g,"")))&&n.parentNode.removeChild(n),A(m,{"clip-path":""}),delete b.clip);break;case "path":b.type=="path"&&A(m,{d:n?c.path=ea(n):
"M0,0"});break;case "width":if(m.setAttribute(j,n),c.fx)j="x",n=c.x;else break;case "x":c.fx&&(n=-c.x-(c.width||0));case "rx":if(j=="rx"&&b.type=="rect")break;case "cx":k&&(j=="x"||j=="cx")&&(k[1]+=n-c[j]);m.setAttribute(j,n);b.pattern&&xa(b);break;case "height":if(m.setAttribute(j,n),c.fy)j="y",n=c.y;else break;case "y":c.fy&&(n=-c.y-(c.height||0));case "ry":if(j=="ry"&&b.type=="rect")break;case "cy":k&&(j=="y"||j=="cy")&&(k[2]+=n-c[j]);m.setAttribute(j,n);b.pattern&&xa(b);break;case "r":b.type==
"rect"?A(m,{rx:n,ry:n}):m.setAttribute(j,n);break;case "src":b.type=="image"&&m.setAttributeNS(b.paper.xlink,"href",n);break;case "stroke-width":m.style.strokeWidth=n;m.setAttribute(j,n);c["stroke-dasharray"]&&i(b,c["stroke-dasharray"]);break;case "stroke-dasharray":i(b,n);break;case "translation":n=a(n).split(F);n[0]=+n[0]||0;n[1]=+n[1]||0;k&&(k[1]+=n[0],k[2]+=n[1]);pa.call(b,n[0],n[1]);break;case "scale":n=a(n).split(F);b.scale(+n[0]||1,+n[1]||+n[0]||1,isNaN(I(n[2]))?null:+n[2],isNaN(I(n[3]))?null:
+n[3]);break;case "fill":if(o=a(n).match(Ea)){var h=A("pattern"),s=A("image");h.id=p();A(h,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});A(s,{x:0,y:0});s.setAttributeNS(b.paper.xlink,"href",o[1]);h.appendChild(s);n=t.createElement("img");n.style.cssText="position:absolute;left:-9999em;top-9999em";n.onload=function(){A(h,{width:this.offsetWidth,height:this.offsetHeight});A(s,{width:this.offsetWidth,height:this.offsetHeight});t.body.removeChild(this);b.paper.safari()};t.body.appendChild(n);
n.src=o[1];b.paper.defs.appendChild(h);m.style.fill="url(#"+h.id+")";A(m,{fill:"url(#"+h.id+")"});b.pattern=h;b.pattern&&xa(b);break}o=d.getRGB(n);if(o.error)if(({circle:1,ellipse:1}[q](b.type)||a(n).charAt()!="r")&&fa(m,n,b.paper)){c.gradient=n;c.fill="none";break}else delete e.gradient,delete c.gradient,!d.is(c.opacity,"undefined")&&d.is(e.opacity,"undefined")&&A(m,{opacity:c.opacity}),!d.is(c["fill-opacity"],"undefined")&&d.is(e["fill-opacity"],"undefined")&&A(m,{"fill-opacity":c["fill-opacity"]});
o[q]("opacity")&&A(m,{"fill-opacity":o.opacity>1?o.opacity/100:o.opacity});case "stroke":o=d.getRGB(n);m.setAttribute(j,o.hex);j=="stroke"&&o[q]("opacity")&&A(m,{"stroke-opacity":o.opacity>1?o.opacity/100:o.opacity});break;case "gradient":(({circle:1,ellipse:1})[q](b.type)||a(n).charAt()!="r")&&fa(m,n,b.paper);break;case "opacity":c.gradient&&!c[q]("stroke-opacity")&&A(m,{"stroke-opacity":n>1?n/100:n});case "fill-opacity":if(c.gradient){if(o=t.getElementById(m.getAttribute("fill").replace(/^url\(#|\)$/g,
"")))o=o.getElementsByTagName("stop"),o[o[r]-1].setAttribute("stop-opacity",n);break}default:j=="font-size"&&(n=aa(n,10)+"px"),o=j.replace(/(\-.)/g,function(b){return ia.call(b.substring(1))}),m.style[o]=n,m.setAttribute(j,n)}}nb(b,e);k?b.rotate(k.join(J)):I(f)&&b.rotate(f,!0)},nb=function(b,e){if(!(b.type!="text"||!e[q]("text")&&!e[q]("font")&&!e[q]("font-size")&&!e[q]("x")&&!e[q]("y"))){var g=b.attrs,m=b.node,c=m.firstChild?aa(t.defaultView.getComputedStyle(m.firstChild,"").getPropertyValue("font-size"),
10):10;if(e[q]("text")){for(g.text=e.text;m.firstChild;)m.removeChild(m.firstChild);for(var f=a(e.text).split("\n"),i=0,k=f[r];i<k;i++)if(f[i]){var j=A("tspan");i&&A(j,{dy:c*1.2,x:g.x});j.appendChild(t.createTextNode(f[i]));m.appendChild(j)}}else{f=m.getElementsByTagName("tspan");i=0;for(k=f[r];i<k;i++)i&&A(f[i],{dy:c*1.2,x:g.x})}A(m,{y:g.y});c=b.getBBox();(c=g.y-(c.y+c.height/2))&&d.is(c,"finite")&&A(m,{y:g.y+c})}},P=function(b,e){this[0]=b;this.id=d._oid++;this.node=b;b.raphael=this;this.paper=
e;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!e.bottom&&(e.bottom=this);(this.prev=e.top)&&(e.top.next=this);e.top=this;this.next=null},L=P[y];P[y].rotate=function(b,e,g){if(this.removed)return this;if(b==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][x](J);return this._.rt.deg}var m=this.getBBox(),b=a(b).split(F);b[r]-1&&(e=I(b[1]),g=I(b[2]));b=I(b[0]);e!=null&&e!==!1?this._.rt.deg=b:this._.rt.deg+=b;g==null&&(e=null);
this._.rt.cx=e;this._.rt.cy=g;e=e==null?m.x+m.width/2:e;g=g==null?m.y+m.height/2:g;this._.rt.deg?(this.transformations[0]=d.format("rotate({0} {1} {2})",this._.rt.deg,e,g),this.clip&&A(this.clip,{transform:d.format("rotate({0} {1} {2})",-this._.rt.deg,e,g)})):(this.transformations[0]="",this.clip&&A(this.clip,{transform:""}));A(this.node,{transform:this.transformations[x](J)});return this};P[y].hide=function(){!this.removed&&(this.node.style.display="none");return this};P[y].show=function(){!this.removed&&
(this.node.style.display="");return this};P[y].remove=function(){if(!this.removed){ca(this,this.paper);this.node.parentNode.removeChild(this.node);for(var b in this)delete this[b];this.removed=!0}};P[y].getBBox=function(){if(this.removed)return this;if(this.type=="path")return na(this.attrs.path);if(this.node.style.display=="none"){this.show();var b=!0}var e={};try{e=this.node.getBBox()}catch(g){}finally{e=e||{}}if(this.type=="text")for(var e={x:e.x,y:Infinity,width:0,height:0},m=0,a=this.node.getNumberOfChars();m<
a;m++){var f=this.node.getExtentOfChar(m);f.y<e.y&&(e.y=f.y);f.y+f.height-e.y>e.height&&(e.height=f.y+f.height-e.y);f.x+f.width-e.x>e.width&&(e.width=f.x+f.width-e.x)}b&&this.hide();return e};P[y].attr=function(b,e){if(this.removed)return this;if(b==null){var g={},m;for(m in this.attrs)this.attrs[q](m)&&(g[m]=this.attrs[m]);this._.rt.deg&&(g.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(g.scale=this.scale());g.gradient&&g.fill=="none"&&(g.fill=g.gradient)&&delete g.gradient;return g}if(e==
null&&d.is(b,"string")){if(b=="translation")return pa.call(this);if(b=="rotation")return this.rotate();if(b=="scale")return this.scale();if(b=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[b]}if(e==null&&d.is(b,s)){m={};for(var g=0,a=b.length;g<a;g++)m[b[g]]=this.attr(b[g]);return m}e!=null?(g={},g[b]=e):b!=null&&d.is(b,"object")&&(g=b);for(a in this.paper.customAttributes)if(this.paper.customAttributes[q](a)&&g[q](a)&&d.is(this.paper.customAttributes[a],
"function"))for(var f in m=this.paper.customAttributes[a].apply(this,[].concat(g[a])),this.attrs[a]=g[a],m)m[q](f)&&(g[f]=m[f]);ba(this,g);return this};P[y].toFront=function(){if(this.removed)return this;this.node.parentNode.appendChild(this.node);var b=this.paper;b.top!=this&&La(this,b);return this};P[y].toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Ma(this,this.paper));return this};
P[y].insertAfter=function(b){if(this.removed)return this;var e=b.node||b[b.length-1].node;e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node);Na(this,b,this.paper);return this};P[y].insertBefore=function(b){if(this.removed)return this;var e=b.node||b[0].node;e.parentNode.insertBefore(this.node,e);Oa(this,b,this.paper);return this};P[y].blur=function(b){if(+b!==0){var e=A("filter"),g=A("feGaussianBlur");this.attrs.blur=b;e.id=p();A(g,{stdDeviation:+b||
1.5});e.appendChild(g);this.paper.defs.appendChild(e);this._blur=e;A(this.node,{filter:"url(#"+e.id+")"})}else this._blur&&(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};var Ra=function(b,e,g,m){var a=A("circle");b.canvas&&b.canvas.appendChild(a);b=new P(a,b);b.attrs={cx:e,cy:g,r:m,fill:"none",stroke:"#000"};b.type="circle";A(a,b.attrs);return b},Sa=function(b,e,g,m,a,f){var c=A("rect");b.canvas&&b.canvas.appendChild(c);
b=new P(c,b);b.attrs={x:e,y:g,width:m,height:a,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"};b.type="rect";A(c,b.attrs);return b},Ta=function(b,e,g,m,a){var f=A("ellipse");b.canvas&&b.canvas.appendChild(f);b=new P(f,b);b.attrs={cx:e,cy:g,rx:m,ry:a,fill:"none",stroke:"#000"};b.type="ellipse";A(f,b.attrs);return b},Ua=function(b,e,g,m,a,f){var c=A("image");A(c,{x:g,y:m,width:a,height:f,preserveAspectRatio:"none"});c.setAttributeNS(b.xlink,"href",e);b.canvas&&b.canvas.appendChild(c);b=new P(c,b);
b.attrs={x:g,y:m,width:a,height:f,src:e};b.type="image";return b},Va=function(b,e,g,a){var c=A("text");A(c,{x:e,y:g,"text-anchor":"middle"});b.canvas&&b.canvas.appendChild(c);b=new P(c,b);b.attrs={x:e,y:g,"text-anchor":"middle",text:a,font:ja.font,stroke:"none",fill:"#000"};b.type="text";ba(b,b.attrs);return b},Wa=function(b,e){this.width=b||this.width;this.height=e||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);return this},sa=function(){var b=
Ka[H](0,arguments),e=b&&b.container,g=b.x,a=b.y,c=b.width,b=b.height;if(!e)throw Error("SVG container not found.");var f=A("svg"),g=g||0,a=a||0,c=c||512,b=b||342;A(f,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:c,height:b});e==1?(f.style.cssText="position:absolute;left:"+g+"px;top:"+a+"px",t.body.appendChild(f)):e.firstChild?e.insertBefore(f,e.firstChild):e.appendChild(f);e=new R;e.width=c;e.height=b;e.canvas=f;wa.call(e,e,d.fn);e.clear();return e};G.clear=function(){for(var b=this.canvas;b.firstChild;)b.removeChild(b.firstChild);
this.bottom=this.top=null;(this.desc=A("desc")).appendChild(t.createTextNode("Created with Rapha\u00ebl"));b.appendChild(this.desc);b.appendChild(this.defs=A("defs"))};G.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=Pa(b)}}if(d.vml){var Xa={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},ob=/([clmz]),?([^clmz]*)/gi,pb=/ progid:\S+Blur\([^\)]+\)/g,qb=/-?[^,\s-]+/g,ga=1E3+J+1E3,ha={path:1,rect:1},rb=function(b){var e=/[ahqstv]/ig,
g=ea;a(b).match(e)&&(g=ma);e=/[clmz]/g;if(g==ea&&!a(b).match(e))return b=a(b).replace(ob,function(b,e,g){var f=[],a=K.call(e)=="m",m=Xa[e];g.replace(qb,function(b){a&&f[r]==2&&(m+=f+Xa[e=="m"?"l":"L"],f=[]);f[B](U(b*10))});return m+f});for(var e=g(b),m,b=[],c=0,f=e[r];c<f;c++){g=e[c];m=K.call(e[c][0]);m=="z"&&(m="x");for(var i=1,d=g[r];i<d;i++)m+=U(g[i]*10)+(i!=d-1?",":"");b[B](m)}return b[x](J)};d[C]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+
this.version};Qa=function(b,e){var g=V("group");g.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";g.coordsize=e.coordsize;g.coordorigin=e.coordorigin;var a=V("shape"),c=a.style;c.width=e.width+"px";c.height=e.height+"px";a.coordsize=ga;a.coordorigin=e.coordorigin;g.appendChild(a);a=new P(a,g,e);c={fill:"none",stroke:"#000"};b&&(c.path=b);a.type="path";a.path=[];a.Path="";ba(a,c);e.canvas.appendChild(g);return a};ba=function(b,e){b.attrs=b.attrs||{};var g=b.node,
c=b.attrs,i=g.style,f;f=(e.x!=c.x||e.y!=c.y||e.width!=c.width||e.height!=c.height||e.r!=c.r)&&b.type=="rect";for(var k in e)e[q](k)&&(c[k]=e[k]);if(f)c.path=Ya(c.x,c.y,c.width,c.height,c.r),b.X=c.x,b.Y=c.y,b.W=c.width,b.H=c.height;e.href&&(g.href=e.href);e.title&&(g.title=e.title);e.target&&(g.target=e.target);e.cursor&&(i.cursor=e.cursor);"blur"in e&&b.blur(e.blur);if(e.path&&b.type=="path"||f)g.path=rb(c.path);e.rotation!=null&&b.rotate(e.rotation,!0);e.translation&&(f=a(e.translation).split(F),
pa.call(b,f[0],f[1]),b._.rt.cx!=null&&(b._.rt.cx+=+f[0],b._.rt.cy+=+f[1],b.setBox(b.attrs,f[0],f[1])));e.scale&&(f=a(e.scale).split(F),b.scale(+f[0]||1,+f[1]||+f[0]||1,+f[2]||null,+f[3]||null));if("clip-rect"in e){f=a(e["clip-rect"]).split(F);if(f[r]==4){f[2]=+f[2]+ +f[0];f[3]=+f[3]+ +f[1];k=g.clipRect||t.createElement("div");var j=k.style,o=g.parentNode;j.clip=d.format("rect({1}px {2}px {3}px {0}px)",f);if(!g.clipRect)j.position="absolute",j.top=0,j.left=0,j.width=b.paper.width+"px",j.height=b.paper.height+
"px",o.parentNode.insertBefore(k,o),k.appendChild(o),g.clipRect=k}e["clip-rect"]||g.clipRect&&(g.clipRect.style.clip="")}b.type=="image"&&e.src&&(g.src=e.src);if(b.type=="image"&&e.opacity)g.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+e.opacity*100+")",i.filter=(g.filterMatrix||"")+(g.filterOpacity||"");e.font&&(i.font=e.font);e["font-family"]&&(i.fontFamily='"'+e["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"');e["font-size"]&&(i.fontSize=e["font-size"]);e["font-weight"]&&
(i.fontWeight=e["font-weight"]);e["font-style"]&&(i.fontStyle=e["font-style"]);if(e.opacity!=null||e["stroke-width"]!=null||e.fill!=null||e.stroke!=null||e["stroke-width"]!=null||e["stroke-opacity"]!=null||e["fill-opacity"]!=null||e["stroke-dasharray"]!=null||e["stroke-miterlimit"]!=null||e["stroke-linejoin"]!=null||e["stroke-linecap"]!=null){g=b.shape||g;f=g.getElementsByTagName("fill")&&g.getElementsByTagName("fill")[0];k=!1;!f&&(k=f=V("fill"));if("fill-opacity"in e||"opacity"in e)i=((+c["fill-opacity"]+
1||2)-1)*((+c.opacity+1||2)-1)*((+d.getRGB(e.fill).o+1||2)-1),i=T(M(i,0),1),f.opacity=i;e.fill&&(f.on=!0);if(f.on==null||e.fill=="none")f.on=!1;if(f.on&&e.fill)if(i=e.fill.match(Ea))f.src=i[1],f.type="tile";else if(f.color=d.getRGB(e.fill).hex,f.src="",f.type="solid",d.getRGB(e.fill).error&&(b.type in{circle:1,ellipse:1}||a(e.fill).charAt()!="r")&&fa(b,e.fill))c.fill="none",c.gradient=e.fill;k&&g.appendChild(f);f=g.getElementsByTagName("stroke")&&g.getElementsByTagName("stroke")[0];k=!1;!f&&(k=f=
V("stroke"));if(e.stroke&&e.stroke!="none"||e["stroke-width"]||e["stroke-opacity"]!=null||e["stroke-dasharray"]||e["stroke-miterlimit"]||e["stroke-linejoin"]||e["stroke-linecap"])f.on=!0;(e.stroke=="none"||f.on==null||e.stroke==0||e["stroke-width"]==0)&&(f.on=!1);i=d.getRGB(e.stroke);f.on&&e.stroke&&(f.color=i.hex);i=((+c["stroke-opacity"]+1||2)-1)*((+c.opacity+1||2)-1)*((+i.o+1||2)-1);j=(I(e["stroke-width"])||1)*0.75;i=T(M(i,0),1);e["stroke-width"]==null&&(j=c["stroke-width"]);e["stroke-width"]&&
(f.weight=j);j&&j<1&&(i*=j)&&(f.weight=1);f.opacity=i;e["stroke-linejoin"]&&(f.joinstyle=e["stroke-linejoin"]||"miter");f.miterlimit=e["stroke-miterlimit"]||8;e["stroke-linecap"]&&(f.endcap=e["stroke-linecap"]=="butt"?"flat":e["stroke-linecap"]=="square"?"square":"round");if(e["stroke-dasharray"])i={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},f.dashstyle=i[q](e["stroke-dasharray"])?
i[e["stroke-dasharray"]]:"";k&&g.appendChild(f)}if(b.type=="text")switch(i=b.paper.span.style,c.font&&(i.font=c.font),c["font-family"]&&(i.fontFamily=c["font-family"]),c["font-size"]&&(i.fontSize=c["font-size"]),c["font-weight"]&&(i.fontWeight=c["font-weight"]),c["font-style"]&&(i.fontStyle=c["font-style"]),b.node.string&&(b.paper.span.innerHTML=a(b.node.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>")),b.W=c.w=b.paper.span.offsetWidth,b.H=c.h=b.paper.span.offsetHeight,b.X=
c.x,b.Y=c.y+U(b.H/2),c["text-anchor"]){case "start":b.node.style["v-text-align"]="left";b.bbx=U(b.W/2);break;case "end":b.node.style["v-text-align"]="right";b.bbx=-U(b.W/2);break;default:b.node.style["v-text-align"]="center"}};fa=function(b,e){b.attrs=b.attrs||{};var g,c="linear",i=".5 .5";b.attrs.gradient=e;e=a(e).replace(Fa,function(b,e,g){c="radial";e&&g&&(e=I(e),g=I(g),k(e-0.5,2)+k(g-0.5,2)>0.25&&(g=w.sqrt(0.25-k(e-0.5,2))*((g>0.5)*2-1)+0.5),i=e+J+g);return""});e=e.split(/\s*\-\s*/);if(c=="linear"){var f=
e.shift(),f=-I(f);if(isNaN(f))return null}var d=Ja(e);if(!d)return null;b=b.shape||b.node;g=b.getElementsByTagName("fill")[0]||V("fill");!g.parentNode&&b.appendChild(g);if(d[r]){g.on=!0;g.method="none";g.color=d[0].color;g.color2=d[d[r]-1].color;for(var j=[],o=0,n=d[r];o<n;o++)d[o].offset&&j[B](d[o].offset+J+d[o].color);g.colors&&(g.colors.value=j[r]?j[x]():"0% "+g.color);c=="radial"?(g.type="gradientradial",g.focus="100%",g.focussize=i,g.focusposition=i):(g.type="gradient",g.angle=(270-f)%360)}return 1};
P=function(b,e,g){this[0]=b;this.id=d._oid++;this.node=b;b.raphael=this;this.Y=this.X=0;this.attrs={};this.Group=e;this.paper=g;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!g.bottom&&(g.bottom=this);(this.prev=g.top)&&(g.top.next=this);g.top=this;this.next=null};L=P[y];L.rotate=function(b,e,g){if(this.removed)return this;if(b==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][x](J);return this._.rt.deg}b=a(b).split(F);b[r]-1&&(e=I(b[1]),g=I(b[2]));b=I(b[0]);e!=null?this._.rt.deg=b:
this._.rt.deg+=b;g==null&&(e=null);this._.rt.cx=e;this._.rt.cy=g;this.setBox(this.attrs,e,g);this.Group.style.rotation=this._.rt.deg;return this};L.setBox=function(b,e,g){if(this.removed)return this;var c=this.Group.style,a=this.shape&&this.shape.style||this.node.style,b=b||{},f;for(f in b)b[q](f)&&(this.attrs[f]=b[f]);var e=e||this._.rt.cx,g=g||this._.rt.cy,i=this.attrs,d;switch(this.type){case "circle":b=i.cx-i.r;f=i.cy-i.r;d=i=i.r*2;break;case "ellipse":b=i.cx-i.rx;f=i.cy-i.ry;d=i.rx*2;i=i.ry*
2;break;case "image":b=+i.x;f=+i.y;d=i.width||0;i=i.height||0;break;case "text":this.textpath.v=["m",U(i.x),", ",U(i.y-2),"l",U(i.x)+1,", ",U(i.y-2)][x]("");b=i.x-U(this.W/2);f=i.y-this.H/2;d=this.W;i=this.H;break;case "rect":case "path":this.attrs.path?(i=na(this.attrs.path),b=i.x,f=i.y,d=i.width,i=i.height):(f=b=0,d=this.paper.width,i=this.paper.height);break;default:f=b=0,d=this.paper.width,i=this.paper.height}var e=(e==null?b+d/2:e)-this.paper.width/2,g=(g==null?f+i/2:g)-this.paper.height/2,k;
c.left!=(k=e+"px")&&(c.left=k);c.top!=(k=g+"px")&&(c.top=k);this.X=ha[q](this.type)?-e:b;this.Y=ha[q](this.type)?-g:f;this.W=d;this.H=i;ha[q](this.type)?(a.left!=(k=-e*10+"px")&&(a.left=k),a.top!=(k=-g*10+"px")&&(a.top=k)):this.type=="text"?(a.left!=(k=-e+"px")&&(a.left=k),a.top!=(k=-g+"px")&&(a.top=k)):(c.width!=(k=this.paper.width+"px")&&(c.width=k),c.height!=(k=this.paper.height+"px")&&(c.height=k),a.left!=(k=b-e+"px")&&(a.left=k),a.top!=(k=f-g+"px")&&(a.top=k),a.width!=(k=d+"px")&&(a.width=k),
a.height!=(k=i+"px")&&(a.height=k))};L.hide=function(){!this.removed&&(this.Group.style.display="none");return this};L.show=function(){!this.removed&&(this.Group.style.display="block");return this};L.getBBox=function(){if(this.removed)return this;if(ha[q](this.type))return na(this.attrs.path);return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};L.remove=function(){if(!this.removed){ca(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);
this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)delete this[b];this.removed=!0}};L.attr=function(b,e){if(this.removed)return this;if(b==null){var g={},c;for(c in this.attrs)this.attrs[q](c)&&(g[c]=this.attrs[c]);this._.rt.deg&&(g.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(g.scale=this.scale());g.gradient&&g.fill=="none"&&(g.fill=g.gradient)&&delete g.gradient;return g}if(e==null&&d.is(b,"string")){if(b=="translation")return pa.call(this);if(b=="rotation")return this.rotate();
if(b=="scale")return this.scale();if(b=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[b]}if(this.attrs&&e==null&&d.is(b,s)){var i={};c=0;for(g=b[r];c<g;c++)i[b[c]]=this.attr(b[c]);return i}e!=null&&(g={},g[b]=e);e==null&&d.is(b,"object")&&(g=b);if(g){for(i in this.paper.customAttributes)if(this.paper.customAttributes[q](i)&&g[q](i)&&d.is(this.paper.customAttributes[i],"function"))for(var f in c=this.paper.customAttributes[i].apply(this,[].concat(g[i])),
this.attrs[i]=g[i],c)c[q](f)&&(g[f]=c[f]);g.text&&this.type=="text"&&(this.node.string=g.text);ba(this,g);g.gradient&&({circle:1,ellipse:1}[q](this.type)||a(g.gradient).charAt()!="r")&&fa(this,g.gradient);(!ha[q](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};L.toFront=function(){!this.removed&&this.Group.parentNode.appendChild(this.Group);this.paper.top!=this&&La(this,this.paper);return this};L.toBack=function(){if(this.removed)return this;this.Group.parentNode.firstChild!=this.Group&&
(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Ma(this,this.paper));return this};L.insertAfter=function(b){if(this.removed)return this;b.constructor==W&&(b=b[b.length-1]);b.Group.nextSibling?b.Group.parentNode.insertBefore(this.Group,b.Group.nextSibling):b.Group.parentNode.appendChild(this.Group);Na(this,b,this.paper);return this};L.insertBefore=function(b){if(this.removed)return this;b.constructor==W&&(b=b[0]);b.Group.parentNode.insertBefore(this.Group,b.Group);
Oa(this,b,this.paper);return this};L.blur=function(b){var e=this.node.runtimeStyle,g=e.filter,g=g.replace(pb,"");+b!==0?(this.attrs.blur=b,e.filter=g+J+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+b||1.5)+")",e.margin=d.format("-{0}px 0 0 -{0}px",U(+b||1.5))):(e.filter=g,e.margin=0,delete this.attrs.blur)};var Ra=function(b,e,g,c){var a=V("group"),f=V("oval");a.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";a.coordsize=ga;a.coordorigin=b.coordorigin;
a.appendChild(f);f=new P(f,a,b);f.type="circle";ba(f,{stroke:"#000",fill:"none"});f.attrs.cx=e;f.attrs.cy=g;f.attrs.r=c;f.setBox({x:e-c,y:g-c,width:c*2,height:c*2});b.canvas.appendChild(a);return f},Ya=function(b,e,g,c,a){return a?d.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",b+a,e,g-a*2,a,-a,c-a*2,a*2-g,a*2-c):d.format("M{0},{1}l{2},0,0,{3},{4},0z",b,e,g,c,-g)},Sa=function(b,e,g,c,a,f){var i=Ya(e,g,c,a,f),b=b.path(i),
d=b.attrs;b.X=d.x=e;b.Y=d.y=g;b.W=d.width=c;b.H=d.height=a;d.r=f;d.path=i;b.type="rect";return b},Ta=function(b,e,g,c,a){var f=V("group"),i=V("oval");f.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";f.coordsize=ga;f.coordorigin=b.coordorigin;f.appendChild(i);i=new P(i,f,b);i.type="ellipse";ba(i,{stroke:"#000"});i.attrs.cx=e;i.attrs.cy=g;i.attrs.rx=c;i.attrs.ry=a;i.setBox({x:e-c,y:g-a,width:c*2,height:a*2});b.canvas.appendChild(f);return i},Ua=function(b,e,
g,c,a,f){var i=V("group"),d=V("image");i.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";i.coordsize=ga;i.coordorigin=b.coordorigin;d.src=e;i.appendChild(d);d=new P(d,i,b);d.type="image";d.attrs.src=e;d.attrs.x=g;d.attrs.y=c;d.attrs.w=a;d.attrs.h=f;d.setBox({x:g,y:c,width:a,height:f});b.canvas.appendChild(i);return d},Va=function(b,e,g,c){var i=V("group"),f=V("shape"),k=f.style,j=V("path"),o=V("textpath");i.style.cssText="position:absolute;left:0;top:0;width:"+
b.width+"px;height:"+b.height+"px";i.coordsize=ga;i.coordorigin=b.coordorigin;j.v=d.format("m{0},{1}l{2},{1}",U(e*10),U(g*10),U(e*10)+1);j.textpathok=!0;k.width=b.width;k.height=b.height;o.string=a(c);o.on=!0;f.appendChild(o);f.appendChild(j);i.appendChild(f);k=new P(o,i,b);k.shape=f;k.textpath=j;k.type="text";k.attrs.text=c;k.attrs.x=e;k.attrs.y=g;k.attrs.w=1;k.attrs.h=1;ba(k,{font:ja.font,stroke:"none",fill:"#000"});k.setBox();b.canvas.appendChild(i);return k},Wa=function(b,e){var g=this.canvas.style;
b==+b&&(b+="px");e==+e&&(e+="px");g.width=b;g.height=e;g.clip="rect(0 "+b+" "+e+" 0)";return this},V;t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),V=function(b){return t.createElement("<rvml:"+b+' class="rvml">')}}catch(yb){V=function(b){return t.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}sa=function(){var b=Ka[H](0,arguments),e=b.container,g=b.height,c=b.width,a=
b.x,b=b.y;if(!e)throw Error("VML container not found.");var f=new R,i=f.canvas=t.createElement("div"),k=i.style,a=a||0,b=b||0,c=c||512,g=g||342;c==+c&&(c+="px");g==+g&&(g+="px");f.width=1E3;f.height=1E3;f.coordsize=1E4+J+1E4;f.coordorigin="0 0";f.span=t.createElement("span");f.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";i.appendChild(f.span);k.cssText=d.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
c,g);e==1?(t.body.appendChild(i),k.left=a+"px",k.top=b+"px",k.position="absolute"):e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i);wa.call(f,f,d.fn);return f};G.clear=function(){this.canvas.innerHTML="";this.span=t.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};G.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=
Pa(b);return!0}}X=navigator.userAgent.match(/Version\\x2f(.*?)\s/);navigator.vendor=="Apple Computer, Inc."&&(X&&X[1]<4||navigator.platform.slice(0,2)=="iP")?G.safari=function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});z.setTimeout(function(){b.remove()})}:G.safari=function(){};for(var sb=function(){this.returnValue=!1},tb=function(){return this.originalEvent.preventDefault()},ub=function(){this.cancelBubble=!0},vb=function(){return this.originalEvent.stopPropagation()},
wb=function(){if(t.addEventListener)return function(b,e,g,c){var a=O&&j[e]?j[e]:e,f=function(a){if(O&&j[q](e))for(var f=0,i=a.targetTouches&&a.targetTouches.length;f<i;f++)if(a.targetTouches[f].target==b){i=a;a=a.targetTouches[f];a.originalEvent=i;a.preventDefault=tb;a.stopPropagation=vb;break}return g.call(c,a)};b.addEventListener(a,f,!1);return function(){b.removeEventListener(a,f,!1);return!0}};if(t.attachEvent)return function(b,e,g,c){var a=function(b){b=b||z.event;b.preventDefault=b.preventDefault||
sb;b.stopPropagation=b.stopPropagation||ub;return g.call(c,b)};b.attachEvent("on"+e,a);return function(){b.detachEvent("on"+e,a);return!0}}}(),Y=[],ya=function(b){for(var e=b.clientX,g=b.clientY,c=t.documentElement.scrollTop||t.body.scrollTop,a=t.documentElement.scrollLeft||t.body.scrollLeft,f,i=Y.length;i--;){f=Y[i];if(O)for(var d=b.touches.length,k;d--;){if(k=b.touches[d],k.identifier==f.el._drag.id){e=k.clientX;g=k.clientY;(b.originalEvent?b.originalEvent:b).preventDefault();break}}else b.preventDefault();
e+=a;g+=c;f.move&&f.move.call(f.move_scope||f.el,e-f.el._drag.x,g-f.el._drag.y,e,g,b)}},za=function(b){d.unmousemove(ya).unmouseup(za);for(var e=Y.length,g;e--;)g=Y[e],g.el._drag={},g.end&&g.end.call(g.end_scope||g.start_scope||g.move_scope||g.el,b);Y=[]},X=c[r];X--;)(function(b){d[b]=P[y][b]=function(e,g){if(d.is(e,"function"))this.events=this.events||[],this.events.push({name:b,f:e,unbind:wb(this.shape||this.node||t,b,e,g||this)});return this};d["un"+b]=P[y]["un"+b]=function(e){for(var g=this.events,
c=g[r];c--;)if(g[c].name==b&&g[c].f==e){g[c].unbind();g.splice(c,1);!g.length&&delete this.events;break}return this}})(c[X]);L.hover=function(b,e,g,c){return this.mouseover(b,g).mouseout(e,c||g)};L.unhover=function(b,e){return this.unmouseover(b).unmouseout(e)};L.drag=function(b,e,g,c,a,f){this._drag={};this.mousedown(function(i){(i.originalEvent||i).preventDefault();var k=t.documentElement.scrollTop||t.body.scrollTop,j=t.documentElement.scrollLeft||t.body.scrollLeft;this._drag.x=i.clientX+j;this._drag.y=
i.clientY+k;this._drag.id=i.identifier;e&&e.call(a||c||this,i.clientX+j,i.clientY+k,i);!Y.length&&d.mousemove(ya).mouseup(za);Y.push({el:this,move:b,end:g,move_scope:c,start_scope:a,end_scope:f})});return this};L.undrag=function(b,e,g){for(e=Y.length;e--;)Y[e].el==this&&Y[e].move==b&&Y[e].end==g&&Y.splice(e++,1);!Y.length&&d.unmousemove(ya).unmouseup(za)};G.circle=function(b,e,g){return Ra(this,b||0,e||0,g||0)};G.rect=function(b,e,g,c,a){return Sa(this,b||0,e||0,g||0,c||0,a||0)};G.ellipse=function(b,
e,g,c){return Ta(this,b||0,e||0,g||0,c||0)};G.path=function(b){b&&!d.is(b,"string")&&!d.is(b[0],s)&&(b+="");return Qa(d.format[H](d,arguments),this)};G.image=function(b,e,g,c,a){return Ua(this,b||"about:blank",e||0,g||0,c||0,a||0)};G.text=function(b,e,g){return Va(this,b||0,e||0,a(g))};G.set=function(b){arguments[r]>1&&(b=Array[y].splice.call(arguments,0,arguments[r]));return new W(b)};G.setSize=Wa;G.top=G.bottom=null;G.raphael=d;L.resetScale=function(){if(this.removed)return this;this._.sx=1;this._.sy=
1;this.attrs.scale="1 1"};L.scale=function(b,e,g,c){if(this.removed)return this;if(b==null&&e==null)return{x:this._.sx,y:this._.sy,toString:h};e=e||b;!+e&&(e=b);var a,f,d=this.attrs;if(b!=0){var k=this.getBBox(),j=k.x+k.width/2,o=k.y+k.height/2;a=i(b/this._.sx);f=i(e/this._.sy);var g=+g||g==0?g:j,c=+c||c==0?c:o,u=this._.sx>0,s=this._.sy>0,k=~~(b/i(b)),l=~~(e/i(e)),C=a*k,p=f*l,q=this.node.style,j=g+i(j-g)*C*(j>g==u?1:-1),o=c+i(o-c)*p*(o>c==s?1:-1),w=b*k>e*l?f:a;switch(this.type){case "rect":case "image":var t=
d.width*a,z=d.height*f;this.attr({height:z,r:d.r*w,width:t,x:j-t/2,y:o-z/2});break;case "circle":case "ellipse":this.attr({rx:d.rx*a,ry:d.ry*f,r:d.r*w,cx:j,cy:o});break;case "text":this.attr({x:j,y:o});break;case "path":for(var w=va(d.path),M=!0,u=u?C:a,s=s?p:f,p=0,C=w[r];p<C;p++){var B=w[p],K=ia.call(B[0]);if(!(K=="M"&&M))if(M=!1,K=="A")B[w[p][r]-2]*=u,B[w[p][r]-1]*=s,B[1]*=a,B[2]*=f,B[5]=+(k+l?!!+B[5]:!+B[5]);else if(K=="H")for(var K=1,G=B[r];K<G;K++)B[K]*=u;else if(K=="V"){K=1;for(G=B[r];K<G;K++)B[K]*=
s}else{K=1;for(G=B[r];K<G;K++)B[K]*=K%2?u:s}}f=na(w);a=j-f.x-f.width/2;f=o-f.y-f.height/2;w[0][1]+=a;w[0][2]+=f;this.attr({path:w})}this.type in{text:1,image:1}&&(k!=1||l!=1)?this.transformations?(this.transformations[2]="scale(".concat(k,",",l,")"),this.node.setAttribute("transform",this.transformations[x](J)),a=k==-1?-d.x-(t||0):d.x,f=l==-1?-d.y-(z||0):d.y,this.attr({x:a,y:f}),d.fx=k-1,d.fy=l-1):(this.node.filterMatrix=" progid:DXImageTransform.Microsoft"+".Matrix(M11=".concat(k,", M12=0, M21=0, M22=",
l,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),q.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||"")):this.transformations?(this.transformations[2]="",this.node.setAttribute("transform",this.transformations[x](J)),d.fx=0,d.fy=0):(this.node.filterMatrix="",q.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||""));d.scale=[b,e,g,c][x](J);this._.sx=b;this._.sy=e}return this};L.clone=function(){if(this.removed)return null;var b=this.attr();delete b.scale;
delete b.translation;return this.paper[this.type]().attr(b)};var Aa={},qa=function(b,e,c,a,i,f,j,o,u){var n=0,h=100,s=[b,e,c,a,i,f,j,o].join(),x=Aa[s],r,l;!x&&(Aa[s]=x={data:[]});x.timer&&clearTimeout(x.timer);x.timer=setTimeout(function(){delete Aa[s]},2E3);u!=null&&(h=~~qa(b,e,c,a,i,f,j,o)*10);for(var C=0;C<h+1;C++){x.data[u]>C?l=x.data[C*h]:(l=d.findDotsAtSegment(b,e,c,a,i,f,j,o,C/h),x.data[C]=l);C&&(n+=k(k(r.x-l.x,2)+k(r.y-l.y,2),0.5));if(u!=null&&n>=u)return l;r=l}if(u==null)return n},c=function(b,
e){return function(c,a,i){for(var c=ma(c),f,k,j,o,u="",h={},s=0,r=0,l=c.length;r<l;r++){j=c[r];if(j[0]=="M")f=+j[1],k=+j[2];else{o=qa(f,k,j[1],j[2],j[3],j[4],j[5],j[6]);if(s+o>a){if(e&&!h.start){f=qa(f,k,j[1],j[2],j[3],j[4],j[5],j[6],a-s);u+=["C",f.start.x,f.start.y,f.m.x,f.m.y,f.x,f.y];if(i)return u;h.start=u;u=["M",f.x,f.y+"C",f.n.x,f.n.y,f.end.x,f.end.y,j[5],j[6]][x]();s+=o;f=+j[5];k=+j[6];continue}if(!b&&!e)return f=qa(f,k,j[1],j[2],j[3],j[4],j[5],j[6],a-s),{x:f.x,y:f.y,alpha:f.alpha}}s+=o;f=
+j[5];k=+j[6]}u+=j}h.end=u;f=b?s:e?h:d.findDotsAtSegment(f,k,j[1],j[2],j[3],j[4],j[5],j[6],1);f.alpha&&(f={x:f.x,y:f.y,alpha:f.alpha});return f}},Za=c(1),ra=c(),Ba=c(0,1);L.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return Za(this.attrs.path)}};L.getPointAtLength=function(b){if(this.type=="path")return ra(this.attrs.path,b)};L.getSubpath=function(b,e){if(this.type=="path"){if(i(this.getTotalLength()-e)<"1e-6")return Ba(this.attrs.path,
b).end;var c=Ba(this.attrs.path,e,1);return b?Ba(c,b).end:c}};d.easing_formulas={linear:function(b){return b},"<":function(b){return k(b,3)},">":function(b){return k(b-1,3)+1},"<>":function(b){b*=2;if(b<1)return k(b,3)/2;b-=2;return(k(b,3)+2)/2},backIn:function(b){return b*b*(2.70158*b-1.70158)},backOut:function(b){b-=1;return b*b*(2.70158*b+1.70158)+1},elastic:function(b){if(b==0||b==1)return b;return k(2,-10*b)*w.sin((b-0.075)*2*o/0.3)+1},bounce:function(b){b<1/2.75?b*=7.5625*b:b<2/2.75?(b-=1.5/
2.75,b=7.5625*b*b+0.75):b<2.5/2.75?(b-=2.25/2.75,b=7.5625*b*b+0.9375):(b-=2.625/2.75,b=7.5625*b*b+0.984375);return b}};var Z=[],$a=function(){for(var b=+new Date,e=0;e<Z[r];e++){var c=Z[e];if(!c.stop&&!c.el.removed){var a=b-c.start,i=c.ms,f=c.easing,k=c.from,j=c.diff,o=c.to,n=c.t,h=c.el,c={},s;if(a<i){var a=f(a/i),l;for(l in k)if(k[q](l)){switch(ta[l]){case "along":s=a*i*j[l];o.back&&(s=o.len-s);f=ra(o[l],s);h.translate(j.sx-j.x||0,j.sy-j.y||0);j.x=f.x;j.y=f.y;h.translate(f.x-j.sx,f.y-j.sy);o.rot&&
h.rotate(j.r+f.alpha,f.x,f.y);break;case u:s=+k[l]+a*i*j[l];break;case "colour":s="rgb("+[Ca(U(k[l].r+a*i*j[l].r)),Ca(U(k[l].g+a*i*j[l].g)),Ca(U(k[l].b+a*i*j[l].b))][x](",")+")";break;case "path":s=[];for(var f=0,C=k[l][r];f<C;f++){s[f]=[k[l][f][0]];for(var p=1,w=k[l][f][r];p<w;p++)s[f][p]=+k[l][f][p]+a*i*j[l][f][p];s[f]=s[f][x](J)}s=s[x](J);break;case "csv":switch(l){case "translation":s=a*i*j[l][0]-n.x;f=a*i*j[l][1]-n.y;n.x+=s;n.y+=f;s=s+J+f;break;case "rotation":s=+k[l][0]+a*i*j[l][0];k[l][1]&&
(s+=","+k[l][1]+","+k[l][2]);break;case "scale":s=[+k[l][0]+a*i*j[l][0],+k[l][1]+a*i*j[l][1],2 in o[l]?o[l][2]:"",3 in o[l]?o[l][3]:""][x](J);break;case "clip-rect":s=[];for(f=4;f--;)s[f]=+k[l][f]+a*i*j[l][f]}break;default:C=[].concat(k[l]);s=[];for(f=h.paper.customAttributes[l].length;f--;)s[f]=+C[f]+a*i*j[l][f]}c[l]=s}h.attr(c);h._run&&h._run.call(h)}else o.along&&(f=ra(o.along,o.len*!o.back),h.translate(j.sx-(j.x||0)+f.x-j.sx,j.sy-(j.y||0)+f.y-j.sy),o.rot&&h.rotate(j.r+f.alpha,f.x,f.y)),(n.x||
n.y)&&h.translate(-n.x,-n.y),o.scale&&(o.scale+=""),h.attr(o),Z.splice(e--,1)}}d.svg&&h&&h.paper&&h.paper.safari();Z[r]&&setTimeout($a)},xb=function(b,e,c,a,i){var f=c-a;e.timeouts.push(setTimeout(function(){d.is(i,"function")&&i.call(e);e.animate(b,f,b.easing)},a))},Ca=function(b){return M(T(b,255),0)},pa=function(b,e){if(b==null)return{x:this._.tx,y:this._.ty,toString:h};this._.tx+=+b;this._.ty+=+e;switch(this.type){case "circle":case "ellipse":this.attr({cx:+b+this.attrs.cx,cy:+e+this.attrs.cy});
break;case "rect":case "image":case "text":this.attr({x:+b+this.attrs.x,y:+e+this.attrs.y});break;case "path":var c=va(this.attrs.path);c[0][1]+=+b;c[0][2]+=+e;this.attr({path:c})}return this};L.animateWith=function(b,e,c,a,i){for(var f=0,k=Z.length;f<k;f++)Z[f].el.id==b.id&&(e.start=Z[f].start);return this.animate(e,c,a,i)};L.animateAlong=D();L.animateAlongBack=D(1);L.onAnimation=function(b){this._run=b||0;return this};L.animate=function(b,e,c,i){var k=this;k.timeouts=k.timeouts||[];if(d.is(c,"function")||
!c)i=c||null;if(k.removed)return i&&i.call(k),k;var f={},j={},o=!1,h={},n;for(n in b)if(b[q](n)&&(ta[q](n)||k.paper.customAttributes[q](n)))switch(o=!0,f[n]=k.attr(n),f[n]==null&&(f[n]=ja[n]),j[n]=b[n],ta[n]){case "along":var s=Za(b[n]),l=ra(b[n],s*!!b.back),x=k.getBBox();h[n]=s/e;h.tx=x.x;h.ty=x.y;h.sx=l.x;h.sy=l.y;j.rot=b.rot;j.back=b.back;j.len=s;b.rot&&(h.r=I(k.rotate())||0);break;case u:h[n]=(j[n]-f[n])/e;break;case "colour":f[n]=d.getRGB(f[n]);s=d.getRGB(j[n]);h[n]={r:(s.r-f[n].r)/e,g:(s.g-
f[n].g)/e,b:(s.b-f[n].b)/e};break;case "path":s=ma(f[n],j[n]);f[n]=s[0];x=s[1];h[n]=[];s=0;for(l=f[n][r];s<l;s++){h[n][s]=[0];for(var C=1,p=f[n][s][r];C<p;C++)h[n][s][C]=(x[s][C]-f[n][s][C])/e}break;case "csv":l=a(b[n]).split(F);x=a(f[n]).split(F);switch(n){case "translation":f[n]=[0,0];h[n]=[l[0]/e,l[1]/e];break;case "rotation":f[n]=x[1]==l[1]&&x[2]==l[2]?x:[0,l[1],l[2]];h[n]=[(l[0]-f[n][0])/e,0,0];break;case "scale":b[n]=l;f[n]=a(f[n]).split(F);h[n]=[(l[0]-f[n][0])/e,(l[1]-f[n][1])/e,0,0];break;
case "clip-rect":f[n]=a(f[n]).split(F);h[n]=[];for(s=4;s--;)h[n][s]=(l[s]-f[n][s])/e}j[n]=l;break;default:l=[].concat(b[n]);x=[].concat(f[n]);h[n]=[];for(s=k.paper.customAttributes[n][r];s--;)h[n][s]=((l[s]||0)-(x[s]||0))/e}if(o){n=d.easing_formulas[c];if(!n)if((n=a(c).match(db))&&n[r]==5){var w=n;n=function(b){return E(b,+w[1],+w[2],+w[3],+w[4],e)}}else n=function(b){return b};Z.push({start:b.start||+new Date,ms:e,easing:n,from:f,diff:h,to:j,el:k,t:{x:0,y:0}});d.is(i,"function")&&(k._ac=setTimeout(function(){i.call(k)},
e));Z[r]==1&&setTimeout($a)}else{var c=[],K,B;for(B in b)if(b[q](B)&&eb.test(B))n={value:b[B]},B=="from"&&(B=0),B=="to"&&(B=100),n.key=aa(B,10),c.push(n);c.sort(jb);c[0].key&&c.unshift({key:0,value:k.attrs});s=0;for(l=c[r];s<l;s++)xb(c[s].value,k,e/100*c[s].key,e/100*(c[s-1]&&c[s-1].key||0),c[s-1]&&c[s-1].value.callback);(K=c[c[r]-1].value.callback)&&k.timeouts.push(setTimeout(function(){K.call(k)},e))}return this};L.stop=function(){for(var b=0;b<Z.length;b++)Z[b].el.id==this.id&&Z.splice(b--,1);
b=0;for(ii=this.timeouts&&this.timeouts.length;b<ii;b++)clearTimeout(this.timeouts[b]);this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};L.translate=function(b,e){return this.attr({translation:b+" "+e})};L[C]=function(){return"Rapha\u00ebl\u2019s object"};d.ae=Z;var W=function(b){this.items=[];this[r]=0;this.type="set";if(b)for(var e=0,c=b[r];e<c;e++)if(b[e]&&(b[e].constructor==P||b[e].constructor==W))this[this.items[r]]=this.items[this.items[r]]=b[e],this[r]++};W[y][B]=function(){for(var b,
e,c=0,a=arguments[r];c<a;c++)if((b=arguments[c])&&(b.constructor==P||b.constructor==W))e=this.items[r],this[e]=this.items[e]=b,this[r]++;return this};W[y].pop=function(){delete this[this[r]--];return this.items.pop()};for(var Da in L)L[q](Da)&&(W[y][Da]=function(b){return function(){for(var e=0,c=this.items[r];e<c;e++)this.items[e][b][H](this.items[e],arguments);return this}}(Da));W[y].attr=function(b,e){if(b&&d.is(b,s)&&d.is(b[0],"object"))for(var c=0,a=b[r];c<a;c++)this.items[c].attr(b[c]);else{c=
0;for(a=this.items[r];c<a;c++)this.items[c].attr(b,e)}return this};W[y].animate=function(b,e,c,a){(d.is(c,"function")||!c)&&(a=c||null);var i=this.items[r],f=i,k,j=this,o;a&&(o=function(){!--i&&a.call(j)});c=d.is(c,"string")?c:o;for(k=this.items[--f].animate(b,e,c,o);f--;)this.items[f]&&!this.items[f].removed&&this.items[f].animateWith(k,b,e,c,o);return this};W[y].insertAfter=function(b){for(var e=this.items[r];e--;)this.items[e].insertAfter(b);return this};W[y].getBBox=function(){for(var b=[],e=
[],c=[],a=[],i=this.items[r];i--;){var f=this.items[i].getBBox();b[B](f.x);e[B](f.y);c[B](f.x+f.width);a[B](f.y+f.height)}b=T[H](0,b);e=T[H](0,e);return{x:b,y:e,width:M[H](0,c)-b,height:M[H](0,a)-e}};W[y].clone=function(b){for(var b=new W,e=0,c=this.items[r];e<c;e++)b[B](this.items[e].clone());return b};d.registerFont=function(b){if(!b.face)return b;this.fonts=this.fonts||{};var e={w:b.w,face:{},glyphs:{}},c=b.face["font-family"],a;for(a in b.face)b.face[q](a)&&(e.face[a]=b.face[a]);this.fonts[c]?
this.fonts[c][B](e):this.fonts[c]=[e];if(!b.svg)for(var i in e.face["units-per-em"]=aa(b.face["units-per-em"],10),b.glyphs)if(b.glyphs[q](i)&&(c=b.glyphs[i],e.glyphs[i]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(b){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[b]||"M"})+"z"},c.k))for(var f in c.k)c[q](f)&&(e.glyphs[i].k[f]=c.k[f]);return b};G.getFont=function(b,e,c,a){a=a||"normal";c=c||"normal";e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400;if(d.fonts){var i=d.fonts[b];if(!i){var b=
RegExp("(^|\\s)"+b.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i"),f;for(f in d.fonts)if(d.fonts[q](f)&&b.test(f)){i=d.fonts[f];break}}var k;if(i){f=0;for(b=i[r];f<b;f++)if(k=i[f],k.face["font-weight"]==e&&(k.face["font-style"]==c||!k.face["font-style"])&&k.face["font-stretch"]==a)break}return k}};G.print=function(b,e,c,i,k,f,j){var f=f||"middle",j=M(T(j||0,1),-1),o=this.set(),u=a(c).split(""),n=0;d.is(i,c)&&(i=this.getFont(i));if(i){for(var c=(k||16)/i.face["units-per-em"],h=i.face.bbox.split(F),
k=+h[0],f=+h[1]+(f=="baseline"?h[3]-h[1]+ +i.face.descent:(h[3]-h[1])/2),h=0,s=u[r];h<s;h++){var l=h&&i.glyphs[u[h-1]]||{},x=i.glyphs[u[h]];n+=h?(l.w||i.w)+(l.k&&l.k[u[h]]||0)+i.w*j:0;x&&x.d&&o[B](this.path(x.d).attr({fill:"#000",stroke:"none",translation:[n,0]}))}o.scale(c,c,k,f).translate(b-k,e-f)}return o};d.format=function(b,e){var c=d.is(e,s)?[0].concat(e):arguments;b&&d.is(b,"string")&&c[r]-1&&(b=b.replace(Q,function(b,e){return c[++e]==null?"":c[e]}));return b||""};d.ninja=function(){S.was?
z.Raphael=S.is:delete Raphael;return d};d.el=L;d.st=W[y];S.was?z.Raphael=d:Raphael=d})();(function(){var d=this,p=d._,l={},h=Array.prototype,D=Object.prototype,E=h.slice,F=h.unshift,N=D.toString,Q=D.hasOwnProperty,y=h.forEach,q=h.map,t=h.reduce,z=h.reduceRight,S=h.filter,R=h.every,G=h.some,H=h.indexOf,O=h.lastIndexOf,D=Array.isArray,J=Object.keys,a=Function.prototype.bind,c=function(c){return new w(c)};typeof module!=="undefined"&&module.exports?(module.exports=c,c._=c):d._=c;c.VERSION="1.1.6";var j=c.each=c.forEach=function(a,k,d){if(a!=null)if(y&&a.forEach===y)a.forEach(k,d);else if(c.isNumber(a.length))for(var j=
0,h=a.length;j<h;j++){if(k.call(d,a[j],j,a)===l)break}else for(j in a)if(Q.call(a,j)&&k.call(d,a[j],j,a)===l)break};c.map=function(c,a,d){var u=[];if(c==null)return u;if(q&&c.map===q)return c.map(a,d);j(c,function(c,i,j){u[u.length]=a.call(d,c,i,j)});return u};c.reduce=c.foldl=c.inject=function(a,k,d,u){var h=d!==void 0;a==null&&(a=[]);if(t&&a.reduce===t)return u&&(k=c.bind(k,u)),h?a.reduce(k,d):a.reduce(k);j(a,function(c,a,i){!h&&a===0?(d=c,h=!0):d=k.call(u,d,c,a,i)});if(!h)throw new TypeError("Reduce of empty array with no initial value");
return d};c.reduceRight=c.foldr=function(a,k,d,j){a==null&&(a=[]);if(z&&a.reduceRight===z)return j&&(k=c.bind(k,j)),d!==void 0?a.reduceRight(k,d):a.reduceRight(k);a=(c.isArray(a)?a.slice():c.toArray(a)).reverse();return c.reduce(a,k,d,j)};c.find=c.detect=function(c,a,d){var j;x(c,function(c,i,h){if(a.call(d,c,i,h))return j=c,!0});return j};c.filter=c.select=function(c,a,d){var h=[];if(c==null)return h;if(S&&c.filter===S)return c.filter(a,d);j(c,function(c,i,j){a.call(d,c,i,j)&&(h[h.length]=c)});return h};
c.reject=function(c,a,d){var h=[];if(c==null)return h;j(c,function(c,i,j){a.call(d,c,i,j)||(h[h.length]=c)});return h};c.every=c.all=function(c,a,d){var h=!0;if(c==null)return h;if(R&&c.every===R)return c.every(a,d);j(c,function(c,i,j){if(!(h=h&&a.call(d,c,i,j)))return l});return h};var x=c.some=c.any=function(a,k,d){k||(k=c.identity);var h=!1;if(a==null)return h;if(G&&a.some===G)return a.some(k,d);j(a,function(c,a,i){if(h=k.call(d,c,a,i))return l});return h};c.include=c.contains=function(c,a){var d=
!1;if(c==null)return d;if(H&&c.indexOf===H)return c.indexOf(a)!=-1;x(c,function(c){if(d=c===a)return!0});return d};c.invoke=function(a,d){var j=E.call(arguments,2);return c.map(a,function(c){return(d.call?d||c:c[d]).apply(c,j)})};c.pluck=function(a,d){return c.map(a,function(c){return c[d]})};c.max=function(a,d,o){if(!d&&c.isArray(a))return Math.max.apply(Math,a);var h={computed:-Infinity};j(a,function(c,a,i){a=d?d.call(o,c,a,i):c;a>=h.computed&&(h={value:c,computed:a})});return h.value};c.min=function(a,
d,o){if(!d&&c.isArray(a))return Math.min.apply(Math,a);var h={computed:Infinity};j(a,function(c,a,i){a=d?d.call(o,c,a,i):c;a<h.computed&&(h={value:c,computed:a})});return h.value};c.sortBy=function(a,d,j){return c.pluck(c.map(a,function(c,a,i){return{value:c,criteria:d.call(j,c,a,i)}}).sort(function(c,a){var i=c.criteria,d=a.criteria;return i<d?-1:i>d?1:0}),"value")};c.sortedIndex=function(a,d,j){j||(j=c.identity);for(var h=0,l=a.length;h<l;){var x=h+l>>1;j(a[x])<j(d)?h=x+1:l=x}return h};c.toArray=
function(a){if(!a)return[];if(a.toArray)return a.toArray();if(c.isArray(a))return a;if(c.isArguments(a))return E.call(a);return c.values(a)};c.size=function(a){return c.toArray(a).length};c.first=c.head=function(c,a,d){return a!=null&&!d?E.call(c,0,a):c[0]};c.rest=c.tail=function(c,a,d){return E.call(c,a==null||d?1:a)};c.last=function(c){return c[c.length-1]};c.compact=function(a){return c.filter(a,function(c){return!!c})};c.flatten=function(a){return c.reduce(a,function(a,i){if(c.isArray(i))return a.concat(c.flatten(i));
a[a.length]=i;return a},[])};c.without=function(a){var d=E.call(arguments,1);return c.filter(a,function(a){return!c.include(d,a)})};c.uniq=c.unique=function(a,d){return c.reduce(a,function(a,i,j){if(0==j||(d===!0?c.last(a)!=i:!c.include(a,i)))a[a.length]=i;return a},[])};c.intersect=function(a){var d=E.call(arguments,1);return c.filter(c.uniq(a),function(a){return c.every(d,function(i){return c.indexOf(i,a)>=0})})};c.zip=function(){for(var a=E.call(arguments),d=c.max(c.pluck(a,"length")),j=Array(d),
h=0;h<d;h++)j[h]=c.pluck(a,""+h);return j};c.indexOf=function(a,d,j){if(a==null)return-1;var h;if(j)return j=c.sortedIndex(a,d),a[j]===d?j:-1;if(H&&a.indexOf===H)return a.indexOf(d);j=0;for(h=a.length;j<h;j++)if(a[j]===d)return j;return-1};c.lastIndexOf=function(c,a){if(c==null)return-1;if(O&&c.lastIndexOf===O)return c.lastIndexOf(a);for(var d=c.length;d--;)if(c[d]===a)return d;return-1};c.range=function(c,a,d){arguments.length<=1&&(a=c||0,c=0);for(var d=arguments[2]||1,j=Math.max(Math.ceil((a-c)/
d),0),h=0,l=Array(j);h<j;)l[h++]=c,c+=d;return l};c.bind=function(c,d){if(c.bind===a&&a)return a.apply(c,E.call(arguments,1));var j=E.call(arguments,2);return function(){return c.apply(d,j.concat(E.call(arguments)))}};c.bindAll=function(a){var d=E.call(arguments,1);d.length==0&&(d=c.functions(a));j(d,function(d){a[d]=c.bind(a[d],a)});return a};c.memoize=function(a,d){var j={};d||(d=c.identity);return function(){var c=d.apply(this,arguments);return Q.call(j,c)?j[c]:j[c]=a.apply(this,arguments)}};c.delay=
function(c,a){var d=E.call(arguments,2);return setTimeout(function(){return c.apply(c,d)},a)};c.defer=function(a){return c.delay.apply(c,[a,1].concat(E.call(arguments,1)))};var r=function(c,a,d){var j;return function(){var h=this,l=arguments,x=function(){j=null;c.apply(h,l)};d&&clearTimeout(j);if(d||!j)j=setTimeout(x,a)}};c.throttle=function(c,a){return r(c,a,!1)};c.debounce=function(c,a){return r(c,a,!0)};c.once=function(c){var a=!1,d;return function(){if(a)return d;a=!0;return d=c.apply(this,arguments)}};
c.wrap=function(c,a){return function(){var d=[c].concat(E.call(arguments));return a.apply(this,d)}};c.compose=function(){var c=E.call(arguments);return function(){for(var a=E.call(arguments),d=c.length-1;d>=0;d--)a=[c[d].apply(this,a)];return a[0]}};c.after=function(c,a){return function(){if(--c<1)return a.apply(this,arguments)}};c.keys=J||function(c){if(c!==Object(c))throw new TypeError("Invalid object");var a=[],d;for(d in c)Q.call(c,d)&&(a[a.length]=d);return a};c.values=function(a){return c.map(a,
c.identity)};c.functions=c.methods=function(a){return c.filter(c.keys(a),function(d){return c.isFunction(a[d])}).sort()};c.extend=function(c){j(E.call(arguments,1),function(a){for(var d in a)a[d]!==void 0&&(c[d]=a[d])});return c};c.defaults=function(c){j(E.call(arguments,1),function(a){for(var d in a)c[d]==null&&(c[d]=a[d])});return c};c.clone=function(a){return c.isArray(a)?a.slice():c.extend({},a)};c.tap=function(c,a){a(c);return c};c.isEqual=function(a,d){if(a===d)return!0;var j=typeof a;if(j!=
typeof d)return!1;if(a==d)return!0;if(!a&&d||a&&!d)return!1;if(a._chain)a=a._wrapped;if(d._chain)d=d._wrapped;if(a.isEqual)return a.isEqual(d);if(c.isDate(a)&&c.isDate(d))return a.getTime()===d.getTime();if(c.isNaN(a)&&c.isNaN(d))return!1;if(c.isRegExp(a)&&c.isRegExp(d))return a.source===d.source&&a.global===d.global&&a.ignoreCase===d.ignoreCase&&a.multiline===d.multiline;if(j!=="object")return!1;if(a.length&&a.length!==d.length)return!1;var j=c.keys(a),h=c.keys(d);if(j.length!=h.length)return!1;
for(var l in a)if(!(l in d)||!c.isEqual(a[l],d[l]))return!1;return!0};c.isEmpty=function(a){if(c.isArray(a)||c.isString(a))return a.length===0;for(var d in a)if(Q.call(a,d))return!1;return!0};c.isElement=function(a){return!!(a&&a.nodeType==1)};c.isArray=D||function(a){return N.call(a)==="[object Array]"};c.isArguments=function(a){return!(!a||!Q.call(a,"callee"))};c.isFunction=function(a){return!(!a||!a.constructor||!a.call||!a.apply)};c.isString=function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)};
c.isNumber=function(a){return!!(a===0||a&&a.toExponential&&a.toFixed)};c.isNaN=function(a){return a!==a};c.isBoolean=function(a){return a===!0||a===!1};c.isDate=function(a){return!(!a||!a.getTimezoneOffset||!a.setUTCFullYear)};c.isRegExp=function(a){return!(!a||!a.test||!a.exec||!(a.ignoreCase||a.ignoreCase===!1))};c.isNull=function(a){return a===null};c.isUndefined=function(a){return a===void 0};c.noConflict=function(){d._=p;return this};c.identity=function(a){return a};c.times=function(a,c,d){for(var j=
0;j<a;j++)c.call(d,j)};c.mixin=function(a){j(c.functions(a),function(d){T(d,c[d]=a[d])})};var K=0;c.uniqueId=function(a){var c=K++;return a?a+c:c};c.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};c.template=function(a,d){var j=c.templateSettings,j="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(j.interpolate,function(a,c){return"',"+c.replace(/\\'/g,"'")+",'"}).replace(j.evaluate||
null,function(a,c){return"');"+c.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",j=new Function("obj",j);return d?j(d):j};var w=function(a){this._wrapped=a};c.prototype=w.prototype;var M=function(a,d){return d?c(a).chain():a},T=function(a,d){w.prototype[a]=function(){var a=E.call(arguments);F.call(a,this._wrapped);return M(d.apply(c,a),this._chain)}};c.mixin(c);j(["pop","push","reverse","shift","sort",
"splice","unshift"],function(a){var c=h[a];w.prototype[a]=function(){c.apply(this._wrapped,arguments);return M(this._wrapped,this._chain)}});j(["concat","join","slice"],function(a){var c=h[a];w.prototype[a]=function(){return M(c.apply(this._wrapped,arguments),this._chain)}});w.prototype.chain=function(){this._chain=!0;return this};w.prototype.value=function(){return this._wrapped}})();(function(){var d=this,p=d.Backbone,l;l=typeof exports!=="undefined"?exports:d.Backbone={};l.VERSION="0.5.2";var h=d._;if(!h&&typeof require!=="undefined")h=require("underscore")._;var D=d.jQuery||d.Zepto;l.noConflict=function(){d.Backbone=p;return this};l.emulateHTTP=!1;l.emulateJSON=!1;l.Events={bind:function(a,c,d){var h=this._callbacks||(this._callbacks={});(h[a]||(h[a]=[])).push([c,d]);return this},unbind:function(a,c){var d;if(a){if(d=this._callbacks)if(c){d=d[a];if(!d)return this;for(var h=
0,l=d.length;h<l;h++)if(d[h]&&c===d[h][0]){d[h]=null;break}}else d[a]=[]}else this._callbacks={};return this},trigger:function(a){var c,d,h,l,p=2;if(!(d=this._callbacks))return this;for(;p--;)if(c=p?a:"all",c=d[c])for(var w=0,q=c.length;w<q;w++)(h=c[w])?(l=p?Array.prototype.slice.call(arguments,1):arguments,h[0].apply(h[1]||this,l)):(c.splice(w,1),w--,q--);return this}};l.Model=function(a,c){var d;a||(a={});if(d=this.defaults)h.isFunction(d)&&(d=d.call(this)),a=h.extend({},d,a);this.attributes={};
this._escapedAttributes={};this.cid=h.uniqueId("c");this.set(a,{silent:!0});this._changed=!1;this._previousAttributes=h.clone(this.attributes);if(c&&c.collection)this.collection=c.collection;this.initialize(a,c)};h.extend(l.Model.prototype,l.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var c;if(c=this._escapedAttributes[a])return c;c=this.attributes[a];
return this._escapedAttributes[a]=(c==null?"":""+c).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},has:function(a){return this.attributes[a]!=null},set:function(a,c){c||(c={});if(!a)return this;if(a.attributes)a=a.attributes;var d=this.attributes,l=this._escapedAttributes;if(!c.silent&&this.validate&&!this._performValidation(a,c))return!1;if(this.idAttribute in a)this.id=a[this.idAttribute];
var r=this._changing;this._changing=!0;for(var p in a){var w=a[p];if(!h.isEqual(d[p],w))d[p]=w,delete l[p],this._changed=!0,c.silent||this.trigger("change:"+p,this,w,c)}!r&&!c.silent&&this._changed&&this.change(c);this._changing=!1;return this},unset:function(a,c){if(!(a in this.attributes))return this;c||(c={});var d={};d[a]=void 0;if(!c.silent&&this.validate&&!this._performValidation(d,c))return!1;delete this.attributes[a];delete this._escapedAttributes[a];a==this.idAttribute&&delete this.id;this._changed=
!0;c.silent||(this.trigger("change:"+a,this,void 0,c),this.change(c));return this},clear:function(a){a||(a={});var c,d=this.attributes,h={};for(c in d)h[c]=void 0;if(!a.silent&&this.validate&&!this._performValidation(h,a))return!1;this.attributes={};this._escapedAttributes={};this._changed=!0;if(!a.silent){for(c in d)this.trigger("change:"+c,this,void 0,a);this.change(a)}return this},fetch:function(a){a||(a={});var c=this,d=a.success;a.success=function(h,l,p){if(!c.set(c.parse(h,p),a))return!1;d&&
d(c,h)};a.error=J(a.error,c,a);return(this.sync||l.sync).call(this,"read",this,a)},save:function(a,c){c||(c={});if(a&&!this.set(a,c))return!1;var d=this,h=c.success;c.success=function(a,l,r){if(!d.set(d.parse(a,r),c))return!1;h&&h(d,a,r)};c.error=J(c.error,d,c);var r=this.isNew()?"create":"update";return(this.sync||l.sync).call(this,r,this,c)},destroy:function(a){a||(a={});if(this.isNew())return this.trigger("destroy",this,this.collection,a);var c=this,d=a.success;a.success=function(h){c.trigger("destroy",
c,c.collection,a);d&&d(c,h)};a.error=J(a.error,c,a);return(this.sync||l.sync).call(this,"delete",this,a)},url:function(){var a=H(this.collection)||this.urlRoot||O();if(this.isNew())return a;return a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(a){this.trigger("change",this,a);this._previousAttributes=h.clone(this.attributes);this._changed=!1},hasChanged:function(a){if(a)return this._previousAttributes[a]!=
this.attributes[a];return this._changed},changedAttributes:function(a){a||(a=this.attributes);var c=this._previousAttributes,d=!1,l;for(l in a)h.isEqual(c[l],a[l])||(d=d||{},d[l]=a[l]);return d},previous:function(a){if(!a||!this._previousAttributes)return null;return this._previousAttributes[a]},previousAttributes:function(){return h.clone(this._previousAttributes)},_performValidation:function(a,c){var d=this.validate(a);if(d)return c.error?c.error(this,d,c):this.trigger("error",this,d,c),!1;return!0}});
l.Collection=function(a,c){c||(c={});if(c.comparator)this.comparator=c.comparator;h.bindAll(this,"_onModelEvent","_removeReference");this._reset();a&&this.reset(a,{silent:!0});this.initialize.apply(this,arguments)};h.extend(l.Collection.prototype,l.Events,{model:l.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,c){if(h.isArray(a))for(var d=0,l=a.length;d<l;d++)this._add(a[d],c);else this._add(a,c);return this},remove:function(a,c){if(h.isArray(a))for(var d=
0,l=a.length;d<l;d++)this._remove(a[d],c);else this._remove(a,c);return this},get:function(a){if(a==null)return null;return this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.models=this.sortBy(this.comparator);a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return h.map(this.models,function(c){return c.get(a)})},
reset:function(a,c){a||(a=[]);c||(c={});this.each(this._removeReference);this._reset();this.add(a,{silent:!0});c.silent||this.trigger("reset",this,c);return this},fetch:function(a){a||(a={});var c=this,d=a.success;a.success=function(h,l,p){c[a.add?"add":"reset"](c.parse(h,p),a);d&&d(c,h)};a.error=J(a.error,c,a);return(this.sync||l.sync).call(this,"read",this,a)},create:function(a,c){var d=this;c||(c={});a=this._prepareModel(a,c);if(!a)return!1;var h=c.success;c.success=function(a,l,p){d.add(a,c);
h&&h(a,l,p)};a.save(null,c);return a},parse:function(a){return a},chain:function(){return h(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(a,c){if(a instanceof l.Model){if(!a.collection)a.collection=this}else{var d=a,a=new this.model(d,{collection:this});a.validate&&!a._performValidation(d,c)&&(a=!1)}return a},_add:function(a,c){c||(c={});a=this._prepareModel(a,c);if(!a)return!1;var d=this.getByCid(a);if(d)throw Error(["Can't add the same model to a set twice",
d.id]);this._byId[a.id]=a;this._byCid[a.cid]=a;this.models.splice(c.at!=null?c.at:this.comparator?this.sortedIndex(a,this.comparator):this.length,0,a);a.bind("all",this._onModelEvent);this.length++;c.silent||a.trigger("add",a,this,c);return a},_remove:function(a,c){c||(c={});a=this.getByCid(a)||this.get(a);if(!a)return null;delete this._byId[a.id];delete this._byCid[a.cid];this.models.splice(this.indexOf(a),1);this.length--;c.silent||a.trigger("remove",a,this,c);this._removeReference(a);return a},
_removeReference:function(a){this==a.collection&&delete a.collection;a.unbind("all",this._onModelEvent)},_onModelEvent:function(a,c,d,h){(a=="add"||a=="remove")&&d!=this||(a=="destroy"&&this._remove(c,h),c&&a==="change:"+c.idAttribute&&(delete this._byId[c.previous(c.idAttribute)],this._byId[c.id]=c),this.trigger.apply(this,arguments))}});h.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max",
"min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty"],function(a){l.Collection.prototype[a]=function(){return h[a].apply(h,[this.models].concat(h.toArray(arguments)))}});l.Router=function(a){a||(a={});if(a.routes)this.routes=a.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var E=/:([\w\d]+)/g,F=/\*([\w\d]+)/g,N=/[-[\]{}()+?.,\\^$|#\s]/g;h.extend(l.Router.prototype,l.Events,{initialize:function(){},route:function(a,c,d){l.history||
(l.history=new l.History);h.isRegExp(a)||(a=this._routeToRegExp(a));l.history.route(a,h.bind(function(h){h=this._extractParameters(a,h);d.apply(this,h);this.trigger.apply(this,["route:"+c].concat(h))},this))},navigate:function(a,c){l.history.navigate(a,c)},_bindRoutes:function(){if(this.routes){var a=[],c;for(c in this.routes)a.unshift([c,this.routes[c]]);c=0;for(var d=a.length;c<d;c++)this.route(a[c][0],a[c][1],this[a[c][1]])}},_routeToRegExp:function(a){a=a.replace(N,"\\$&").replace(E,"([^/]*)").replace(F,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,c){return a.exec(c).slice(1)}});l.History=function(){this.handlers=[];h.bindAll(this,"checkUrl")};var Q=/^#*/,y=/msie [\w.]+/,q=!1;h.extend(l.History.prototype,{interval:50,getFragment:function(a,c){if(a==null)if(this._hasPushState||c){var a=window.location.pathname,d=window.location.search;d&&(a+=d);a.indexOf(this.options.root)==0&&(a=a.substr(this.options.root.length))}else a=window.location.hash;return a.replace(Q,"")},start:function(a){if(q)throw Error("Backbone.history has already been started");
this.options=h.extend({},{root:"/"},this.options,a);this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),c=document.documentMode;if(c=y.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7))this.iframe=D('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?D(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!c?
D(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval);this.fragment=a;q=!0;a=window.location;c=a.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!c)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;else if(this._wantsPushState&&this._hasPushState&&c&&a.hash)this.fragment=a.hash.replace(Q,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment);
return this.loadUrl()},route:function(a,c){this.handlers.unshift({route:a,callback:c})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.iframe.location.hash));if(a==this.fragment||a==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var c=this.fragment=this.getFragment(a);return h.any(this.handlers,function(a){if(a.route.test(c))return a.callback(c),!0})},
navigate:function(a,c){var d=(a||"").replace(Q,"");if(!(this.fragment==d||this.fragment==decodeURIComponent(d))){if(this._hasPushState){var h=window.location;d.indexOf(this.options.root)!=0&&(d=this.options.root+d);this.fragment=d;window.history.pushState({},document.title,h.protocol+"//"+h.host+d)}else if(window.location.hash=this.fragment=d,this.iframe&&d!=this.getFragment(this.iframe.location.hash))this.iframe.document.open().close(),this.iframe.location.hash=d;c&&this.loadUrl(a)}}});l.View=function(a){this.cid=
h.uniqueId("view");this._configure(a||{});this._ensureElement();this.delegateEvents();this.initialize.apply(this,arguments)};var t=/^(\S+)\s*(.*)$/,z=["model","collection","el","id","attributes","className","tagName"];h.extend(l.View.prototype,l.Events,{tagName:"div",$:function(a){return D(a,this.el)},initialize:function(){},render:function(){return this},remove:function(){D(this.el).remove();return this},make:function(a,c,d){a=document.createElement(a);c&&D(a).attr(c);d&&D(a).html(d);return a},delegateEvents:function(a){if(a||
(a=this.events))for(var c in D(this.el).unbind(".delegateEvents"+this.cid),a){var d=this[a[c]];if(!d)throw Error('Event "'+a[c]+'" does not exist');var l=c.match(t),p=l[1],l=l[2],d=h.bind(d,this);p+=".delegateEvents"+this.cid;l===""?D(this.el).bind(p,d):D(this.el).delegate(l,p,d)}},_configure:function(a){this.options&&(a=h.extend({},this.options,a));for(var c=0,d=z.length;c<d;c++){var l=z[c];a[l]&&(this[l]=a[l])}this.options=a},_ensureElement:function(){if(this.el){if(h.isString(this.el))this.el=
D(this.el).get(0)}else{var a=this.attributes||{};if(this.id)a.id=this.id;if(this.className)a["class"]=this.className;this.el=this.make(this.tagName,a)}}});l.Model.extend=l.Collection.extend=l.Router.extend=l.View.extend=function(a,c){var d=G(this,a,c);d.extend=this.extend;return d};var S={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};l.sync=function(a,c,d){var p=S[a],d=h.extend({type:p,dataType:"json"},d);if(!d.url)d.url=H(c)||O();if(!d.data&&c&&(a=="create"||a=="update"))d.contentType=
"application/json",d.data=JSON.stringify(c.toJSON());if(l.emulateJSON)d.contentType="application/x-www-form-urlencoded",d.data=d.data?{model:d.data}:{};if(l.emulateHTTP&&(p==="PUT"||p==="DELETE")){if(l.emulateJSON)d.data._method=p;d.type="POST";d.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",p)}}if(d.type!=="GET")d.processData=!1;return D.ajax(d)};var R=function(){},G=function(a,c,d){var l;l=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)};
h.extend(l,a);R.prototype=a.prototype;l.prototype=new R;c&&h.extend(l.prototype,c);d&&h.extend(l,d);l.prototype.constructor=l;l.__super__=a.prototype;return l},H=function(a){if(!a||!a.url)return null;return h.isFunction(a.url)?a.url():a.url},O=function(){throw Error('A "url" property or function must be specified');},J=function(a,c,d){return function(h){a?a(c,h,d):c.trigger("error",c,h,d)}}}).call(this);window.Modernizr=function(d,p,l){var h={},D=p.documentElement;p.head||p.getElementsByTagName("head");var E=p.createElement("modernizr"),E=E.style,F=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),N={},Q=[],y=function(d,h,l,q){var t,a=p.createElement("div");if(parseInt(l,10))for(;l--;)t=p.createElement("div"),t.id=q?q[l]:"modernizr"+(l+1),a.appendChild(t);l=["&shy;<style>",d,"</style>"].join("");a.id="modernizr";a.innerHTML+=l;D.appendChild(a);d=h(a,d);a.parentNode.removeChild(a);return!!d},q,t={}.hasOwnProperty,
z;typeof t!==l&&typeof t.call!==l?z=function(d,h){return t.call(d,h)}:z=function(d,h){return h in d&&typeof d.constructor.prototype[h]===l};(function(l,p){var q=l.join(""),t=p.length;y(q,function(l){for(var l=l.childNodes,a={};t--;)a[l[t].id]=l[t];h.touch="ontouchstart"in d||a.touch.offsetTop===9},t,p)})([,["@media (",F.join("touch-enabled),("),"modernizr){#touch{top:9px;position:absolute}}"].join("")],[,"touch"]);N.touch=function(){return h.touch};for(var S in N)z(N,S)&&(q=S.toLowerCase(),h[q]=N[S](),
Q.push((h[q]?"":"no-")+q));E.cssText="";E=null;d.attachEvent&&function(){var d=p.createElement("div");d.innerHTML="<elem></elem>";return d.childNodes.length!==1}()&&function(d,h){function p(d){for(var j=-1;++j<c;)d.createElement(a[j])}d.iepp=d.iepp||{};var q=d.iepp,t=q.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",a=t.split("|"),c=a.length,j=RegExp("(^|\\s)("+t+")","gi"),x=RegExp("<(/*)("+
t+")","gi"),r=/^\s*[\{\}]\s*$/,z=RegExp("(^|[^\\n]*?\\s)("+t+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),w=h.createDocumentFragment(),M=h.documentElement,t=M.firstChild,y=h.createElement("body"),i=h.createElement("style"),k=/print|all/,o;q.getCSS=function(a,c){if(a+""===l)return"";for(var d=-1,j=a.length,i,h=[];++d<j;)i=a[d],i.disabled||(c=i.media||c,k.test(c)&&h.push(q.getCSS(i.imports,c),i.cssText),c="all");return h.join("")};q.parseCSS=function(a){for(var c=[],d;(d=z.exec(a))!=null;)c.push(((r.exec(d[1])?
"\n":d[1])+d[2]+d[3]).replace(j,"$1.iepp_$2")+d[4]);return c.join("\n")};q.writeHTML=function(){var d=-1;for(o=o||h.body;++d<c;)for(var j=h.getElementsByTagName(a[d]),i=j.length,k=-1;++k<i;)j[k].className.indexOf("iepp_")<0&&(j[k].className+=" iepp_"+a[d]);w.appendChild(o);M.appendChild(y);y.className=o.className;y.id=o.id;y.innerHTML=o.innerHTML.replace(x,"<$1font")};q._beforePrint=function(){i.styleSheet.cssText=q.parseCSS(q.getCSS(h.styleSheets,"all"));q.writeHTML()};q.restoreHTML=function(){y.innerHTML=
"";M.removeChild(y);M.appendChild(o)};q._afterPrint=function(){q.restoreHTML();i.styleSheet.cssText=""};p(h);p(w);q.disablePP||(t.insertBefore(i,t.firstChild),i.media="print",i.className="iepp-printshim",d.attachEvent("onbeforeprint",q._beforePrint),d.attachEvent("onafterprint",q._afterPrint))}(d,p);h._version="2.0.6";h._prefixes=F;h.testStyles=y;D.className=D.className.replace(/\bno-js\b/,"")+(" js "+Q.join(" "));return h}(this,this.document);
(function(d,p,l){function h(){for(var a=1,c=-1;R.length-++c;)if(R[c].s&&!(a=R[c].r))break;a&&F()}function D(a){var c=p.createElement("script"),d;c.src=a.s;c.onreadystatechange=c.onload=function(){!d&&(!c.readyState||c.readyState=="loaded"||c.readyState=="complete")&&(d=1,h(),c.onload=c.onreadystatechange=null)};t(function(){d||(d=1,h())},o.errorTimeout);a.e?c.onload():z.parentNode.insertBefore(c,z)}function E(a){var d=p.createElement("link"),j;d.href=a.s;d.rel="stylesheet";d.type="text/css";if(!a.e&&
(c||H)){var i=function(a){t(function(){if(!j)try{a.sheet.cssRules.length?(j=1,h()):i(a)}catch(c){c.code==1E3||c.message=="security"||c.message=="denied"?(j=1,t(function(){h()},0)):i(a)}},0)};i(d)}else d.onload=function(){j||(j=1,t(function(){h()},0))},a.e&&d.onload();t(function(){j||(j=1,h())},o.errorTimeout);!a.e&&z.parentNode.insertBefore(d,z)}function F(){var a=R.shift();G=1;a?a.t?t(function(){a.t=="c"?E(a):D(a)},0):(a(),h()):G=0}function N(a,c,d,j,i,k){function l(){!q&&(!r.readyState||r.readyState==
"loaded"||r.readyState=="complete")&&(w.r=q=1,!G&&h(),r.onload=r.onreadystatechange=null,t(function(){J.removeChild(r)},0))}var r=p.createElement(a),q=0,w={t:d,s:c,e:k};r.src=r.data=c;!O&&(r.style.display="none");r.width=r.height="0";a!="object"&&(r.type=d);r.onload=r.onreadystatechange=l;a=="img"?r.onerror=l:a=="script"&&(r.onerror=function(){w.e=w.r=1;F()});R.splice(j,0,w);J.insertBefore(r,O?null:z);t(function(){q||(J.removeChild(r),w.r=w.e=q=1,h())},o.errorTimeout)}function Q(a,c,d){var j=c=="c"?
r:x;G=0;c=c||"j";w(a)?N(j,a,c,this.i++,q,d):(R.splice(this.i++,0,a),R.length==1&&F());return this}function y(){var a=o;a.loader={load:Q,i:0};return a}var q=p.documentElement,t=d.setTimeout,z=p.getElementsByTagName("script")[0],S={}.toString,R=[],G=0,H="MozAppearance"in q.style,O=H&&!!p.createRange().compareNode,J=O?q:z.parentNode,a=d.opera&&S.call(d.opera)=="[object Opera]",c="webkitAppearance"in q.style,j=c&&"async"in p.createElement("script"),x=H?"object":a||j?"img":"script",r=c?"img":x,K=Array.isArray||
function(a){return S.call(a)=="[object Array]"},w=function(a){return typeof a=="string"},M=function(a){return S.call(a)=="[object Function]"},T=[],i={},k,o;o=function(a){function c(a){var a=a.split("!"),d=T.length,j=a.pop(),h=a.length,j={url:j,origUrl:j,prefixes:a},k,l;for(l=0;l<h;l++)(k=i[a[l]])&&(j=k(j));for(l=0;l<d;l++)j=T[l](j);return j}function d(a,j,i,h,k){var o=c(a),p=o.autoCallback;if(!o.bypass){j&&(j=M(j)?j:j[a]||j[h]||j[a.split("/").pop().split("?")[0]]);if(o.instead)return o.instead(a,
j,i,h,k);i.load(o.url,o.forceCSS||!o.forceJS&&/css$/.test(o.url)?"c":l,o.noexec);(M(j)||M(p))&&i.load(function(){y();j&&j(o.origUrl,k,h);p&&p(o.origUrl,k,h)})}}function j(a,c){function i(a){if(w(a))d(a,l,c,0,h);else if(Object(a)===a)for(o in a)a.hasOwnProperty(o)&&d(a[o],l,c,o,h)}var h=!!a.test,k=a.load||a.both,l=a.callback,o;i(h?a.yep:a.nope);i(k);a.complete&&c.load(a.complete)}var h,k,p=this.yepnope.loader;if(w(a))d(a,0,p,0);else if(K(a))for(h=0;h<a.length;h++)k=a[h],w(k)?d(k,0,p,0):K(k)?o(k):Object(k)===
k&&j(k,p);else Object(a)===a&&j(a,p)};o.addPrefix=function(a,c){i[a]=c};o.addFilter=function(a){T.push(a)};o.errorTimeout=1E4;p.readyState==null&&p.addEventListener&&(p.readyState="loading",p.addEventListener("DOMContentLoaded",k=function(){p.removeEventListener("DOMContentLoaded",k,0);p.readyState="complete"},0));d.yepnope=y()})(this,this.document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};(function(d,p,l){function h(a,c,d){var h=jQuery.inArray(a,q)>-1;(a=="width"||a=="height")&&c===parseFloat(d.css(a))&&(h=!1);return h}function D(a){return parseFloat(a.replace(/px/i,""))}function E(a){for(var c in a)return!1;return!0}function F(a){for(var c in a)if((c=="width"||c=="height")&&(a[c]=="show"||a[c]=="hide"||a[c]=="toggle"))return!0;return!1}function N(a,d,h,l,p,q,t,i){a=typeof a=="undefined"?{}:a;a.secondary=typeof a.secondary=="undefined"?{}:a.secondary;for(var k=z.length-1;k>=0;k--)typeof a[z[k]+
"transition-property"]=="undefined"&&(a[z[k]+"transition-property"]=""),a[z[k]+"transition-property"]+=", "+(q===!0&&t===!0?z[k]+"transform":d),a[z[k]+"transition-duration"]=h+"ms",a[z[k]+"transition-timing-function"]=l,a.secondary[q===!0&&t===!0?z[k]+"transform":d]=q===!0&&t===!0?i===!0&&c?"translate3d("+a.meta.left+"px,"+a.meta.top+"px,0)":"translate("+a.meta.left+"px,"+a.meta.top+"px)":p;return a}function Q(a,c,d,h,l,p,q,i){var k=a.data(O)?E(a.data(O))?jQuery.extend(!0,{},H):a.data(O):jQuery.extend(!0,
{},H),o=l,u=jQuery.inArray(c,t)>-1;if(u){var s=k.meta,z=D(a.css(c))||0,y=c+"_o",o=u?l-z:l;s[c]=o;s[y]=a.css(c)=="auto"?0+o:z+o||0;k.meta=s;q&&o===0&&(o=0-s[y],s[c]=o,s[y]=0)}return a.data(O,N(k,c,d,h,o,p,q,i))}function y(a,c,d,h){var l=R.exec(c),p=a.css(d)==="auto"?0:a.css(d),p=typeof p=="string"?D(p):p;typeof c=="string"&&D(c);var h=h===!0?0:p,q=a.is(":hidden"),i=a.translation();d=="left"&&(h=parseInt(p,10)+i.x);d=="top"&&(h=parseInt(p,10)+i.y);!l&&c=="show"?(h=1,q&&a.css({display:"block",opacity:0})):
!l&&c=="hide"&&(h=0);if(l)return a=parseFloat(l[2]),l[1]&&(a=(l[1]==="-="?-1:1)*a+parseInt(h,10)),a;return h}var q=["top","right","bottom","left","opacity","height","width"],t=["top","right","bottom","left"],z=["","-webkit-","-moz-","-o-"],S=["avoidTransforms","useTranslate3d","leaveTransforms"],R=/^([+-]=)?([\d+-.]+)(.*)$/,G=/([A-Z])/g,H={secondary:{},meta:{top:0,right:0,bottom:0,left:0}},O="jQe",d=(document.body||document.documentElement).style,J=d.WebkitTransition!==void 0?"webkitTransitionEnd":
d.OTransition!==void 0?"oTransitionEnd":"transitionend",a=d.WebkitTransition!==void 0||d.MozTransition!==void 0||d.OTransition!==void 0||d.transition!==void 0,c="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix;jQuery.fn.translation=function(){if(!this[0])return null;for(var a=window.getComputedStyle(this[0],null),c={x:0,y:0},d=z.length-1;d>=0;d--){var h=a.getPropertyValue(z[d]+"transform");if(h&&/matrix/i.test(h)){a=h.replace(/^matrix\(/i,"").split(/, |\)$/g);c={x:parseInt(a[4],10),y:parseInt(a[5],
10)};break}}return c};jQuery.fn.animate=function(c,d,l,q){var c=c||{},w=typeof c.bottom=="undefined"&&typeof c.right=="undefined",D=jQuery.speed(d,l,q),G=this,i=0,k=function(){i--;i===0&&typeof D.complete=="function"&&D.complete.apply(G[0],arguments)};if(!a||E(c)||F(c)||D.duration<=0||jQuery.fn.animate.defaults.avoidTransforms===!0&&c.avoidTransforms!==!1)return p.apply(this,arguments);return this[D.queue===!0?"queue":"each"](function(){var a=jQuery(this),d=jQuery.extend({},D),l=function(){for(var d=
{},h=z.length-1;h>=0;h--)d[z[h]+"transition-property"]="none",d[z[h]+"transition-duration"]="",d[z[h]+"transition-timing-function"]="";a.unbind(J);if(!c.leaveTransforms==!0){for(var i=a.data(O)||{},l={},h=z.length-1;h>=0;h--)l[z[h]+"transform"]="";if(w&&typeof i.meta!="undefined")for(var h=0,p;p=t[h];++h)l[p]=i.meta[p+"_o"]+"px";a.css(d).css(l)}c.opacity==="hide"&&a.css("display","none");a.data(O,null);k.call(a)},q={bounce:"cubic-bezier(0.0, 0.35, .5, 1.3)",linear:"linear",swing:"ease-in-out",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",
easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",
easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",
easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)"},r={},q=q[d.easing||"swing"]?q[d.easing||"swing"]:d.easing||"swing",x;for(x in c)if(jQuery.inArray(x,S)===-1){var F=jQuery.inArray(x,t)>-1,G=y(a,c[x],x,F&&c.avoidTransforms!==!0);c.avoidTransforms!==!0&&h(x,G,a)?Q(a,x,d.duration,q,F&&c.avoidTransforms===!0?G+"px":G,F&&c.avoidTransforms!==!0,w,c.useTranslate3d===!0):r[x]=c[x]}x=a.data(O)||{};for(q=z.length-1;q>=0;q--)typeof x[z[q]+"transition-property"]!="undefined"&&(x[z[q]+"transition-property"]=
x[z[q]+"transition-property"].substr(2));a.data(O,x).unbind(J);if(!E(a.data(O))&&!E(a.data(O).secondary)){i++;a.css(a.data(O));var N=a.data(O).secondary;setTimeout(function(){a.bind(J,l).css(N)})}else d.queue=!1;E(r)||(i++,p.apply(a,[r,{duration:d.duration,easing:jQuery.easing[d.easing]?d.easing:jQuery.easing.swing?"swing":"linear",complete:k,queue:d.queue}]));return!0})};jQuery.fn.animate.defaults={};jQuery.fn.stop=function(c,d,h){if(!a)return l.apply(this,[c,d]);c&&this.queue([]);for(var p={},q=
z.length-1;q>=0;q--)p[z[q]+"transition-property"]="none",p[z[q]+"transition-duration"]="",p[z[q]+"transition-timing-function"]="";this.each(function(){var a=jQuery(this),q=window.getComputedStyle(this,null),i={},k;if(!E(a.data(O))&&!E(a.data(O).secondary)){k=a.data(O);if(d){if(i=k.secondary,!h&&typeof k.meta.left_o!==void 0||typeof k.meta.top_o!==void 0){i.left=typeof k.meta.left_o!==void 0?k.meta.left_o:"auto";i.top=typeof k.meta.top_o!==void 0?k.meta.top_o:"auto";for(k=z.length-1;k>=0;k--)i[z[k]+
"transform"]=""}}else for(var o in a.data(O).secondary)if(o=o.replace(G,"-$1").toLowerCase(),i[o]=q.getPropertyValue(o),!h&&/matrix/i.test(i[o])){k=i[o].replace(/^matrix\(/i,"").split(/, |\)$/g);i.left=parseFloat(k[4])+parseFloat(a.css("left"))+"px"||"auto";i.top=parseFloat(k[5])+parseFloat(a.css("top"))+"px"||"auto";for(k=z.length-1;k>=0;k--)i[z[k]+"transform"]=""}a.unbind(J).css(p).css(i).data(O,null)}else l.apply(a,[c,d])});return this}})(jQuery,jQuery.fn.animate,jQuery.fn.stop);(function(d){function p(d){for(var d=d||10,l="";l.length<d;)l+=h.charAt(Math.floor(h.length*Math.random()))||"";return l}function l(d){var h=[];d.out="json";for(var l in d)h.push([l,d[l]].join(":"));return h.join(";")}var h="abcdefghijklmnopqrstuvwxyz0123456789",D={version:"0.6"},E=0;d.extend({ss:function(h,N){function Q(h,l){if(/^(ok|warning)$/.test(h.status)){var p=h.table,t=[],y=q||[];typeof y=="string"&&(y=y.split(","));d.each(p.rows,function(){var h={};d.each(this.c,function(d){h[y[d]||p.cols[d].label||
d]=(this||{}).v});t.push(h)});l(t,[!0])}else l({errors:h.errors||[]},[!1])}var N=d.extend(D,N),y,q,t={setQuery:function(d){y=d;return t},setField:function(d){q=d;return t},send:function(q){var t=E++;do var D="sscallback"+p(20);while(window[D]);window[D]=function(d){d.reqId==t.toString()&&Q(d,q);setTimeout(function(){try{delete window[D]}catch(d){}},1)};N.responseHandler=D;N.reqId=t;d.getScript(h+"&tqx="+l(N)+"&tq="+encodeURIComponent(y||""))}};return t}})})(jQuery);Date.prototype.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.prototype.getMonthName=function(){return this.monthNames[this.getMonth()]};Date.prototype.getShortMonthName=function(){return this.getMonthName().substr(0,3)};var gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.BankOfEnglandMPC=Backbone.View.extend({initialize:function(){this.membersUrl=this.options.membersUrl;this.decisionsUrl=this.options.decisionsUrl;_.bind(this,"render","membersLoaded");this.model=new gui.bankofenglandmpc.Model;var d;d=_.bind(function(d,l){this.membersLoaded(d,l)},this);$.ss(this.membersUrl).send(d)},membersLoaded:function(d,p){if(p){this.model.setMembers((new gui.bankofenglandmpc.MembersCsvParser).parse(d));var l;l=_.bind(function(d,l){this.decisionsLoaded(d,
l)},this);$.ss(this.decisionsUrl).send(l)}},decisionsLoaded:function(d,p){p&&(this.model.setDecisions((new gui.bankofenglandmpc.DecisionsCsvParser(this.model.get("members"))).parse(d)),this.render())},render:function(){this.el.html(_.template($("#template_boempc_baseView").html(),{}));new gui.bankofenglandmpc.HeaderView({el:$("#boempc_header"),model:this.model});new gui.bankofenglandmpc.MembersView({el:$("#boempc_members"),model:this.model});new gui.bankofenglandmpc.ResultsView({el:$("#boempc_results"),
model:this.model});new gui.bankofenglandmpc.GraphView({el:$("#boempc_graph"),model:this.model})}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.GraphView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","showDecision");this.model.bind("change:decision",this.showDecision);this.render()},render:function(){this.el.html(_.template($("#template_boempc_graph").html(),{}));var d=[],p=0;this.model.get("decisions").forEach(function(l){d.push([p,l.get("new_rate")]);p++},this);this.chart=(new gui.bankofenglandmpc.Chart(this.$(".graphPanel")[0],20,20)).plot(d,0,2)},showDecision:function(){var d=this.model.get("decision"),
p=this.model.get("decisions").indexOf(this.model.get("decision"));this.chart.highlight(d,p)}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.HeaderView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","showDecision");this.model.bind("change:decision",this.showDecision);var d=new Date;this.defaultVariables={title:"Bank of England Members",description:"Some description copy about the interactive",month:d.getMonthName(),year:d.getFullYear(),article_url:""};this.render(this.defaultVariables)},render:function(d){d=this.el.html(_.template($("#template_boempc_header").html(),d));d.css({opacity:0});
d.animate({opacity:1},300)},showDecision:function(){var d=this.model.get("decision"),p=d?d.toJSON():this.defaultVariables;if(d)p.title=d.get("result")+" at "+d.get("new_rate")+"%";this.render(p)}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.MembersView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","showMember");this.circles={};this.model.bind("change:member",this.showMember);this.render()},render:function(){this.el.html(_.template($("#template_boempc_members").html(),{}));var d=_.template($("#template_boempc_membername").html());this.model.get("members").forEach(function(p){if(p.id!=0){var l=$(d(p.toJSON()));l.data("member",p);var h=Raphael(_.last(l.find(".memberBullet")),18,18).circle(9,
9,8);h.attr({fill:p.get("colour"),"stroke-width":0});this.circles[p.id]=h;l.appendTo(this.$(".memberlist"))}},this)},events:Modernizr.touch?{'touchstart div[class="memberName"]':"selectMember"}:{'click div[class="memberName"]':"selectMember"},selectMember:function(d){this.model.changeMember($(d.currentTarget).data("member"))},showMember:function(){this.$(".memberdetail").empty();var d=this.model.get("member");if(d.id!=0){var p=$(_.template($("#template_boempc_memberdetail").html(),d.toJSON()));p.css({opacity:0});
p.animate({opacity:1},300);p.appendTo(this.$(".memberdetail"));this.selectedCircle&&this.selectedCircle.attr({"stroke-width":0});this.selectedCircle=this.circles[d.id];this.selectedCircle.attr({"stroke-width":1})}}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.ResultsView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","renderVote","showMember","showHoverMember","selectMember","showDecision","mouseOver","mouseOut");this.circles={};this.model.bind("change:member",this.showMember);this.model.bind("change:hoverMember",this.showHoverMember);this.model.bind("change:decision",this.showDecision);this.render()},render:function(){this.el.html(_.template($("#template_boempc_results").html(),{}));var d=_.template($("#template_boempc_monthtable").html());
this.model.get("decisions").forEach(function(p){var l=p.toJSON();l.change=l.change==0?"-":l.change+"pt";var h=$(d(l));h.data({decision:p});h.find(".resultLabel").addClass("bg"+l.result);this.renderVote(p.get("votes").r,"raise").appendTo(h.find(".raise")[0]);this.renderVote(p.get("votes").h,"hold").appendTo(h.find(".hold")[0]);this.renderVote(p.get("votes").l,"lower").appendTo(h.find(".lower")[0]);h.appendTo(this.$(".months"))},this)},renderVote:function(d,p){var l=$("<ul></ul>");d.forEach(function(d){var d=
d.get("member"),D=$("<li></li>").data({member:d}),E=this.circles[d.id]?this.circles[d.id]:this.circles[d.id]=[],F=Raphael(D[0],20,20),N;switch(p){case "raise":N=F.path("M1 17L10 3L19 17L1 17");break;case "hold":N=F.circle(10,10,9);break;case "lower":N=F.path("M1 3L10 17L19 3L1 3")}N.attr({fill:d.get("colour"),"stroke-width":0});E.push(N);l.append(D)},this);return l},events:Modernizr.touch?{"touchstart .month":"selectMonth","touchstart li":"selectMember"}:{"click .month":"selectMonth","mouseenter .month":"mouseOver",
"mouseleave .month":"mouseOut","click li":"selectMember"},selectMember:function(d){this.model.changeDecision($(d.currentTarget).closest(".month").data("decision"));this.model.changeMember($(d.currentTarget).data("member"));this.model.changeHoverMember($(d.currentTarget).data("member"));d.stopPropagation()},mouseOver:function(d){$(d.currentTarget).closest(".month").prepend('<div class="over"></div>')},mouseOut:function(){this.$(".over").remove()},selectMonth:function(d){this.model.changeDecision($(d.currentTarget).data("decision"))},
showMember:function(){this.model.get("member")!=this.model.get("hoverMember")&&this.$(".callout").remove();var d=this.model.get("member");this.memberArray&&_.each(this.memberArray,function(d){d.attr({"stroke-width":0})});this.memberArray=this.circles[d.id];d.id!=0&&_.each(this.memberArray,function(d){d.attr({"stroke-width":1})})},showHoverMember:function(){this.$(".callout").remove();var d=this.model.get("hoverMember"),p=this.model.get("decision");d&&(new gui.bankofenglandmpc.ResultsToolTip(this.el,
this.currentMonth,d,p)).render()},showDecision:function(){this.$(".callout").remove();var d=this.model,p=d.get("decision"),l=!0;this.currentMonth&&(this.currentMonth.animate({opacity:0.5},300),Modernizr.touch||this.currentMonth.find("li").unbind("mouseenter").unbind("mouseleave"),l=!1);_.each(this.$(".month"),function(h){h=$(h);h.data("decision")==p?(this.currentMonth=h,h.animate({opacity:1},300),Modernizr.touch||h.find("li").mouseenter(function(h){d.changeHoverMember($(h.currentTarget).data("member"))}).mouseleave(function(){d.changeHoverMember(null)})):
l&&h.animate({opacity:0.5},300)},this)}});gui.bankofenglandmpc.ResultsToolTip=function(d,p,l,h){this.container=d;this.target=p;this.member=l;this.decision=h};gui.bankofenglandmpc.ResultsToolTip.prototype={render:function(){var d,p=this.target.position().left>400?"left":"right",l=this.target.position().left+(p=="left"?-130:this.target.width()),h;this.member.id==0?(d={name:"No member information available",extentOfChange:""},h=this.target.height()*0.5):(d=this.decision.get("votes"),d=(d.r.get(this.member.id)||
d.h.get(this.member.id)||d.l.get(this.member.id)).get("extentOfChange"),d=d==0?"voted to hold":d>0?"voted for a raise of "+d+"%":"voted for a lowering of "+d+"%",d={name:this.member.get("name"),extentOfChange:d},_.each(this.target.find("li"),function(d){d=$(d);if(d.data("member")==this.member)h=d.position().top},this));d=_.template($("#template_boempc_callout").html(),d);d=$(d);d.css({opacity:0,top:h,left:l+(p=="left"?-10:10)});d.addClass(p);d.animate({left:l,opacity:1},300);Raphael(d.find(".arrow")[0],
10,18).path(p=="left"?"M10 9L0 0L0 18L10 9":"M0 9L10 0L10 18L0 9").attr({fill:"#666666","stroke-width":0});d.appendTo(this.container)}}})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.Chart=function(d,p,l){this.elem=d;this.$=$(d);this.paddingLeft=p||0;this.paddingRight=l||0;this.width=this.$.width();this.height=this.$.height();this.stepSize=10;this.paper=Raphael(this.elem,this.width,this.height)};gui.bankofenglandmpc.Chart.prototype={plot:function(d,p,l){if(!(d.length<2)){this.data=d;var h=l-p,D=this.height/h;this.stepSize=(this.width-this.paddingLeft-this.paddingRight)/(d.length-1);this.midPointY=h*0.5+p;var E=[],F,N;_.each(d,function(d){F=this.stepSize*
Number(d[0])+this.paddingLeft;N=this.height-(Number(d[1])-p)*D;E.push("L"+F+" "+N);this.paper.path("M"+F+" 0L"+F+" "+this.height).attr({stroke:"#CCCCCC","stroke-width":1,"stroke-dasharray":"- "})},this);E[0]=E[0].replace("L","M");this.paper.path(E.join("")).attr({stroke:"#666666"});this.renderAxis(p,l);return this}},renderAxis:function(d,p){var l=this.paper.text(0,0,this.formatAxisLabel(p.toString())).attr({"text-anchor":"start","font-size":14,fill:"#666666"});l.attr({y:l.getBBox().height*0.5});l=
this.paper.text(0,0,this.formatAxisLabel(d.toString())).attr({"text-anchor":"start","font-size":14,fill:"#666666"});l.attr({y:this.height-l.getBBox().height*0.5})},formatAxisLabel:function(d){return d==0?d.toString():d.toString()+"%"},highlight:function(d,p){if(!this.highlightBox)this.highlightBox=this.paper.rect(0,1,this.paddingLeft*2-2,this.height-2).attr({stroke:"#333333","stroke-width":1,"stroke-dasharray":"- ",x:p*this.stepSize+1,opacity:0}),this.label=this.paper.text(0,0,"0%").attr({"font-size":12,
fill:"#666666",y:20});var l=this;d?(this.highlightBox.animate({x:p*this.stepSize+1,opacity:1},500,"<>").onAnimation(function(){var d=l.data[Math.round(this.attrs.x/l.stepSize)][1];l.label.attr({text:d+"%",x:this.attrs.x+l.paddingLeft,y:d<l.midPointY?l.height*0.3:l.height*0.7})}),this.label.animateWith(this.highlightBox,{opacity:1},500)):(this.highlightBox.animate({opacity:0},500),this.label.animateWith(this.highlightBox,{opacity:0},500))}}})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.Model=Backbone.Model.extend({defaults:{decision:{},decisions:[],member:null,hoverMember:null,members:null},initialize:function(){this.bind("change:member",function(){this.get("member")});this.bind("change:decision",function(){this.get("decision")});this.bind("change:hoverMember",function(){this.get("hoverMember")})},changeMember:function(d){this.set({member:d})},changeHoverMember:function(d){this.set({hoverMember:d})},changeDecision:function(d){this.set({decision:d});
this.set({hoverMember:null})},setMembers:function(d){this.set({members:d})},setDecisions:function(d){this.set({decisions:d})}});gui.bankofenglandmpc.Vote=Backbone.Model.extend({});gui.bankofenglandmpc.Votes=Backbone.Collection.extend({model:gui.bankofenglandmpc.Vote,comparator:function(d){return Number(d.get("member").get("seatID"))-Number(d.get("extentOfChange"))*200}});gui.bankofenglandmpc.Member=Backbone.Model.extend({initialize:function(){this.id=this.attributes.memberID}});gui.bankofenglandmpc.Members=
Backbone.Collection.extend({model:gui.bankofenglandmpc.Member,comparator:function(d){return-Number(d.get("memberID"))+Number(d.get("seatID"))*200}});gui.bankofenglandmpc.Decision=Backbone.Model.extend({});gui.bankofenglandmpc.Decisions=Backbone.Collection.extend({model:gui.bankofenglandmpc.Decision})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};(function(){gui.bankofenglandmpc.MembersCsvParser=function(){};gui.bankofenglandmpc.MembersCsvParser.prototype={parse:function(d){var p=new gui.bankofenglandmpc.Members;_.each(d,function(d){p.add(new gui.bankofenglandmpc.Member(d))});return p}}})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.DecisionsCsvParser=function(d){this.members=d};gui.bankofenglandmpc.DecisionsCsvParser.prototype={parse:function(d){var p=new gui.bankofenglandmpc.Decisions,l,h,D,E,F;_.each(d,function(d){if(_.isNumber(d.change)&&_.isNumber(d.new_rate)){h=d.votes={r:new gui.bankofenglandmpc.Votes,h:new gui.bankofenglandmpc.Votes,l:new gui.bankofenglandmpc.Votes};for(var Q,y=1;y<10;y++)F=d["m_"+y].split(","),F.length!=2&&(F=[0,0]),Q=this.members.get(F[0]),E=F[1]==0?h.h:F[1]>0?h.r:h.l,
D=new gui.bankofenglandmpc.Vote({id:Q.get("memberID")!=0?Q.get("memberID"):y,member:Q,extentOfChange:F[1]}),E.add(D),delete d["m_"+y];l=new gui.bankofenglandmpc.Decision(d);p.add(l);p.length>11&&p.remove(p.at(0))}},this);return p}}})();
