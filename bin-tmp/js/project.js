(function(){function d(){if(d.is(arguments[0],r)){for(var b=arguments[0],e=sa[F](d,b.splice(0,3+d.is(b[0],u))),g=e.set(),m=0,v=b[s];m<v;m++){var f=b[m]||{};P[q](f.type)&&g[N](e[f.type]().attr(f))}return g}return sa[F](d,arguments)}function l(){for(var b=[],e=0;e<32;e++)b[e]=(~~(w.random()*16))[E](16);b[12]=4;b[16]=(b[16]&3|8)[E](16);return"r-"+b[y]("")}function o(b,e,g){function m(){var v=Array[B].slice.call(arguments,0),f=v[y]("\u25ba"),a=m.cache=m.cache||{},c=m.count=m.count||[];if(a[q](f))return g?
g(a[f]):a[f];c[s]>=1E3&&delete a[c.shift()];c[N](f);a[f]=b[F](e,v);return g?g(a[f]):a[f]}return m}function i(){return this.x+I+this.y}function C(b){return function(e,g,m,v){var f={back:b};d.is(m,"function")?v=m:f.rot=m;e&&e.constructor==O&&(e=e.attrs.path);e&&(f.along=e);return this.animate(f,g,v)}}function z(b,e,g,m,v,f){function a(b,e){var g,f,m,v;m=b;for(f=0;f<8;f++){v=((n*m+d)*m+c)*m-b;if(h(v)<e)return m;g=(3*n*m+2*d)*m+c;if(h(g)<1.0E-6)break;m-=v/g}g=0;f=1;m=b;if(m<g)return g;if(m>f)return f;
for(;g<f;){v=((n*m+d)*m+c)*m;if(h(v-b)<e)break;b>v?g=m:f=m;m=(f-g)/2+g}return m}var c=3*e,d=3*(m-e)-c,n=1-c-d,j=3*g,k=3*(v-g)-j,p=1-j-k;return function(b,e){var g=a(b,e);return((p*g+k)*g+j)*g}(b,1/(200*f))}d.version="1.5.2";var D=/[, ]+/,P={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},Q=/\{(\d+)\}/g,B="prototype",q="hasOwnProperty",x=document,t=window,S={was:Object[B][q].call(t,"Raphael"),is:t.Raphael},R=function(){this.customAttributes={}},J,F="apply",G="createTouch"in x,I=" ",a=String,c="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend".split(I),
k={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},y="join",s="length",M=a[B].toLowerCase,w=Math,K=w.max,T=w.min,h=w.abs,j=w.pow,p=w.PI,u="number",r="array",E="toString",ab=Object[B][E],N="push",Ea=/^url\(['"]?([^\)]+?)['"]?\)$/i,bb=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
cb={NaN:1,Infinity:1,"-Infinity":1},db=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,U=w.round,H=parseFloat,aa=parseInt,ia=a[B].toUpperCase,ja={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt",
"stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},ta={along:"along",blur:u,"clip-rect":"csv",cx:u,cy:u,fill:"colour","fill-opacity":u,"font-size":u,height:u,opacity:u,path:"path",r:u,rotation:"csv",rx:u,ry:u,scale:"csv",stroke:"colour","stroke-opacity":u,"stroke-width":u,translation:"csv",width:u,x:u,y:u},eb=/^(from|to|\d+%?)$/,ua=/\s*,\s*/,fb={hs:1,rg:1},gb=/,?([achlmqrstvxz]),?/gi,
hb=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,ib=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,Fa=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,jb=function(b,e){return b.key-e.key};d.type=t.SVGAngle||x.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(d.type=="VML"){var X=x.createElement("div");X.innerHTML='<v:shape adj="1"/>';X=X.firstChild;X.style.behavior="url(#default#VML)";if(!(X&&typeof X.adj=="object"))return d.type=null;X=null}d.svg=
!(d.vml=d.type=="VML");R[B]=d[B];J=R[B];d._id=0;d._oid=0;d.fn={};d.is=function(b,e){e=M.call(e);if(e=="finite")return!cb[q](+b);return e=="null"&&b===null||e==typeof b||e=="object"&&b===Object(b)||e=="array"&&Array.isArray&&Array.isArray(b)||ab.call(b).slice(8,-1).toLowerCase()==e};d.angle=function(b,e,g,m,v,f){if(v==null){b-=g;e-=m;if(!b&&!e)return 0;return((b<0)*180+w.atan(-e/-b)*180/p+360)%360}return d.angle(b,e,v,f)-d.angle(g,m,v,f)};d.rad=function(b){return b%360*p/180};d.deg=function(b){return b*
180/p%360};d.snapTo=function(b,e,g){g=d.is(g,"finite")?g:10;if(d.is(b,r))for(var m=b.length;m--;){if(h(b[m]-e)<=g)return b[m]}else{b=+b;m=e%b;if(m<g)return e-m;if(m>b-g)return e-m+b}return e};d.setWindow=function(b){t=b;x=t.document};var ka=function(b){if(d.vml){var e=/^\s+|\s+$/g,g;try{var m=new ActiveXObject("htmlfile");m.write("<body>");m.close();g=m.body}catch(v){g=createPopup().document.body}var f=g.createTextRange();ka=o(function(b){try{g.style.color=a(b).replace(e,"");var m=f.queryCommandValue("ForeColor");
return"#"+("000000"+((m&255)<<16|m&65280|(m&16711680)>>>16)[E](16)).slice(-6)}catch(v){return"none"}})}else{var c=x.createElement("i");c.title="Rapha\u00ebl Colour Picker";c.style.display="none";x.body.appendChild(c);ka=o(function(b){c.style.color=b;return x.defaultView.getComputedStyle(c,"").getPropertyValue("color")})}return ka(b)},Ga=function(){return"hsb("+[this.h,this.s,this.b]+")"},kb=function(){return"hsl("+[this.h,this.s,this.l]+")"},lb=function(){return this.hex};d.hsb2rgb=function(b,e,g,
m){if(d.is(b,"object")&&"h"in b&&"s"in b&&"b"in b)g=b.b,e=b.s,b=b.h,m=b.o;return d.hsl2rgb(b,e,g/2,m)};d.hsl2rgb=function(b,e,g,m){if(d.is(b,"object")&&"h"in b&&"s"in b&&"l"in b)g=b.l,e=b.s,b=b.h;if(b>1||e>1||g>1)b/=360,e/=100,g/=100;var v={},f=["r","g","b"],a;if(e){g<0.5?a=g*(1+e):a=g+e-g*e;for(var e=2*g-a,c=0;c<3;c++)g=b+1/3*-(c-1),g<0&&g++,g>1&&g--,g*6<1?v[f[c]]=e+(a-e)*6*g:g*2<1?v[f[c]]=a:g*3<2?v[f[c]]=e+(a-e)*(2/3-g)*6:v[f[c]]=e}else v={r:g,g:g,b:g};v.r*=255;v.g*=255;v.b*=255;v.hex="#"+(16777216|
v.b|v.g<<8|v.r<<16).toString(16).slice(1);d.is(m,"finite")&&(v.opacity=m);v.toString=lb;return v};d.rgb2hsb=function(b,e,g){if(e==null&&d.is(b,"object")&&"r"in b&&"g"in b&&"b"in b)g=b.b,e=b.g,b=b.r;if(e==null&&d.is(b,"string"))g=d.getRGB(b),b=g.r,e=g.g,g=g.b;if(b>1||e>1||g>1)b/=255,e/=255,g/=255;var m=K(b,e,g),v=T(b,e,g),f;if(v==m)return{h:0,s:0,b:m,toString:Ga};v=m-v;b==m?f=(e-g)/v:e==m?f=2+(g-b)/v:f=4+(b-e)/v;f/=6;f<0&&f++;f>1&&f--;return{h:f,s:v/m,b:m,toString:Ga}};d.rgb2hsl=function(b,e,g){if(e==
null&&d.is(b,"object")&&"r"in b&&"g"in b&&"b"in b)g=b.b,e=b.g,b=b.r;if(e==null&&d.is(b,"string"))g=d.getRGB(b),b=g.r,e=g.g,g=g.b;if(b>1||e>1||g>1)b/=255,e/=255,g/=255;var m=K(b,e,g),v=T(b,e,g),f,a=(m+v)/2;if(v==m)b={h:0,s:0,l:a};else{var c=m-v;b==m?f=(e-g)/c:e==m?f=2+(g-b)/c:f=4+(b-e)/c;f/=6;f<0&&f++;f>1&&f--;b={h:f,s:a<0.5?c/(m+v):c/(2-m-v),l:a}}b.toString=kb;return b};d._path2string=function(){return this.join(",").replace(gb,"$1")};d.getRGB=o(function(b){if(!b||(b=a(b)).indexOf("-")+1)return{r:-1,
g:-1,b:-1,hex:"none",error:1};if(b=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(fb[q](b.toLowerCase().substring(0,2))||b.charAt()=="#")&&(b=ka(b));var e,g,m,v,f;if(b=b.match(bb)){b[2]&&(m=aa(b[2].substring(5),16),g=aa(b[2].substring(3,5),16),e=aa(b[2].substring(1,3),16));b[3]&&(m=aa((f=b[3].charAt(3))+f,16),g=aa((f=b[3].charAt(2))+f,16),e=aa((f=b[3].charAt(1))+f,16));b[4]&&(f=b[4].split(ua),e=H(f[0]),f[0].slice(-1)=="%"&&(e*=2.55),g=H(f[1]),f[1].slice(-1)=="%"&&(g*=2.55),m=H(f[2]),f[2].slice(-1)==
"%"&&(m*=2.55),b[1].toLowerCase().slice(0,4)=="rgba"&&(v=H(f[3])),f[3]&&f[3].slice(-1)=="%"&&(v/=100));if(b[5])return f=b[5].split(ua),e=H(f[0]),f[0].slice(-1)=="%"&&(e*=2.55),g=H(f[1]),f[1].slice(-1)=="%"&&(g*=2.55),m=H(f[2]),f[2].slice(-1)=="%"&&(m*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="\u00b0")&&(e/=360),b[1].toLowerCase().slice(0,4)=="hsba"&&(v=H(f[3])),f[3]&&f[3].slice(-1)=="%"&&(v/=100),d.hsb2rgb(e,g,m,v);if(b[6])return f=b[6].split(ua),e=H(f[0]),f[0].slice(-1)=="%"&&(e*=2.55),g=H(f[1]),
f[1].slice(-1)=="%"&&(g*=2.55),m=H(f[2]),f[2].slice(-1)=="%"&&(m*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="\u00b0")&&(e/=360),b[1].toLowerCase().slice(0,4)=="hsla"&&(v=H(f[3])),f[3]&&f[3].slice(-1)=="%"&&(v/=100),d.hsl2rgb(e,g,m,v);b={r:e,g:g,b:m};b.hex="#"+(16777216|m|g<<8|e<<16).toString(16).slice(1);d.is(v,"finite")&&(b.opacity=v);return b}return{r:-1,g:-1,b:-1,hex:"none",error:1}},d);d.getColor=function(b){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:b||0.75},e=this.hsb2rgb(b.h,
b.s,b.b);b.h+=0.075;if(b.h>1)b.h=0,b.s-=0.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b});return e.hex};d.getColor.reset=function(){delete this.start};d.parsePathString=o(function(b){if(!b)return null;var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},g=[];d.is(b,r)&&d.is(b[0],r)&&(g=la(b));g[s]||a(b).replace(hb,function(b,v,f){var a=[],b=M.call(v);f.replace(ib,function(b,e){e&&a[N](+e)});b=="m"&&a[s]>2&&(g[N]([v].concat(a.splice(0,2))),b="l",v=v=="m"?"l":"L");for(;a[s]>=e[b];)if(g[N]([v].concat(a.splice(0,
e[b]))),!e[b])break});g[E]=d._path2string;return g});d.findDotsAtSegment=function(b,e,g,m,v,f,a,c,h){var d=1-h,k=j(d,3)*b+j(d,2)*3*h*g+d*3*h*h*v+j(h,3)*a,d=j(d,3)*e+j(d,2)*3*h*m+d*3*h*h*f+j(h,3)*c,u=b+2*h*(g-b)+h*h*(v-2*g+b),s=e+2*h*(m-e)+h*h*(f-2*m+e),y=g+2*h*(v-g)+h*h*(a-2*v+g),l=m+2*h*(f-m)+h*h*(c-2*f+m),b=(1-h)*b+h*g,e=(1-h)*e+h*m,v=(1-h)*v+h*a,f=(1-h)*f+h*c,c=90-w.atan((u-y)/(s-l))*180/p;(u>y||s<l)&&(c+=180);return{x:k,y:d,m:{x:u,y:s},n:{x:y,y:l},start:{x:b,y:e},end:{x:v,y:f},alpha:c}};var na=
o(function(b){if(!b)return{x:0,y:0,width:0,height:0};for(var b=ma(b),e=0,g=0,m=[],v=[],f,a=0,c=b[s];a<c;a++)f=b[a],f[0]=="M"?(e=f[1],g=f[2],m[N](e),v[N](g)):(e=mb(e,g,f[1],f[2],f[3],f[4],f[5],f[6]),m=m.concat(e.min.x,e.max.x),v=v.concat(e.min.y,e.max.y),e=f[5],g=f[6]);b=T[F](0,m);f=T[F](0,v);return{x:b,y:f,width:K[F](0,m)-b,height:K[F](0,v)-f}}),la=function(b){var e=[];if(!d.is(b,r)||!d.is(b&&b[0],r))b=d.parsePathString(b);for(var g=0,m=b[s];g<m;g++){e[g]=[];for(var v=0,f=b[g][s];v<f;v++)e[g][v]=
b[g][v]}e[E]=d._path2string;return e},va=o(function(b){if(!d.is(b,r)||!d.is(b&&b[0],r))b=d.parsePathString(b);var e=[],g=0,m=0,v=0,f=0,a=0;b[0][0]=="M"&&(g=b[0][1],m=b[0][2],v=g,f=m,a++,e[N](["M",g,m]));for(var c=b[s];a<c;a++){var h=e[a]=[],n=b[a];if(n[0]!=M.call(n[0]))switch(h[0]=M.call(n[0]),h[0]){case "a":h[1]=n[1];h[2]=n[2];h[3]=n[3];h[4]=n[4];h[5]=n[5];h[6]=+(n[6]-g).toFixed(3);h[7]=+(n[7]-m).toFixed(3);break;case "v":h[1]=+(n[1]-m).toFixed(3);break;case "m":v=n[1],f=n[2];default:for(var j=1,
k=n[s];j<k;j++)h[j]=+(n[j]-(j%2?g:m)).toFixed(3)}else{e[a]=[];n[0]=="m"&&(v=n[1]+g,f=n[2]+m);h=0;for(j=n[s];h<j;h++)e[a][h]=n[h]}n=e[a][s];switch(e[a][0]){case "z":g=v;m=f;break;case "h":g+=+e[a][n-1];break;case "v":m+=+e[a][n-1];break;default:g+=+e[a][n-2],m+=+e[a][n-1]}}e[E]=d._path2string;return e},0,la),ea=o(function(b){if(!d.is(b,r)||!d.is(b&&b[0],r))b=d.parsePathString(b);var e=[],g=0,m=0,v=0,f=0,a=0;b[0][0]=="M"&&(g=+b[0][1],m=+b[0][2],v=g,f=m,a++,e[0]=["M",g,m]);for(var c=b[s];a<c;a++){var h=
e[a]=[],n=b[a];if(n[0]!=ia.call(n[0]))switch(h[0]=ia.call(n[0]),h[0]){case "A":h[1]=n[1];h[2]=n[2];h[3]=n[3];h[4]=n[4];h[5]=n[5];h[6]=+(n[6]+g);h[7]=+(n[7]+m);break;case "V":h[1]=+n[1]+m;break;case "H":h[1]=+n[1]+g;break;case "M":v=+n[1]+g,f=+n[2]+m;default:for(var j=1,k=n[s];j<k;j++)h[j]=+n[j]+(j%2?g:m)}else{j=0;for(k=n[s];j<k;j++)e[a][j]=n[j]}switch(h[0]){case "Z":g=v;m=f;break;case "H":g=h[1];break;case "V":m=h[1];break;case "M":v=e[a][e[a][s]-2],f=e[a][e[a][s]-1];default:g=e[a][e[a][s]-2],m=e[a][e[a][s]-
1]}}e[E]=d._path2string;return e},null,la),Ha=function(b,e,g,m,a,f){var h=1/3,c=2/3;return[h*b+c*g,h*e+c*m,h*a+c*g,h*f+c*m,a,f]},Ia=function(b,e,g,m,a,f,c,d,j,n){var k=p*120/180,u=p/180*(+a||0),l=[],i,r=o(function(b,e,g){var f=b*w.cos(g)-e*w.sin(g),b=b*w.sin(g)+e*w.cos(g);return{x:f,y:b}});if(n)q=n[0],i=n[1],f=n[2],E=n[3];else{i=r(b,e,-u);b=i.x;e=i.y;i=r(d,j,-u);d=i.x;j=i.y;w.cos(p/180*a);w.sin(p/180*a);i=(b-d)/2;q=(e-j)/2;E=i*i/(g*g)+q*q/(m*m);E>1&&(E=w.sqrt(E),g*=E,m*=E);var E=g*g,da=m*m,E=(f==
c?-1:1)*w.sqrt(h((E*da-E*q*q-da*i*i)/(E*q*q+da*i*i))),f=E*g*q/m+(b+d)/2,E=E*-m*i/g+(e+j)/2,q=w.asin(((e-E)/m).toFixed(9));i=w.asin(((j-E)/m).toFixed(9));q=b<f?p-q:q;i=d<f?p-i:i;q<0&&(q=p*2+q);i<0&&(i=p*2+i);c&&q>i&&(q-=p*2);!c&&i>q&&(i-=p*2)}if(h(i-q)>k){var l=i,da=d,K=j;i=q+k*(c&&i>q?1:-1);d=f+g*w.cos(i);j=E+m*w.sin(i);l=Ia(d,j,g,m,a,0,c,da,K,[i,l,f,E])}f=i-q;a=w.cos(q);k=w.sin(q);c=w.cos(i);i=w.sin(i);f=w.tan(f/4);g=4/3*g*f;f*=4/3*m;m=[b,e];b=[b+g*k,e-f*a];e=[d+g*i,j-f*c];d=[d,j];b[0]=2*m[0]-b[0];
b[1]=2*m[1]-b[1];if(n)return[b,e,d].concat(l);l=[b,e,d].concat(l)[y]().split(",");n=[];d=0;for(j=l[s];d<j;d++)n[d]=d%2?r(l[d-1],l[d],u).y:r(l[d],l[d+1],u).x;return n},oa=function(b,e,g,m,a,f,c,h,d){var n=1-d;return{x:j(n,3)*b+j(n,2)*3*d*g+n*3*d*d*a+j(d,3)*c,y:j(n,3)*e+j(n,2)*3*d*m+n*3*d*d*f+j(d,3)*h}},mb=o(function(b,e,g,m,a,f,c,d){var j=a-2*g+b-(c-2*a+g),n=2*(g-b)-2*(a-g),k=b-g,p=(-n+w.sqrt(n*n-4*j*k))/2/j,j=(-n-w.sqrt(n*n-4*j*k))/2/j,u=[e,d],i=[b,c];h(p)>"1e12"&&(p=0.5);h(j)>"1e12"&&(j=0.5);p>0&&
p<1&&(p=oa(b,e,g,m,a,f,c,d,p),i[N](p.x),u[N](p.y));j>0&&j<1&&(p=oa(b,e,g,m,a,f,c,d,j),i[N](p.x),u[N](p.y));j=f-2*m+e-(d-2*f+m);n=2*(m-e)-2*(f-m);k=e-m;p=(-n+w.sqrt(n*n-4*j*k))/2/j;j=(-n-w.sqrt(n*n-4*j*k))/2/j;h(p)>"1e12"&&(p=0.5);h(j)>"1e12"&&(j=0.5);p>0&&p<1&&(p=oa(b,e,g,m,a,f,c,d,p),i[N](p.x),u[N](p.y));j>0&&j<1&&(p=oa(b,e,g,m,a,f,c,d,j),i[N](p.x),u[N](p.y));return{min:{x:T[F](0,i),y:T[F](0,u)},max:{x:K[F](0,i),y:K[F](0,u)}}}),ma=o(function(b,e){var g=ea(b),m=e&&ea(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,
qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=function(b,e){var g,f;if(!b)return["C",e.x,e.y,e.x,e.y,e.x,e.y];!(b[0]in{T:1,Q:1})&&(e.qx=e.qy=null);switch(b[0]){case "M":e.X=b[1];e.Y=b[2];break;case "A":b=["C"].concat(Ia[F](0,[e.x,e.y].concat(b.slice(1))));break;case "S":g=e.x+(e.x-(e.bx||e.x));f=e.y+(e.y-(e.by||e.y));b=["C",g,f].concat(b.slice(1));break;case "T":e.qx=e.x+(e.x-(e.qx||e.x));e.qy=e.y+(e.y-(e.qy||e.y));b=["C"].concat(Ha(e.x,e.y,e.qx,e.qy,b[1],b[2]));break;case "Q":e.qx=
b[1];e.qy=b[2];b=["C"].concat(Ha(e.x,e.y,b[1],b[2],b[3],b[4]));break;case "L":b=["C"].concat([e.x,e.y,b[1],b[2],b[1],b[2]]);break;case "H":b=["C"].concat([e.x,e.y,b[1],e.y,b[1],e.y]);break;case "V":b=["C"].concat([e.x,e.y,e.x,b[1],e.x,b[1]]);break;case "Z":b=["C"].concat([e.x,e.y,e.X,e.Y,e.X,e.Y])}return b},h=function(b,e){if(b[e][s]>7){b[e].shift();for(var f=b[e];f[s];)b.splice(e++,0,["C"].concat(f.splice(0,6)));b.splice(e,1);k=K(g[s],m&&m[s]||0)}},d=function(b,e,f,a,c){if(b&&e&&b[c][0]=="M"&&e[c][0]!=
"M")e.splice(c,0,["M",a.x,a.y]),f.bx=0,f.by=0,f.x=b[c][1],f.y=b[c][2],k=K(g[s],m&&m[s]||0)},j=0,k=K(g[s],m&&m[s]||0);for(;j<k;j++){g[j]=c(g[j],a);h(g,j);m&&(m[j]=c(m[j],f));m&&h(m,j);d(g,m,a,f,j);d(m,g,f,a,j);var p=g[j],u=m&&m[j],i=p[s],l=m&&u[s];a.x=p[i-2];a.y=p[i-1];a.bx=H(p[i-4])||a.x;a.by=H(p[i-3])||a.y;f.bx=m&&(H(u[l-4])||f.x);f.by=m&&(H(u[l-3])||f.y);f.x=m&&u[l-2];f.y=m&&u[l-1]}return m?[g,m]:g},null,la),Ja=o(function(b){for(var e=[],g=0,m=b[s];g<m;g++){var a={},f=b[g].match(/^([^:]*):?([\d\.]*)/);
a.color=d.getRGB(f[1]);if(a.color.error)return null;a.color=a.color.hex;f[2]&&(a.offset=f[2]+"%");e[N](a)}g=1;for(m=e[s]-1;g<m;g++)if(!e[g].offset){b=H(e[g-1].offset||0);f=0;for(a=g+1;a<m;a++)if(e[a].offset){f=e[a].offset;break}f||(f=100,a=m);f=H(f);for(f=(f-b)/(a-g+1);g<a;g++)b+=f,e[g].offset=b+"%"}return e}),Ka=function(b,e,g,m){if(d.is(b,"string")||d.is(b,"object")){if(b=d.is(b,"string")?x.getElementById(b):b,b.tagName)return e==null?{container:b,width:b.style.pixelWidth||b.offsetWidth,height:b.style.pixelHeight||
b.offsetHeight}:{container:b,width:e,height:g}}else return{container:1,x:b,y:e,width:g,height:m}},wa=function(b,e){var g=this,m;for(m in e)if(e[q](m)&&!(m in b))switch(typeof e[m]){case "function":(function(e){b[m]=b===g?e:function(){return e[F](g,arguments)}})(e[m]);break;case "object":b[m]=b[m]||{};wa.call(this,b[m],e[m]);break;default:b[m]=e[m]}},ca=function(b,e){b==e.top&&(e.top=b.prev);b==e.bottom&&(e.bottom=b.next);b.next&&(b.next.prev=b.prev);b.prev&&(b.prev.next=b.next)},La=function(b,e){if(e.top!==
b)ca(b,e),b.next=null,b.prev=e.top,e.top.next=b,e.top=b},Ma=function(b,e){if(e.bottom!==b)ca(b,e),b.next=e.bottom,b.prev=null,e.bottom.prev=b,e.bottom=b},Na=function(b,e,g){ca(b,g);e==g.top&&(g.top=b);e.next&&(e.next.prev=b);b.next=e.next;b.prev=e;e.next=b},Oa=function(b,e,g){ca(b,g);e==g.bottom&&(g.bottom=b);e.prev&&(e.prev.next=b);b.prev=e.prev;e.prev=b;b.next=e},Pa=function(b){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+b+"\u201d of removed object");}};d.pathToRelative=
va;if(d.svg){J.svgns="http://www.w3.org/2000/svg";J.xlink="http://www.w3.org/1999/xlink";var U=function(b){return+b+(~~b===b)*0.5},A=function(b,e){if(e)for(var g in e)e[q](g)&&b.setAttribute(g,a(e[g]));else return b=x.createElementNS(J.svgns,b),b.style.webkitTapHighlightColor="rgba(0,0,0,0)",b};d[E]=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var Qa=function(b,e){var g=A("path");e.canvas&&e.canvas.appendChild(g);g=new O(g,e);g.type="path";ba(g,{fill:"none",
stroke:"#000",path:b});return g},fa=function(b,e,g){var m="linear",c=0.5,f=0.5,d=b.style,e=a(e).replace(Fa,function(b,e,g){m="radial";e&&g&&(c=H(e),f=H(g),b=(f>0.5)*2-1,j(c-0.5,2)+j(f-0.5,2)>0.25&&(f=w.sqrt(0.25-j(c-0.5,2))*b+0.5)&&f!=0.5&&(f=f.toFixed(5)-1.0E-5*b));return""}),e=e.split(/\s*\-\s*/);if(m=="linear"){var k=e.shift(),k=-H(k);if(isNaN(k))return null;var k=[0,0,w.cos(k*p/180),w.sin(k*p/180)],u=1/(K(h(k[2]),h(k[3]))||1);k[2]*=u;k[3]*=u;k[2]<0&&(k[0]=-k[2],k[2]=0);k[3]<0&&(k[1]=-k[3],k[3]=
0)}e=Ja(e);if(!e)return null;u=b.getAttribute("fill");(u=u.match(/^url\(#(.*)\)$/))&&g.defs.removeChild(x.getElementById(u[1]));u=A(m+"Gradient");u.id=l();A(u,m=="radial"?{fx:c,fy:f}:{x1:k[0],y1:k[1],x2:k[2],y2:k[3]});g.defs.appendChild(u);g=0;for(k=e[s];g<k;g++){var n=A("stop");A(n,{offset:e[g].offset?e[g].offset:g?"100%":"0%","stop-color":e[g].color||"#fff"});u.appendChild(n)}A(b,{fill:"url(#"+u.id+")",opacity:1,"fill-opacity":1});d.fill="";d.opacity=1;return d.fillOpacity=1},xa=function(b){var e=
b.getBBox();A(b.pattern,{patternTransform:d.format("translate({0},{1})",e.x,e.y)})},ba=function(b,e){var g={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},m=b.node,c=b.attrs,f=b.rotate(),h=function(b,f){if(f=g[M.call(f)]){for(var a=b.attrs["stroke-width"]||"1",c={round:a,square:a,butt:0}[b.attrs["stroke-linecap"]||e["stroke-linecap"]]||0,h=[],d=f[s];d--;)h[d]=f[d]*a+(d%2?1:-1)*c;A(m,{"stroke-dasharray":h[y](",")})}};
e[q]("rotation")&&(f=e.rotation);var j=a(f).split(D);j.length-1?(j[1]=+j[1],j[2]=+j[2]):j=null;H(f)&&b.rotate(0,!0);for(var k in e)if(e[q](k)&&ja[q](k)){var n=e[k];c[k]=n;switch(k){case "blur":b.blur(n);break;case "rotation":b.rotate(n,!0);break;case "href":case "title":case "target":var p=m.parentNode;if(M.call(p.tagName)!="a"){var u=A("a");p.insertBefore(u,m);u.appendChild(m);p=u}k=="target"&&n=="blank"?p.setAttributeNS(b.paper.xlink,"show","new"):p.setAttributeNS(b.paper.xlink,k,n);break;case "cursor":m.style.cursor=
n;break;case "clip-rect":p=a(n).split(D);if(p[s]==4){b.clip&&b.clip.parentNode.parentNode.removeChild(b.clip.parentNode);var i=A("clipPath"),u=A("rect");i.id=l();A(u,{x:p[0],y:p[1],width:p[2],height:p[3]});i.appendChild(u);b.paper.defs.appendChild(i);A(m,{"clip-path":"url(#"+i.id+")"});b.clip=u}n||((n=x.getElementById(m.getAttribute("clip-path").replace(/(^url\(#|\)$)/g,"")))&&n.parentNode.removeChild(n),A(m,{"clip-path":""}),delete b.clip);break;case "path":b.type=="path"&&A(m,{d:n?c.path=ea(n):
"M0,0"});break;case "width":if(m.setAttribute(k,n),c.fx)k="x",n=c.x;else break;case "x":c.fx&&(n=-c.x-(c.width||0));case "rx":if(k=="rx"&&b.type=="rect")break;case "cx":j&&(k=="x"||k=="cx")&&(j[1]+=n-c[k]);m.setAttribute(k,n);b.pattern&&xa(b);break;case "height":if(m.setAttribute(k,n),c.fy)k="y",n=c.y;else break;case "y":c.fy&&(n=-c.y-(c.height||0));case "ry":if(k=="ry"&&b.type=="rect")break;case "cy":j&&(k=="y"||k=="cy")&&(j[2]+=n-c[k]);m.setAttribute(k,n);b.pattern&&xa(b);break;case "r":b.type==
"rect"?A(m,{rx:n,ry:n}):m.setAttribute(k,n);break;case "src":b.type=="image"&&m.setAttributeNS(b.paper.xlink,"href",n);break;case "stroke-width":m.style.strokeWidth=n;m.setAttribute(k,n);c["stroke-dasharray"]&&h(b,c["stroke-dasharray"]);break;case "stroke-dasharray":h(b,n);break;case "translation":n=a(n).split(D);n[0]=+n[0]||0;n[1]=+n[1]||0;j&&(j[1]+=n[0],j[2]+=n[1]);pa.call(b,n[0],n[1]);break;case "scale":n=a(n).split(D);b.scale(+n[0]||1,+n[1]||+n[0]||1,isNaN(H(n[2]))?null:+n[2],isNaN(H(n[3]))?null:
+n[3]);break;case "fill":if(p=a(n).match(Ea)){var i=A("pattern"),r=A("image");i.id=l();A(i,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});A(r,{x:0,y:0});r.setAttributeNS(b.paper.xlink,"href",p[1]);i.appendChild(r);n=x.createElement("img");n.style.cssText="position:absolute;left:-9999em;top-9999em";n.onload=function(){A(i,{width:this.offsetWidth,height:this.offsetHeight});A(r,{width:this.offsetWidth,height:this.offsetHeight});x.body.removeChild(this);b.paper.safari()};x.body.appendChild(n);
n.src=p[1];b.paper.defs.appendChild(i);m.style.fill="url(#"+i.id+")";A(m,{fill:"url(#"+i.id+")"});b.pattern=i;b.pattern&&xa(b);break}p=d.getRGB(n);if(p.error)if(({circle:1,ellipse:1}[q](b.type)||a(n).charAt()!="r")&&fa(m,n,b.paper)){c.gradient=n;c.fill="none";break}else delete e.gradient,delete c.gradient,!d.is(c.opacity,"undefined")&&d.is(e.opacity,"undefined")&&A(m,{opacity:c.opacity}),!d.is(c["fill-opacity"],"undefined")&&d.is(e["fill-opacity"],"undefined")&&A(m,{"fill-opacity":c["fill-opacity"]});
p[q]("opacity")&&A(m,{"fill-opacity":p.opacity>1?p.opacity/100:p.opacity});case "stroke":p=d.getRGB(n);m.setAttribute(k,p.hex);k=="stroke"&&p[q]("opacity")&&A(m,{"stroke-opacity":p.opacity>1?p.opacity/100:p.opacity});break;case "gradient":(({circle:1,ellipse:1})[q](b.type)||a(n).charAt()!="r")&&fa(m,n,b.paper);break;case "opacity":c.gradient&&!c[q]("stroke-opacity")&&A(m,{"stroke-opacity":n>1?n/100:n});case "fill-opacity":if(c.gradient){if(p=x.getElementById(m.getAttribute("fill").replace(/^url\(#|\)$/g,
"")))p=p.getElementsByTagName("stop"),p[p[s]-1].setAttribute("stop-opacity",n);break}default:k=="font-size"&&(n=aa(n,10)+"px"),p=k.replace(/(\-.)/g,function(b){return ia.call(b.substring(1))}),m.style[p]=n,m.setAttribute(k,n)}}nb(b,e);j?b.rotate(j.join(I)):H(f)&&b.rotate(f,!0)},nb=function(b,e){if(!(b.type!="text"||!e[q]("text")&&!e[q]("font")&&!e[q]("font-size")&&!e[q]("x")&&!e[q]("y"))){var g=b.attrs,m=b.node,c=m.firstChild?aa(x.defaultView.getComputedStyle(m.firstChild,"").getPropertyValue("font-size"),
10):10;if(e[q]("text")){for(g.text=e.text;m.firstChild;)m.removeChild(m.firstChild);for(var f=a(e.text).split("\n"),h=0,j=f[s];h<j;h++)if(f[h]){var k=A("tspan");h&&A(k,{dy:c*1.2,x:g.x});k.appendChild(x.createTextNode(f[h]));m.appendChild(k)}}else{f=m.getElementsByTagName("tspan");h=0;for(j=f[s];h<j;h++)h&&A(f[h],{dy:c*1.2,x:g.x})}A(m,{y:g.y});c=b.getBBox();(c=g.y-(c.y+c.height/2))&&d.is(c,"finite")&&A(m,{y:g.y+c})}},O=function(b,e){this[0]=b;this.id=d._oid++;this.node=b;b.raphael=this;this.paper=
e;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!e.bottom&&(e.bottom=this);(this.prev=e.top)&&(e.top.next=this);e.top=this;this.next=null},L=O[B];O[B].rotate=function(b,e,g){if(this.removed)return this;if(b==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][y](I);return this._.rt.deg}var m=this.getBBox(),b=a(b).split(D);b[s]-1&&(e=H(b[1]),g=H(b[2]));b=H(b[0]);e!=null&&e!==!1?this._.rt.deg=b:this._.rt.deg+=b;g==null&&(e=null);
this._.rt.cx=e;this._.rt.cy=g;e=e==null?m.x+m.width/2:e;g=g==null?m.y+m.height/2:g;this._.rt.deg?(this.transformations[0]=d.format("rotate({0} {1} {2})",this._.rt.deg,e,g),this.clip&&A(this.clip,{transform:d.format("rotate({0} {1} {2})",-this._.rt.deg,e,g)})):(this.transformations[0]="",this.clip&&A(this.clip,{transform:""}));A(this.node,{transform:this.transformations[y](I)});return this};O[B].hide=function(){!this.removed&&(this.node.style.display="none");return this};O[B].show=function(){!this.removed&&
(this.node.style.display="");return this};O[B].remove=function(){if(!this.removed){ca(this,this.paper);this.node.parentNode.removeChild(this.node);for(var b in this)delete this[b];this.removed=!0}};O[B].getBBox=function(){if(this.removed)return this;if(this.type=="path")return na(this.attrs.path);if(this.node.style.display=="none"){this.show();var b=!0}var e={};try{e=this.node.getBBox()}catch(g){}finally{e=e||{}}if(this.type=="text")for(var e={x:e.x,y:Infinity,width:0,height:0},m=0,a=this.node.getNumberOfChars();m<
a;m++){var f=this.node.getExtentOfChar(m);f.y<e.y&&(e.y=f.y);f.y+f.height-e.y>e.height&&(e.height=f.y+f.height-e.y);f.x+f.width-e.x>e.width&&(e.width=f.x+f.width-e.x)}b&&this.hide();return e};O[B].attr=function(b,e){if(this.removed)return this;if(b==null){var g={},m;for(m in this.attrs)this.attrs[q](m)&&(g[m]=this.attrs[m]);this._.rt.deg&&(g.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(g.scale=this.scale());g.gradient&&g.fill=="none"&&(g.fill=g.gradient)&&delete g.gradient;return g}if(e==
null&&d.is(b,"string")){if(b=="translation")return pa.call(this);if(b=="rotation")return this.rotate();if(b=="scale")return this.scale();if(b=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[b]}if(e==null&&d.is(b,r)){m={};for(var g=0,a=b.length;g<a;g++)m[b[g]]=this.attr(b[g]);return m}e!=null?(g={},g[b]=e):b!=null&&d.is(b,"object")&&(g=b);for(a in this.paper.customAttributes)if(this.paper.customAttributes[q](a)&&g[q](a)&&d.is(this.paper.customAttributes[a],
"function"))for(var f in m=this.paper.customAttributes[a].apply(this,[].concat(g[a])),this.attrs[a]=g[a],m)m[q](f)&&(g[f]=m[f]);ba(this,g);return this};O[B].toFront=function(){if(this.removed)return this;this.node.parentNode.appendChild(this.node);var b=this.paper;b.top!=this&&La(this,b);return this};O[B].toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Ma(this,this.paper));return this};
O[B].insertAfter=function(b){if(this.removed)return this;var e=b.node||b[b.length-1].node;e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node);Na(this,b,this.paper);return this};O[B].insertBefore=function(b){if(this.removed)return this;var e=b.node||b[0].node;e.parentNode.insertBefore(this.node,e);Oa(this,b,this.paper);return this};O[B].blur=function(b){if(+b!==0){var e=A("filter"),g=A("feGaussianBlur");this.attrs.blur=b;e.id=l();A(g,{stdDeviation:+b||
1.5});e.appendChild(g);this.paper.defs.appendChild(e);this._blur=e;A(this.node,{filter:"url(#"+e.id+")"})}else this._blur&&(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};var Ra=function(b,e,g,m){var a=A("circle");b.canvas&&b.canvas.appendChild(a);b=new O(a,b);b.attrs={cx:e,cy:g,r:m,fill:"none",stroke:"#000"};b.type="circle";A(a,b.attrs);return b},Sa=function(b,e,g,a,c,f){var h=A("rect");b.canvas&&b.canvas.appendChild(h);
b=new O(h,b);b.attrs={x:e,y:g,width:a,height:c,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"};b.type="rect";A(h,b.attrs);return b},Ta=function(b,e,g,a,c){var f=A("ellipse");b.canvas&&b.canvas.appendChild(f);b=new O(f,b);b.attrs={cx:e,cy:g,rx:a,ry:c,fill:"none",stroke:"#000"};b.type="ellipse";A(f,b.attrs);return b},Ua=function(b,e,g,a,c,f){var h=A("image");A(h,{x:g,y:a,width:c,height:f,preserveAspectRatio:"none"});h.setAttributeNS(b.xlink,"href",e);b.canvas&&b.canvas.appendChild(h);b=new O(h,b);
b.attrs={x:g,y:a,width:c,height:f,src:e};b.type="image";return b},Va=function(b,e,g,a){var c=A("text");A(c,{x:e,y:g,"text-anchor":"middle"});b.canvas&&b.canvas.appendChild(c);b=new O(c,b);b.attrs={x:e,y:g,"text-anchor":"middle",text:a,font:ja.font,stroke:"none",fill:"#000"};b.type="text";ba(b,b.attrs);return b},Wa=function(b,e){this.width=b||this.width;this.height=e||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);return this},sa=function(){var b=
Ka[F](0,arguments),e=b&&b.container,g=b.x,a=b.y,c=b.width,b=b.height;if(!e)throw Error("SVG container not found.");var f=A("svg"),g=g||0,a=a||0,c=c||512,b=b||342;A(f,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:c,height:b});e==1?(f.style.cssText="position:absolute;left:"+g+"px;top:"+a+"px",x.body.appendChild(f)):e.firstChild?e.insertBefore(f,e.firstChild):e.appendChild(f);e=new R;e.width=c;e.height=b;e.canvas=f;wa.call(e,e,d.fn);e.clear();return e};J.clear=function(){for(var b=this.canvas;b.firstChild;)b.removeChild(b.firstChild);
this.bottom=this.top=null;(this.desc=A("desc")).appendChild(x.createTextNode("Created with Rapha\u00ebl"));b.appendChild(this.desc);b.appendChild(this.defs=A("defs"))};J.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=Pa(b)}}if(d.vml){var Xa={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},ob=/([clmz]),?([^clmz]*)/gi,pb=/ progid:\S+Blur\([^\)]+\)/g,qb=/-?[^,\s-]+/g,ga=1E3+I+1E3,ha={path:1,rect:1},rb=function(b){var e=/[ahqstv]/ig,
g=ea;a(b).match(e)&&(g=ma);e=/[clmz]/g;if(g==ea&&!a(b).match(e))return b=a(b).replace(ob,function(b,e,g){var f=[],a=M.call(e)=="m",c=Xa[e];g.replace(qb,function(b){a&&f[s]==2&&(c+=f+Xa[e=="m"?"l":"L"],f=[]);f[N](U(b*10))});return c+f});for(var e=g(b),m,b=[],c=0,f=e[s];c<f;c++){g=e[c];m=M.call(e[c][0]);m=="z"&&(m="x");for(var h=1,d=g[s];h<d;h++)m+=U(g[h]*10)+(h!=d-1?",":"");b[N](m)}return b[y](I)};d[E]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+
this.version};Qa=function(b,e){var g=V("group");g.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";g.coordsize=e.coordsize;g.coordorigin=e.coordorigin;var a=V("shape"),c=a.style;c.width=e.width+"px";c.height=e.height+"px";a.coordsize=ga;a.coordorigin=e.coordorigin;g.appendChild(a);a=new O(a,g,e);c={fill:"none",stroke:"#000"};b&&(c.path=b);a.type="path";a.path=[];a.Path="";ba(a,c);e.canvas.appendChild(g);return a};ba=function(b,e){b.attrs=b.attrs||{};var g=b.node,
c=b.attrs,h=g.style,f;f=(e.x!=c.x||e.y!=c.y||e.width!=c.width||e.height!=c.height||e.r!=c.r)&&b.type=="rect";for(var j in e)e[q](j)&&(c[j]=e[j]);if(f)c.path=Ya(c.x,c.y,c.width,c.height,c.r),b.X=c.x,b.Y=c.y,b.W=c.width,b.H=c.height;e.href&&(g.href=e.href);e.title&&(g.title=e.title);e.target&&(g.target=e.target);e.cursor&&(h.cursor=e.cursor);"blur"in e&&b.blur(e.blur);if(e.path&&b.type=="path"||f)g.path=rb(c.path);e.rotation!=null&&b.rotate(e.rotation,!0);e.translation&&(f=a(e.translation).split(D),
pa.call(b,f[0],f[1]),b._.rt.cx!=null&&(b._.rt.cx+=+f[0],b._.rt.cy+=+f[1],b.setBox(b.attrs,f[0],f[1])));e.scale&&(f=a(e.scale).split(D),b.scale(+f[0]||1,+f[1]||+f[0]||1,+f[2]||null,+f[3]||null));if("clip-rect"in e){f=a(e["clip-rect"]).split(D);if(f[s]==4){f[2]=+f[2]+ +f[0];f[3]=+f[3]+ +f[1];j=g.clipRect||x.createElement("div");var k=j.style,p=g.parentNode;k.clip=d.format("rect({1}px {2}px {3}px {0}px)",f);if(!g.clipRect)k.position="absolute",k.top=0,k.left=0,k.width=b.paper.width+"px",k.height=b.paper.height+
"px",p.parentNode.insertBefore(j,p),j.appendChild(p),g.clipRect=j}e["clip-rect"]||g.clipRect&&(g.clipRect.style.clip="")}b.type=="image"&&e.src&&(g.src=e.src);if(b.type=="image"&&e.opacity)g.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+e.opacity*100+")",h.filter=(g.filterMatrix||"")+(g.filterOpacity||"");e.font&&(h.font=e.font);e["font-family"]&&(h.fontFamily='"'+e["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"');e["font-size"]&&(h.fontSize=e["font-size"]);e["font-weight"]&&
(h.fontWeight=e["font-weight"]);e["font-style"]&&(h.fontStyle=e["font-style"]);if(e.opacity!=null||e["stroke-width"]!=null||e.fill!=null||e.stroke!=null||e["stroke-width"]!=null||e["stroke-opacity"]!=null||e["fill-opacity"]!=null||e["stroke-dasharray"]!=null||e["stroke-miterlimit"]!=null||e["stroke-linejoin"]!=null||e["stroke-linecap"]!=null){g=b.shape||g;f=g.getElementsByTagName("fill")&&g.getElementsByTagName("fill")[0];j=!1;!f&&(j=f=V("fill"));if("fill-opacity"in e||"opacity"in e)h=((+c["fill-opacity"]+
1||2)-1)*((+c.opacity+1||2)-1)*((+d.getRGB(e.fill).o+1||2)-1),h=T(K(h,0),1),f.opacity=h;e.fill&&(f.on=!0);if(f.on==null||e.fill=="none")f.on=!1;if(f.on&&e.fill)if(h=e.fill.match(Ea))f.src=h[1],f.type="tile";else if(f.color=d.getRGB(e.fill).hex,f.src="",f.type="solid",d.getRGB(e.fill).error&&(b.type in{circle:1,ellipse:1}||a(e.fill).charAt()!="r")&&fa(b,e.fill))c.fill="none",c.gradient=e.fill;j&&g.appendChild(f);f=g.getElementsByTagName("stroke")&&g.getElementsByTagName("stroke")[0];j=!1;!f&&(j=f=
V("stroke"));if(e.stroke&&e.stroke!="none"||e["stroke-width"]||e["stroke-opacity"]!=null||e["stroke-dasharray"]||e["stroke-miterlimit"]||e["stroke-linejoin"]||e["stroke-linecap"])f.on=!0;(e.stroke=="none"||f.on==null||e.stroke==0||e["stroke-width"]==0)&&(f.on=!1);h=d.getRGB(e.stroke);f.on&&e.stroke&&(f.color=h.hex);h=((+c["stroke-opacity"]+1||2)-1)*((+c.opacity+1||2)-1)*((+h.o+1||2)-1);k=(H(e["stroke-width"])||1)*0.75;h=T(K(h,0),1);e["stroke-width"]==null&&(k=c["stroke-width"]);e["stroke-width"]&&
(f.weight=k);k&&k<1&&(h*=k)&&(f.weight=1);f.opacity=h;e["stroke-linejoin"]&&(f.joinstyle=e["stroke-linejoin"]||"miter");f.miterlimit=e["stroke-miterlimit"]||8;e["stroke-linecap"]&&(f.endcap=e["stroke-linecap"]=="butt"?"flat":e["stroke-linecap"]=="square"?"square":"round");if(e["stroke-dasharray"])h={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},f.dashstyle=h[q](e["stroke-dasharray"])?
h[e["stroke-dasharray"]]:"";j&&g.appendChild(f)}if(b.type=="text")switch(h=b.paper.span.style,c.font&&(h.font=c.font),c["font-family"]&&(h.fontFamily=c["font-family"]),c["font-size"]&&(h.fontSize=c["font-size"]),c["font-weight"]&&(h.fontWeight=c["font-weight"]),c["font-style"]&&(h.fontStyle=c["font-style"]),b.node.string&&(b.paper.span.innerHTML=a(b.node.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>")),b.W=c.w=b.paper.span.offsetWidth,b.H=c.h=b.paper.span.offsetHeight,b.X=
c.x,b.Y=c.y+U(b.H/2),c["text-anchor"]){case "start":b.node.style["v-text-align"]="left";b.bbx=U(b.W/2);break;case "end":b.node.style["v-text-align"]="right";b.bbx=-U(b.W/2);break;default:b.node.style["v-text-align"]="center"}};fa=function(b,e){b.attrs=b.attrs||{};var g,c="linear",h=".5 .5";b.attrs.gradient=e;e=a(e).replace(Fa,function(b,e,g){c="radial";e&&g&&(e=H(e),g=H(g),j(e-0.5,2)+j(g-0.5,2)>0.25&&(g=w.sqrt(0.25-j(e-0.5,2))*((g>0.5)*2-1)+0.5),h=e+I+g);return""});e=e.split(/\s*\-\s*/);if(c=="linear"){var f=
e.shift(),f=-H(f);if(isNaN(f))return null}var d=Ja(e);if(!d)return null;b=b.shape||b.node;g=b.getElementsByTagName("fill")[0]||V("fill");!g.parentNode&&b.appendChild(g);if(d[s]){g.on=!0;g.method="none";g.color=d[0].color;g.color2=d[d[s]-1].color;for(var k=[],p=0,n=d[s];p<n;p++)d[p].offset&&k[N](d[p].offset+I+d[p].color);g.colors&&(g.colors.value=k[s]?k[y]():"0% "+g.color);c=="radial"?(g.type="gradientradial",g.focus="100%",g.focussize=h,g.focusposition=h):(g.type="gradient",g.angle=(270-f)%360)}return 1};
O=function(b,e,g){this[0]=b;this.id=d._oid++;this.node=b;b.raphael=this;this.Y=this.X=0;this.attrs={};this.Group=e;this.paper=g;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!g.bottom&&(g.bottom=this);(this.prev=g.top)&&(g.top.next=this);g.top=this;this.next=null};L=O[B];L.rotate=function(b,e,g){if(this.removed)return this;if(b==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][y](I);return this._.rt.deg}b=a(b).split(D);b[s]-1&&(e=H(b[1]),g=H(b[2]));b=H(b[0]);e!=null?this._.rt.deg=b:
this._.rt.deg+=b;g==null&&(e=null);this._.rt.cx=e;this._.rt.cy=g;this.setBox(this.attrs,e,g);this.Group.style.rotation=this._.rt.deg;return this};L.setBox=function(b,e,g){if(this.removed)return this;var c=this.Group.style,a=this.shape&&this.shape.style||this.node.style,b=b||{},f;for(f in b)b[q](f)&&(this.attrs[f]=b[f]);var e=e||this._.rt.cx,g=g||this._.rt.cy,h=this.attrs,d;switch(this.type){case "circle":b=h.cx-h.r;f=h.cy-h.r;d=h=h.r*2;break;case "ellipse":b=h.cx-h.rx;f=h.cy-h.ry;d=h.rx*2;h=h.ry*
2;break;case "image":b=+h.x;f=+h.y;d=h.width||0;h=h.height||0;break;case "text":this.textpath.v=["m",U(h.x),", ",U(h.y-2),"l",U(h.x)+1,", ",U(h.y-2)][y]("");b=h.x-U(this.W/2);f=h.y-this.H/2;d=this.W;h=this.H;break;case "rect":case "path":this.attrs.path?(h=na(this.attrs.path),b=h.x,f=h.y,d=h.width,h=h.height):(f=b=0,d=this.paper.width,h=this.paper.height);break;default:f=b=0,d=this.paper.width,h=this.paper.height}var e=(e==null?b+d/2:e)-this.paper.width/2,g=(g==null?f+h/2:g)-this.paper.height/2,j;
c.left!=(j=e+"px")&&(c.left=j);c.top!=(j=g+"px")&&(c.top=j);this.X=ha[q](this.type)?-e:b;this.Y=ha[q](this.type)?-g:f;this.W=d;this.H=h;ha[q](this.type)?(a.left!=(j=-e*10+"px")&&(a.left=j),a.top!=(j=-g*10+"px")&&(a.top=j)):this.type=="text"?(a.left!=(j=-e+"px")&&(a.left=j),a.top!=(j=-g+"px")&&(a.top=j)):(c.width!=(j=this.paper.width+"px")&&(c.width=j),c.height!=(j=this.paper.height+"px")&&(c.height=j),a.left!=(j=b-e+"px")&&(a.left=j),a.top!=(j=f-g+"px")&&(a.top=j),a.width!=(j=d+"px")&&(a.width=j),
a.height!=(j=h+"px")&&(a.height=j))};L.hide=function(){!this.removed&&(this.Group.style.display="none");return this};L.show=function(){!this.removed&&(this.Group.style.display="block");return this};L.getBBox=function(){if(this.removed)return this;if(ha[q](this.type))return na(this.attrs.path);return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};L.remove=function(){if(!this.removed){ca(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);
this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)delete this[b];this.removed=!0}};L.attr=function(b,e){if(this.removed)return this;if(b==null){var g={},c;for(c in this.attrs)this.attrs[q](c)&&(g[c]=this.attrs[c]);this._.rt.deg&&(g.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(g.scale=this.scale());g.gradient&&g.fill=="none"&&(g.fill=g.gradient)&&delete g.gradient;return g}if(e==null&&d.is(b,"string")){if(b=="translation")return pa.call(this);if(b=="rotation")return this.rotate();
if(b=="scale")return this.scale();if(b=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[b]}if(this.attrs&&e==null&&d.is(b,r)){var h={};c=0;for(g=b[s];c<g;c++)h[b[c]]=this.attr(b[c]);return h}e!=null&&(g={},g[b]=e);e==null&&d.is(b,"object")&&(g=b);if(g){for(h in this.paper.customAttributes)if(this.paper.customAttributes[q](h)&&g[q](h)&&d.is(this.paper.customAttributes[h],"function"))for(var f in c=this.paper.customAttributes[h].apply(this,[].concat(g[h])),
this.attrs[h]=g[h],c)c[q](f)&&(g[f]=c[f]);g.text&&this.type=="text"&&(this.node.string=g.text);ba(this,g);g.gradient&&({circle:1,ellipse:1}[q](this.type)||a(g.gradient).charAt()!="r")&&fa(this,g.gradient);(!ha[q](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};L.toFront=function(){!this.removed&&this.Group.parentNode.appendChild(this.Group);this.paper.top!=this&&La(this,this.paper);return this};L.toBack=function(){if(this.removed)return this;this.Group.parentNode.firstChild!=this.Group&&
(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Ma(this,this.paper));return this};L.insertAfter=function(b){if(this.removed)return this;b.constructor==W&&(b=b[b.length-1]);b.Group.nextSibling?b.Group.parentNode.insertBefore(this.Group,b.Group.nextSibling):b.Group.parentNode.appendChild(this.Group);Na(this,b,this.paper);return this};L.insertBefore=function(b){if(this.removed)return this;b.constructor==W&&(b=b[0]);b.Group.parentNode.insertBefore(this.Group,b.Group);
Oa(this,b,this.paper);return this};L.blur=function(b){var e=this.node.runtimeStyle,g=e.filter,g=g.replace(pb,"");+b!==0?(this.attrs.blur=b,e.filter=g+I+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+b||1.5)+")",e.margin=d.format("-{0}px 0 0 -{0}px",U(+b||1.5))):(e.filter=g,e.margin=0,delete this.attrs.blur)};var Ra=function(b,e,g,c){var a=V("group"),f=V("oval");a.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";a.coordsize=ga;a.coordorigin=b.coordorigin;
a.appendChild(f);f=new O(f,a,b);f.type="circle";ba(f,{stroke:"#000",fill:"none"});f.attrs.cx=e;f.attrs.cy=g;f.attrs.r=c;f.setBox({x:e-c,y:g-c,width:c*2,height:c*2});b.canvas.appendChild(a);return f},Ya=function(b,e,g,c,a){return a?d.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",b+a,e,g-a*2,a,-a,c-a*2,a*2-g,a*2-c):d.format("M{0},{1}l{2},0,0,{3},{4},0z",b,e,g,c,-g)},Sa=function(b,e,g,c,a,f){var h=Ya(e,g,c,a,f),b=b.path(h),
d=b.attrs;b.X=d.x=e;b.Y=d.y=g;b.W=d.width=c;b.H=d.height=a;d.r=f;d.path=h;b.type="rect";return b},Ta=function(b,e,g,c,a){var f=V("group"),h=V("oval");f.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";f.coordsize=ga;f.coordorigin=b.coordorigin;f.appendChild(h);h=new O(h,f,b);h.type="ellipse";ba(h,{stroke:"#000"});h.attrs.cx=e;h.attrs.cy=g;h.attrs.rx=c;h.attrs.ry=a;h.setBox({x:e-c,y:g-a,width:c*2,height:a*2});b.canvas.appendChild(f);return h},Ua=function(b,e,
g,c,a,f){var h=V("group"),d=V("image");h.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";h.coordsize=ga;h.coordorigin=b.coordorigin;d.src=e;h.appendChild(d);d=new O(d,h,b);d.type="image";d.attrs.src=e;d.attrs.x=g;d.attrs.y=c;d.attrs.w=a;d.attrs.h=f;d.setBox({x:g,y:c,width:a,height:f});b.canvas.appendChild(h);return d},Va=function(b,e,g,c){var h=V("group"),f=V("shape"),j=f.style,k=V("path"),p=V("textpath");h.style.cssText="position:absolute;left:0;top:0;width:"+
b.width+"px;height:"+b.height+"px";h.coordsize=ga;h.coordorigin=b.coordorigin;k.v=d.format("m{0},{1}l{2},{1}",U(e*10),U(g*10),U(e*10)+1);k.textpathok=!0;j.width=b.width;j.height=b.height;p.string=a(c);p.on=!0;f.appendChild(p);f.appendChild(k);h.appendChild(f);j=new O(p,h,b);j.shape=f;j.textpath=k;j.type="text";j.attrs.text=c;j.attrs.x=e;j.attrs.y=g;j.attrs.w=1;j.attrs.h=1;ba(j,{font:ja.font,stroke:"none",fill:"#000"});j.setBox();b.canvas.appendChild(h);return j},Wa=function(b,e){var g=this.canvas.style;
b==+b&&(b+="px");e==+e&&(e+="px");g.width=b;g.height=e;g.clip="rect(0 "+b+" "+e+" 0)";return this},V;x.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!x.namespaces.rvml&&x.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),V=function(b){return x.createElement("<rvml:"+b+' class="rvml">')}}catch(yb){V=function(b){return x.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}sa=function(){var b=Ka[F](0,arguments),e=b.container,g=b.height,c=b.width,a=
b.x,b=b.y;if(!e)throw Error("VML container not found.");var f=new R,h=f.canvas=x.createElement("div"),j=h.style,a=a||0,b=b||0,c=c||512,g=g||342;c==+c&&(c+="px");g==+g&&(g+="px");f.width=1E3;f.height=1E3;f.coordsize=1E4+I+1E4;f.coordorigin="0 0";f.span=x.createElement("span");f.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";h.appendChild(f.span);j.cssText=d.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
c,g);e==1?(x.body.appendChild(h),j.left=a+"px",j.top=b+"px",j.position="absolute"):e.firstChild?e.insertBefore(h,e.firstChild):e.appendChild(h);wa.call(f,f,d.fn);return f};J.clear=function(){this.canvas.innerHTML="";this.span=x.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};J.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=
Pa(b);return!0}}X=navigator.userAgent.match(/Version\\x2f(.*?)\s/);navigator.vendor=="Apple Computer, Inc."&&(X&&X[1]<4||navigator.platform.slice(0,2)=="iP")?J.safari=function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});t.setTimeout(function(){b.remove()})}:J.safari=function(){};for(var sb=function(){this.returnValue=!1},tb=function(){return this.originalEvent.preventDefault()},ub=function(){this.cancelBubble=!0},vb=function(){return this.originalEvent.stopPropagation()},
wb=function(){if(x.addEventListener)return function(b,e,g,c){var a=G&&k[e]?k[e]:e,f=function(a){if(G&&k[q](e))for(var f=0,h=a.targetTouches&&a.targetTouches.length;f<h;f++)if(a.targetTouches[f].target==b){h=a;a=a.targetTouches[f];a.originalEvent=h;a.preventDefault=tb;a.stopPropagation=vb;break}return g.call(c,a)};b.addEventListener(a,f,!1);return function(){b.removeEventListener(a,f,!1);return!0}};if(x.attachEvent)return function(b,e,g,c){var a=function(b){b=b||t.event;b.preventDefault=b.preventDefault||
sb;b.stopPropagation=b.stopPropagation||ub;return g.call(c,b)};b.attachEvent("on"+e,a);return function(){b.detachEvent("on"+e,a);return!0}}}(),Y=[],ya=function(b){for(var e=b.clientX,g=b.clientY,c=x.documentElement.scrollTop||x.body.scrollTop,a=x.documentElement.scrollLeft||x.body.scrollLeft,f,h=Y.length;h--;){f=Y[h];if(G)for(var d=b.touches.length,j;d--;){if(j=b.touches[d],j.identifier==f.el._drag.id){e=j.clientX;g=j.clientY;(b.originalEvent?b.originalEvent:b).preventDefault();break}}else b.preventDefault();
e+=a;g+=c;f.move&&f.move.call(f.move_scope||f.el,e-f.el._drag.x,g-f.el._drag.y,e,g,b)}},za=function(b){d.unmousemove(ya).unmouseup(za);for(var e=Y.length,g;e--;)g=Y[e],g.el._drag={},g.end&&g.end.call(g.end_scope||g.start_scope||g.move_scope||g.el,b);Y=[]},X=c[s];X--;)(function(b){d[b]=O[B][b]=function(e,g){if(d.is(e,"function"))this.events=this.events||[],this.events.push({name:b,f:e,unbind:wb(this.shape||this.node||x,b,e,g||this)});return this};d["un"+b]=O[B]["un"+b]=function(e){for(var g=this.events,
c=g[s];c--;)if(g[c].name==b&&g[c].f==e){g[c].unbind();g.splice(c,1);!g.length&&delete this.events;break}return this}})(c[X]);L.hover=function(b,e,g,c){return this.mouseover(b,g).mouseout(e,c||g)};L.unhover=function(b,e){return this.unmouseover(b).unmouseout(e)};L.drag=function(b,e,g,c,a,f){this._drag={};this.mousedown(function(h){(h.originalEvent||h).preventDefault();var j=x.documentElement.scrollTop||x.body.scrollTop,k=x.documentElement.scrollLeft||x.body.scrollLeft;this._drag.x=h.clientX+k;this._drag.y=
h.clientY+j;this._drag.id=h.identifier;e&&e.call(a||c||this,h.clientX+k,h.clientY+j,h);!Y.length&&d.mousemove(ya).mouseup(za);Y.push({el:this,move:b,end:g,move_scope:c,start_scope:a,end_scope:f})});return this};L.undrag=function(b,e,g){for(e=Y.length;e--;)Y[e].el==this&&Y[e].move==b&&Y[e].end==g&&Y.splice(e++,1);!Y.length&&d.unmousemove(ya).unmouseup(za)};J.circle=function(b,e,g){return Ra(this,b||0,e||0,g||0)};J.rect=function(b,e,g,c,a){return Sa(this,b||0,e||0,g||0,c||0,a||0)};J.ellipse=function(b,
e,g,c){return Ta(this,b||0,e||0,g||0,c||0)};J.path=function(b){b&&!d.is(b,"string")&&!d.is(b[0],r)&&(b+="");return Qa(d.format[F](d,arguments),this)};J.image=function(b,e,g,c,a){return Ua(this,b||"about:blank",e||0,g||0,c||0,a||0)};J.text=function(b,e,g){return Va(this,b||0,e||0,a(g))};J.set=function(b){arguments[s]>1&&(b=Array[B].splice.call(arguments,0,arguments[s]));return new W(b)};J.setSize=Wa;J.top=J.bottom=null;J.raphael=d;L.resetScale=function(){if(this.removed)return this;this._.sx=1;this._.sy=
1;this.attrs.scale="1 1"};L.scale=function(b,e,g,c){if(this.removed)return this;if(b==null&&e==null)return{x:this._.sx,y:this._.sy,toString:i};e=e||b;!+e&&(e=b);var a,f,d=this.attrs;if(b!=0){var j=this.getBBox(),k=j.x+j.width/2,p=j.y+j.height/2;a=h(b/this._.sx);f=h(e/this._.sy);var g=+g||g==0?g:k,c=+c||c==0?c:p,u=this._.sx>0,l=this._.sy>0,j=~~(b/h(b)),r=~~(e/h(e)),o=a*j,E=f*r,q=this.node.style,k=g+h(k-g)*o*(k>g==u?1:-1),p=c+h(p-c)*E*(p>c==l?1:-1),w=b*j>e*r?f:a;switch(this.type){case "rect":case "image":var K=
d.width*a,x=d.height*f;this.attr({height:x,r:d.r*w,width:K,x:k-K/2,y:p-x/2});break;case "circle":case "ellipse":this.attr({rx:d.rx*a,ry:d.ry*f,r:d.r*w,cx:k,cy:p});break;case "text":this.attr({x:k,y:p});break;case "path":for(var w=va(d.path),N=!0,u=u?o:a,l=l?E:f,E=0,o=w[s];E<o;E++){var M=w[E],t=ia.call(M[0]);if(!(t=="M"&&N))if(N=!1,t=="A")M[w[E][s]-2]*=u,M[w[E][s]-1]*=l,M[1]*=a,M[2]*=f,M[5]=+(j+r?!!+M[5]:!+M[5]);else if(t=="H")for(var t=1,G=M[s];t<G;t++)M[t]*=u;else if(t=="V"){t=1;for(G=M[s];t<G;t++)M[t]*=
l}else{t=1;for(G=M[s];t<G;t++)M[t]*=t%2?u:l}}f=na(w);a=k-f.x-f.width/2;f=p-f.y-f.height/2;w[0][1]+=a;w[0][2]+=f;this.attr({path:w})}this.type in{text:1,image:1}&&(j!=1||r!=1)?this.transformations?(this.transformations[2]="scale(".concat(j,",",r,")"),this.node.setAttribute("transform",this.transformations[y](I)),a=j==-1?-d.x-(K||0):d.x,f=r==-1?-d.y-(x||0):d.y,this.attr({x:a,y:f}),d.fx=j-1,d.fy=r-1):(this.node.filterMatrix=" progid:DXImageTransform.Microsoft"+".Matrix(M11=".concat(j,", M12=0, M21=0, M22=",
r,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),q.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||"")):this.transformations?(this.transformations[2]="",this.node.setAttribute("transform",this.transformations[y](I)),d.fx=0,d.fy=0):(this.node.filterMatrix="",q.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||""));d.scale=[b,e,g,c][y](I);this._.sx=b;this._.sy=e}return this};L.clone=function(){if(this.removed)return null;var b=this.attr();delete b.scale;
delete b.translation;return this.paper[this.type]().attr(b)};var Aa={},qa=function(b,e,c,a,h,f,k,p,u){var n=0,i=100,l=[b,e,c,a,h,f,k,p].join(),r=Aa[l],s,y;!r&&(Aa[l]=r={data:[]});r.timer&&clearTimeout(r.timer);r.timer=setTimeout(function(){delete Aa[l]},2E3);u!=null&&(i=~~qa(b,e,c,a,h,f,k,p)*10);for(var o=0;o<i+1;o++){r.data[u]>o?y=r.data[o*i]:(y=d.findDotsAtSegment(b,e,c,a,h,f,k,p,o/i),r.data[o]=y);o&&(n+=j(j(s.x-y.x,2)+j(s.y-y.y,2),0.5));if(u!=null&&n>=u)return y;s=y}if(u==null)return n},c=function(b,
e){return function(c,a,h){for(var c=ma(c),f,j,k,p,u="",i={},l=0,r=0,s=c.length;r<s;r++){k=c[r];if(k[0]=="M")f=+k[1],j=+k[2];else{p=qa(f,j,k[1],k[2],k[3],k[4],k[5],k[6]);if(l+p>a){if(e&&!i.start){f=qa(f,j,k[1],k[2],k[3],k[4],k[5],k[6],a-l);u+=["C",f.start.x,f.start.y,f.m.x,f.m.y,f.x,f.y];if(h)return u;i.start=u;u=["M",f.x,f.y+"C",f.n.x,f.n.y,f.end.x,f.end.y,k[5],k[6]][y]();l+=p;f=+k[5];j=+k[6];continue}if(!b&&!e)return f=qa(f,j,k[1],k[2],k[3],k[4],k[5],k[6],a-l),{x:f.x,y:f.y,alpha:f.alpha}}l+=p;f=
+k[5];j=+k[6]}u+=k}i.end=u;f=b?l:e?i:d.findDotsAtSegment(f,j,k[1],k[2],k[3],k[4],k[5],k[6],1);f.alpha&&(f={x:f.x,y:f.y,alpha:f.alpha});return f}},Za=c(1),ra=c(),Ba=c(0,1);L.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return Za(this.attrs.path)}};L.getPointAtLength=function(b){if(this.type=="path")return ra(this.attrs.path,b)};L.getSubpath=function(b,e){if(this.type=="path"){if(h(this.getTotalLength()-e)<"1e-6")return Ba(this.attrs.path,
b).end;var c=Ba(this.attrs.path,e,1);return b?Ba(c,b).end:c}};d.easing_formulas={linear:function(b){return b},"<":function(b){return j(b,3)},">":function(b){return j(b-1,3)+1},"<>":function(b){b*=2;if(b<1)return j(b,3)/2;b-=2;return(j(b,3)+2)/2},backIn:function(b){return b*b*(2.70158*b-1.70158)},backOut:function(b){b-=1;return b*b*(2.70158*b+1.70158)+1},elastic:function(b){if(b==0||b==1)return b;return j(2,-10*b)*w.sin((b-0.075)*2*p/0.3)+1},bounce:function(b){b<1/2.75?b*=7.5625*b:b<2/2.75?(b-=1.5/
2.75,b=7.5625*b*b+0.75):b<2.5/2.75?(b-=2.25/2.75,b=7.5625*b*b+0.9375):(b-=2.625/2.75,b=7.5625*b*b+0.984375);return b}};var Z=[],$a=function(){for(var b=+new Date,e=0;e<Z[s];e++){var c=Z[e];if(!c.stop&&!c.el.removed){var a=b-c.start,h=c.ms,f=c.easing,j=c.from,k=c.diff,p=c.to,n=c.t,i=c.el,c={},l;if(a<h){var a=f(a/h),r;for(r in j)if(j[q](r)){switch(ta[r]){case "along":l=a*h*k[r];p.back&&(l=p.len-l);f=ra(p[r],l);i.translate(k.sx-k.x||0,k.sy-k.y||0);k.x=f.x;k.y=f.y;i.translate(f.x-k.sx,f.y-k.sy);p.rot&&
i.rotate(k.r+f.alpha,f.x,f.y);break;case u:l=+j[r]+a*h*k[r];break;case "colour":l="rgb("+[Ca(U(j[r].r+a*h*k[r].r)),Ca(U(j[r].g+a*h*k[r].g)),Ca(U(j[r].b+a*h*k[r].b))][y](",")+")";break;case "path":l=[];for(var f=0,o=j[r][s];f<o;f++){l[f]=[j[r][f][0]];for(var E=1,w=j[r][f][s];E<w;E++)l[f][E]=+j[r][f][E]+a*h*k[r][f][E];l[f]=l[f][y](I)}l=l[y](I);break;case "csv":switch(r){case "translation":l=a*h*k[r][0]-n.x;f=a*h*k[r][1]-n.y;n.x+=l;n.y+=f;l=l+I+f;break;case "rotation":l=+j[r][0]+a*h*k[r][0];j[r][1]&&
(l+=","+j[r][1]+","+j[r][2]);break;case "scale":l=[+j[r][0]+a*h*k[r][0],+j[r][1]+a*h*k[r][1],2 in p[r]?p[r][2]:"",3 in p[r]?p[r][3]:""][y](I);break;case "clip-rect":l=[];for(f=4;f--;)l[f]=+j[r][f]+a*h*k[r][f]}break;default:o=[].concat(j[r]);l=[];for(f=i.paper.customAttributes[r].length;f--;)l[f]=+o[f]+a*h*k[r][f]}c[r]=l}i.attr(c);i._run&&i._run.call(i)}else p.along&&(f=ra(p.along,p.len*!p.back),i.translate(k.sx-(k.x||0)+f.x-k.sx,k.sy-(k.y||0)+f.y-k.sy),p.rot&&i.rotate(k.r+f.alpha,f.x,f.y)),(n.x||
n.y)&&i.translate(-n.x,-n.y),p.scale&&(p.scale+=""),i.attr(p),Z.splice(e--,1)}}d.svg&&i&&i.paper&&i.paper.safari();Z[s]&&setTimeout($a)},xb=function(b,e,c,a,h){var f=c-a;e.timeouts.push(setTimeout(function(){d.is(h,"function")&&h.call(e);e.animate(b,f,b.easing)},a))},Ca=function(b){return K(T(b,255),0)},pa=function(b,e){if(b==null)return{x:this._.tx,y:this._.ty,toString:i};this._.tx+=+b;this._.ty+=+e;switch(this.type){case "circle":case "ellipse":this.attr({cx:+b+this.attrs.cx,cy:+e+this.attrs.cy});
break;case "rect":case "image":case "text":this.attr({x:+b+this.attrs.x,y:+e+this.attrs.y});break;case "path":var c=va(this.attrs.path);c[0][1]+=+b;c[0][2]+=+e;this.attr({path:c})}return this};L.animateWith=function(b,e,c,a,h){for(var f=0,d=Z.length;f<d;f++)Z[f].el.id==b.id&&(e.start=Z[f].start);return this.animate(e,c,a,h)};L.animateAlong=C();L.animateAlongBack=C(1);L.onAnimation=function(b){this._run=b||0;return this};L.animate=function(b,e,c,h){var j=this;j.timeouts=j.timeouts||[];if(d.is(c,"function")||
!c)h=c||null;if(j.removed)return h&&h.call(j),j;var f={},k={},p=!1,i={},n;for(n in b)if(b[q](n)&&(ta[q](n)||j.paper.customAttributes[q](n)))switch(p=!0,f[n]=j.attr(n),f[n]==null&&(f[n]=ja[n]),k[n]=b[n],ta[n]){case "along":var r=Za(b[n]),l=ra(b[n],r*!!b.back),y=j.getBBox();i[n]=r/e;i.tx=y.x;i.ty=y.y;i.sx=l.x;i.sy=l.y;k.rot=b.rot;k.back=b.back;k.len=r;b.rot&&(i.r=H(j.rotate())||0);break;case u:i[n]=(k[n]-f[n])/e;break;case "colour":f[n]=d.getRGB(f[n]);r=d.getRGB(k[n]);i[n]={r:(r.r-f[n].r)/e,g:(r.g-
f[n].g)/e,b:(r.b-f[n].b)/e};break;case "path":r=ma(f[n],k[n]);f[n]=r[0];y=r[1];i[n]=[];r=0;for(l=f[n][s];r<l;r++){i[n][r]=[0];for(var o=1,E=f[n][r][s];o<E;o++)i[n][r][o]=(y[r][o]-f[n][r][o])/e}break;case "csv":l=a(b[n]).split(D);y=a(f[n]).split(D);switch(n){case "translation":f[n]=[0,0];i[n]=[l[0]/e,l[1]/e];break;case "rotation":f[n]=y[1]==l[1]&&y[2]==l[2]?y:[0,l[1],l[2]];i[n]=[(l[0]-f[n][0])/e,0,0];break;case "scale":b[n]=l;f[n]=a(f[n]).split(D);i[n]=[(l[0]-f[n][0])/e,(l[1]-f[n][1])/e,0,0];break;
case "clip-rect":f[n]=a(f[n]).split(D);i[n]=[];for(r=4;r--;)i[n][r]=(l[r]-f[n][r])/e}k[n]=l;break;default:l=[].concat(b[n]);y=[].concat(f[n]);i[n]=[];for(r=j.paper.customAttributes[n][s];r--;)i[n][r]=((l[r]||0)-(y[r]||0))/e}if(p){n=d.easing_formulas[c];if(!n)if((n=a(c).match(db))&&n[s]==5){var w=n;n=function(b){return z(b,+w[1],+w[2],+w[3],+w[4],e)}}else n=function(b){return b};Z.push({start:b.start||+new Date,ms:e,easing:n,from:f,diff:i,to:k,el:j,t:{x:0,y:0}});d.is(h,"function")&&(j._ac=setTimeout(function(){h.call(j)},
e));Z[s]==1&&setTimeout($a)}else{var c=[],M,t;for(t in b)if(b[q](t)&&eb.test(t))n={value:b[t]},t=="from"&&(t=0),t=="to"&&(t=100),n.key=aa(t,10),c.push(n);c.sort(jb);c[0].key&&c.unshift({key:0,value:j.attrs});r=0;for(l=c[s];r<l;r++)xb(c[r].value,j,e/100*c[r].key,e/100*(c[r-1]&&c[r-1].key||0),c[r-1]&&c[r-1].value.callback);(M=c[c[s]-1].value.callback)&&j.timeouts.push(setTimeout(function(){M.call(j)},e))}return this};L.stop=function(){for(var b=0;b<Z.length;b++)Z[b].el.id==this.id&&Z.splice(b--,1);
b=0;for(ii=this.timeouts&&this.timeouts.length;b<ii;b++)clearTimeout(this.timeouts[b]);this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};L.translate=function(b,e){return this.attr({translation:b+" "+e})};L[E]=function(){return"Rapha\u00ebl\u2019s object"};d.ae=Z;var W=function(b){this.items=[];this[s]=0;this.type="set";if(b)for(var e=0,c=b[s];e<c;e++)if(b[e]&&(b[e].constructor==O||b[e].constructor==W))this[this.items[s]]=this.items[this.items[s]]=b[e],this[s]++};W[B][N]=function(){for(var b,
e,c=0,a=arguments[s];c<a;c++)if((b=arguments[c])&&(b.constructor==O||b.constructor==W))e=this.items[s],this[e]=this.items[e]=b,this[s]++;return this};W[B].pop=function(){delete this[this[s]--];return this.items.pop()};for(var Da in L)L[q](Da)&&(W[B][Da]=function(b){return function(){for(var e=0,c=this.items[s];e<c;e++)this.items[e][b][F](this.items[e],arguments);return this}}(Da));W[B].attr=function(b,e){if(b&&d.is(b,r)&&d.is(b[0],"object"))for(var c=0,a=b[s];c<a;c++)this.items[c].attr(b[c]);else{c=
0;for(a=this.items[s];c<a;c++)this.items[c].attr(b,e)}return this};W[B].animate=function(b,e,c,a){(d.is(c,"function")||!c)&&(a=c||null);var h=this.items[s],f=h,j,k=this,p;a&&(p=function(){!--h&&a.call(k)});c=d.is(c,"string")?c:p;for(j=this.items[--f].animate(b,e,c,p);f--;)this.items[f]&&!this.items[f].removed&&this.items[f].animateWith(j,b,e,c,p);return this};W[B].insertAfter=function(b){for(var e=this.items[s];e--;)this.items[e].insertAfter(b);return this};W[B].getBBox=function(){for(var b=[],e=
[],c=[],a=[],h=this.items[s];h--;){var f=this.items[h].getBBox();b[N](f.x);e[N](f.y);c[N](f.x+f.width);a[N](f.y+f.height)}b=T[F](0,b);e=T[F](0,e);return{x:b,y:e,width:K[F](0,c)-b,height:K[F](0,a)-e}};W[B].clone=function(b){for(var b=new W,e=0,c=this.items[s];e<c;e++)b[N](this.items[e].clone());return b};d.registerFont=function(b){if(!b.face)return b;this.fonts=this.fonts||{};var e={w:b.w,face:{},glyphs:{}},c=b.face["font-family"],a;for(a in b.face)b.face[q](a)&&(e.face[a]=b.face[a]);this.fonts[c]?
this.fonts[c][N](e):this.fonts[c]=[e];if(!b.svg)for(var h in e.face["units-per-em"]=aa(b.face["units-per-em"],10),b.glyphs)if(b.glyphs[q](h)&&(c=b.glyphs[h],e.glyphs[h]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(b){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[b]||"M"})+"z"},c.k))for(var f in c.k)c[q](f)&&(e.glyphs[h].k[f]=c.k[f]);return b};J.getFont=function(b,e,c,a){a=a||"normal";c=c||"normal";e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400;if(d.fonts){var h=d.fonts[b];if(!h){var b=
RegExp("(^|\\s)"+b.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i"),f;for(f in d.fonts)if(d.fonts[q](f)&&b.test(f)){h=d.fonts[f];break}}var j;if(h){f=0;for(b=h[s];f<b;f++)if(j=h[f],j.face["font-weight"]==e&&(j.face["font-style"]==c||!j.face["font-style"])&&j.face["font-stretch"]==a)break}return j}};J.print=function(b,e,c,h,j,f,k){var f=f||"middle",k=K(T(k||0,1),-1),p=this.set(),u=a(c).split(""),i=0;d.is(h,c)&&(h=this.getFont(h));if(h){for(var c=(j||16)/h.face["units-per-em"],r=h.face.bbox.split(D),
j=+r[0],f=+r[1]+(f=="baseline"?r[3]-r[1]+ +h.face.descent:(r[3]-r[1])/2),r=0,l=u[s];r<l;r++){var y=r&&h.glyphs[u[r-1]]||{},o=h.glyphs[u[r]];i+=r?(y.w||h.w)+(y.k&&y.k[u[r]]||0)+h.w*k:0;o&&o.d&&p[N](this.path(o.d).attr({fill:"#000",stroke:"none",translation:[i,0]}))}p.scale(c,c,j,f).translate(b-j,e-f)}return p};d.format=function(b,e){var c=d.is(e,r)?[0].concat(e):arguments;b&&d.is(b,"string")&&c[s]-1&&(b=b.replace(Q,function(b,e){return c[++e]==null?"":c[e]}));return b||""};d.ninja=function(){S.was?
t.Raphael=S.is:delete Raphael;return d};d.el=L;d.st=W[B];S.was?t.Raphael=d:Raphael=d})();(function(){var d=this,l=d._,o={},i=Array.prototype,C=Object.prototype,z=i.slice,D=i.unshift,P=C.toString,Q=C.hasOwnProperty,B=i.forEach,q=i.map,x=i.reduce,t=i.reduceRight,S=i.filter,R=i.every,J=i.some,F=i.indexOf,G=i.lastIndexOf,C=Array.isArray,I=Object.keys,a=Function.prototype.bind,c=function(c){return new w(c)};typeof module!=="undefined"&&module.exports?(module.exports=c,c._=c):d._=c;c.VERSION="1.1.6";var k=c.each=c.forEach=function(a,j,d){if(a!=null)if(B&&a.forEach===B)a.forEach(j,d);else if(c.isNumber(a.length))for(var k=
0,r=a.length;k<r;k++){if(j.call(d,a[k],k,a)===o)break}else for(k in a)if(Q.call(a,k)&&j.call(d,a[k],k,a)===o)break};c.map=function(c,a,d){var u=[];if(c==null)return u;if(q&&c.map===q)return c.map(a,d);k(c,function(c,h,k){u[u.length]=a.call(d,c,h,k)});return u};c.reduce=c.foldl=c.inject=function(a,j,d,u){var r=d!==void 0;a==null&&(a=[]);if(x&&a.reduce===x)return u&&(j=c.bind(j,u)),r?a.reduce(j,d):a.reduce(j);k(a,function(c,a,h){!r&&a===0?(d=c,r=!0):d=j.call(u,d,c,a,h)});if(!r)throw new TypeError("Reduce of empty array with no initial value");
return d};c.reduceRight=c.foldr=function(a,j,d,k){a==null&&(a=[]);if(t&&a.reduceRight===t)return k&&(j=c.bind(j,k)),d!==void 0?a.reduceRight(j,d):a.reduceRight(j);a=(c.isArray(a)?a.slice():c.toArray(a)).reverse();return c.reduce(a,j,d,k)};c.find=c.detect=function(c,a,d){var k;y(c,function(c,h,i){if(a.call(d,c,h,i))return k=c,!0});return k};c.filter=c.select=function(c,a,d){var i=[];if(c==null)return i;if(S&&c.filter===S)return c.filter(a,d);k(c,function(c,h,k){a.call(d,c,h,k)&&(i[i.length]=c)});return i};
c.reject=function(c,a,d){var i=[];if(c==null)return i;k(c,function(c,h,k){a.call(d,c,h,k)||(i[i.length]=c)});return i};c.every=c.all=function(c,a,d){var i=!0;if(c==null)return i;if(R&&c.every===R)return c.every(a,d);k(c,function(c,h,k){if(!(i=i&&a.call(d,c,h,k)))return o});return i};var y=c.some=c.any=function(a,d,p){d||(d=c.identity);var i=!1;if(a==null)return i;if(J&&a.some===J)return a.some(d,p);k(a,function(c,a,h){if(i=d.call(p,c,a,h))return o});return i};c.include=c.contains=function(c,a){var d=
!1;if(c==null)return d;if(F&&c.indexOf===F)return c.indexOf(a)!=-1;y(c,function(c){if(d=c===a)return!0});return d};c.invoke=function(a,d){var k=z.call(arguments,2);return c.map(a,function(c){return(d.call?d||c:c[d]).apply(c,k)})};c.pluck=function(a,d){return c.map(a,function(c){return c[d]})};c.max=function(a,d,p){if(!d&&c.isArray(a))return Math.max.apply(Math,a);var i={computed:-Infinity};k(a,function(c,a,h){a=d?d.call(p,c,a,h):c;a>=i.computed&&(i={value:c,computed:a})});return i.value};c.min=function(a,
d,p){if(!d&&c.isArray(a))return Math.min.apply(Math,a);var i={computed:Infinity};k(a,function(c,a,h){a=d?d.call(p,c,a,h):c;a<i.computed&&(i={value:c,computed:a})});return i.value};c.sortBy=function(a,d,k){return c.pluck(c.map(a,function(c,a,h){return{value:c,criteria:d.call(k,c,a,h)}}).sort(function(c,a){var h=c.criteria,d=a.criteria;return h<d?-1:h>d?1:0}),"value")};c.sortedIndex=function(a,d,k){k||(k=c.identity);for(var i=0,r=a.length;i<r;){var l=i+r>>1;k(a[l])<k(d)?i=l+1:r=l}return i};c.toArray=
function(a){if(!a)return[];if(a.toArray)return a.toArray();if(c.isArray(a))return a;if(c.isArguments(a))return z.call(a);return c.values(a)};c.size=function(a){return c.toArray(a).length};c.first=c.head=function(c,a,d){return a!=null&&!d?z.call(c,0,a):c[0]};c.rest=c.tail=function(c,a,d){return z.call(c,a==null||d?1:a)};c.last=function(c){return c[c.length-1]};c.compact=function(a){return c.filter(a,function(c){return!!c})};c.flatten=function(a){return c.reduce(a,function(a,h){if(c.isArray(h))return a.concat(c.flatten(h));
a[a.length]=h;return a},[])};c.without=function(a){var d=z.call(arguments,1);return c.filter(a,function(a){return!c.include(d,a)})};c.uniq=c.unique=function(a,d){return c.reduce(a,function(a,h,k){if(0==k||(d===!0?c.last(a)!=h:!c.include(a,h)))a[a.length]=h;return a},[])};c.intersect=function(a){var d=z.call(arguments,1);return c.filter(c.uniq(a),function(a){return c.every(d,function(h){return c.indexOf(h,a)>=0})})};c.zip=function(){for(var a=z.call(arguments),d=c.max(c.pluck(a,"length")),k=Array(d),
i=0;i<d;i++)k[i]=c.pluck(a,""+i);return k};c.indexOf=function(a,d,k){if(a==null)return-1;var i;if(k)return k=c.sortedIndex(a,d),a[k]===d?k:-1;if(F&&a.indexOf===F)return a.indexOf(d);k=0;for(i=a.length;k<i;k++)if(a[k]===d)return k;return-1};c.lastIndexOf=function(c,a){if(c==null)return-1;if(G&&c.lastIndexOf===G)return c.lastIndexOf(a);for(var d=c.length;d--;)if(c[d]===a)return d;return-1};c.range=function(c,a,d){arguments.length<=1&&(a=c||0,c=0);for(var d=arguments[2]||1,k=Math.max(Math.ceil((a-c)/
d),0),i=0,l=Array(k);i<k;)l[i++]=c,c+=d;return l};c.bind=function(c,d){if(c.bind===a&&a)return a.apply(c,z.call(arguments,1));var k=z.call(arguments,2);return function(){return c.apply(d,k.concat(z.call(arguments)))}};c.bindAll=function(a){var d=z.call(arguments,1);d.length==0&&(d=c.functions(a));k(d,function(d){a[d]=c.bind(a[d],a)});return a};c.memoize=function(a,d){var k={};d||(d=c.identity);return function(){var c=d.apply(this,arguments);return Q.call(k,c)?k[c]:k[c]=a.apply(this,arguments)}};c.delay=
function(c,a){var d=z.call(arguments,2);return setTimeout(function(){return c.apply(c,d)},a)};c.defer=function(a){return c.delay.apply(c,[a,1].concat(z.call(arguments,1)))};var s=function(c,a,d){var k;return function(){var i=this,l=arguments,y=function(){k=null;c.apply(i,l)};d&&clearTimeout(k);if(d||!k)k=setTimeout(y,a)}};c.throttle=function(c,a){return s(c,a,!1)};c.debounce=function(c,a){return s(c,a,!0)};c.once=function(c){var a=!1,d;return function(){if(a)return d;a=!0;return d=c.apply(this,arguments)}};
c.wrap=function(c,a){return function(){var d=[c].concat(z.call(arguments));return a.apply(this,d)}};c.compose=function(){var c=z.call(arguments);return function(){for(var a=z.call(arguments),d=c.length-1;d>=0;d--)a=[c[d].apply(this,a)];return a[0]}};c.after=function(c,a){return function(){if(--c<1)return a.apply(this,arguments)}};c.keys=I||function(c){if(c!==Object(c))throw new TypeError("Invalid object");var a=[],d;for(d in c)Q.call(c,d)&&(a[a.length]=d);return a};c.values=function(a){return c.map(a,
c.identity)};c.functions=c.methods=function(a){return c.filter(c.keys(a),function(d){return c.isFunction(a[d])}).sort()};c.extend=function(c){k(z.call(arguments,1),function(a){for(var d in a)a[d]!==void 0&&(c[d]=a[d])});return c};c.defaults=function(c){k(z.call(arguments,1),function(a){for(var d in a)c[d]==null&&(c[d]=a[d])});return c};c.clone=function(a){return c.isArray(a)?a.slice():c.extend({},a)};c.tap=function(c,a){a(c);return c};c.isEqual=function(a,d){if(a===d)return!0;var k=typeof a;if(k!=
typeof d)return!1;if(a==d)return!0;if(!a&&d||a&&!d)return!1;if(a._chain)a=a._wrapped;if(d._chain)d=d._wrapped;if(a.isEqual)return a.isEqual(d);if(c.isDate(a)&&c.isDate(d))return a.getTime()===d.getTime();if(c.isNaN(a)&&c.isNaN(d))return!1;if(c.isRegExp(a)&&c.isRegExp(d))return a.source===d.source&&a.global===d.global&&a.ignoreCase===d.ignoreCase&&a.multiline===d.multiline;if(k!=="object")return!1;if(a.length&&a.length!==d.length)return!1;var k=c.keys(a),i=c.keys(d);if(k.length!=i.length)return!1;
for(var l in a)if(!(l in d)||!c.isEqual(a[l],d[l]))return!1;return!0};c.isEmpty=function(a){if(c.isArray(a)||c.isString(a))return a.length===0;for(var d in a)if(Q.call(a,d))return!1;return!0};c.isElement=function(a){return!!(a&&a.nodeType==1)};c.isArray=C||function(a){return P.call(a)==="[object Array]"};c.isArguments=function(a){return!(!a||!Q.call(a,"callee"))};c.isFunction=function(a){return!(!a||!a.constructor||!a.call||!a.apply)};c.isString=function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)};
c.isNumber=function(a){return!!(a===0||a&&a.toExponential&&a.toFixed)};c.isNaN=function(a){return a!==a};c.isBoolean=function(a){return a===!0||a===!1};c.isDate=function(a){return!(!a||!a.getTimezoneOffset||!a.setUTCFullYear)};c.isRegExp=function(a){return!(!a||!a.test||!a.exec||!(a.ignoreCase||a.ignoreCase===!1))};c.isNull=function(a){return a===null};c.isUndefined=function(a){return a===void 0};c.noConflict=function(){d._=l;return this};c.identity=function(a){return a};c.times=function(a,c,d){for(var k=
0;k<a;k++)c.call(d,k)};c.mixin=function(a){k(c.functions(a),function(d){T(d,c[d]=a[d])})};var M=0;c.uniqueId=function(a){var c=M++;return a?a+c:c};c.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};c.template=function(a,d){var k=c.templateSettings,k="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(k.interpolate,function(a,c){return"',"+c.replace(/\\'/g,"'")+",'"}).replace(k.evaluate||
null,function(a,c){return"');"+c.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",k=new Function("obj",k);return d?k(d):k};var w=function(a){this._wrapped=a};c.prototype=w.prototype;var K=function(a,d){return d?c(a).chain():a},T=function(a,d){w.prototype[a]=function(){var a=z.call(arguments);D.call(a,this._wrapped);return K(d.apply(c,a),this._chain)}};c.mixin(c);k(["pop","push","reverse","shift","sort",
"splice","unshift"],function(a){var c=i[a];w.prototype[a]=function(){c.apply(this._wrapped,arguments);return K(this._wrapped,this._chain)}});k(["concat","join","slice"],function(a){var c=i[a];w.prototype[a]=function(){return K(c.apply(this._wrapped,arguments),this._chain)}});w.prototype.chain=function(){this._chain=!0;return this};w.prototype.value=function(){return this._wrapped}})();(function(){var d=this,l=d.Backbone,o;o=typeof exports!=="undefined"?exports:d.Backbone={};o.VERSION="0.5.0";var i=d._;if(!i&&typeof require!=="undefined")i=require("underscore")._;var C=d.jQuery||d.Zepto;o.noConflict=function(){d.Backbone=l;return this};o.emulateHTTP=!1;o.emulateJSON=!1;o.Events={bind:function(a,c){var d=this._callbacks||(this._callbacks={});(d[a]||(d[a]=[])).push(c);return this},unbind:function(a,c){var d;if(a){if(d=this._callbacks)if(c){d=d[a];if(!d)return this;for(var i=0,l=d.length;i<
l;i++)if(c===d[i]){d[i]=null;break}}else d[a]=[]}else this._callbacks={};return this},trigger:function(a){var c,d,i,l,o=2;if(!(d=this._callbacks))return this;for(;o--;)if(c=o?a:"all",c=d[c])for(var w=0,q=c.length;w<q;w++)(i=c[w])?(l=o?Array.prototype.slice.call(arguments,1):arguments,i.apply(this,l)):(c.splice(w,1),w--,q--);return this}};o.Model=function(a,c){var d;a||(a={});if(d=this.defaults)i.isFunction(d)&&(d=d()),a=i.extend({},d,a);this.attributes={};this._escapedAttributes={};this.cid=i.uniqueId("c");
this.set(a,{silent:!0});this._changed=!1;this._previousAttributes=i.clone(this.attributes);if(c&&c.collection)this.collection=c.collection;this.initialize.apply(this,arguments)};i.extend(o.Model.prototype,o.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var c;if(c=this._escapedAttributes[a])return c;c=this.attributes[a];return this._escapedAttributes[a]=
(c==null?"":""+c).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27").replace(/\//g,"&#x2F;")},has:function(a){return this.attributes[a]!=null},set:function(a,c){c||(c={});if(!a)return this;if(a.attributes)a=a.attributes;var d=this.attributes,l=this._escapedAttributes;if(!c.silent&&this.validate&&!this._performValidation(a,c))return!1;if(this.idAttribute in a)this.id=a[this.idAttribute];var o=this._changing;this._changing=
!0;for(var q in a){var w=a[q];if(!i.isEqual(d[q],w))d[q]=w,delete l[q],this._changed=!0,c.silent||this.trigger("change:"+q,this,w,c)}!o&&!c.silent&&this._changed&&this.change(c);this._changing=!1;return this},unset:function(a,c){if(!(a in this.attributes))return this;c||(c={});var d={};d[a]=void 0;if(!c.silent&&this.validate&&!this._performValidation(d,c))return!1;delete this.attributes[a];delete this._escapedAttributes[a];a==this.idAttribute&&delete this.id;this._changed=!0;c.silent||(this.trigger("change:"+
a,this,void 0,c),this.change(c));return this},clear:function(a){a||(a={});var c,d=this.attributes,i={};for(c in d)i[c]=void 0;if(!a.silent&&this.validate&&!this._performValidation(i,a))return!1;this.attributes={};this._escapedAttributes={};this._changed=!0;if(!a.silent){for(c in d)this.trigger("change:"+c,this,void 0,a);this.change(a)}return this},fetch:function(a){a||(a={});var c=this,d=a.success;a.success=function(i,l,o){if(!c.set(c.parse(i,o),a))return!1;d&&d(c,i)};a.error=I(a.error,c,a);return(this.sync||
o.sync).call(this,"read",this,a)},save:function(a,c){c||(c={});if(a&&!this.set(a,c))return!1;var d=this,i=c.success;c.success=function(a,l,o){if(!d.set(d.parse(a,o),c))return!1;i&&i(d,a,o)};c.error=I(c.error,d,c);var l=this.isNew()?"create":"update";return(this.sync||o.sync).call(this,l,this,c)},destroy:function(a){a||(a={});if(this.isNew())return this.trigger("destroy",this,this.collection,a);var c=this,d=a.success;a.success=function(i){c.trigger("destroy",c,c.collection,a);d&&d(c,i)};a.error=I(a.error,
c,a);return(this.sync||o.sync).call(this,"delete",this,a)},url:function(){var a=F(this.collection)||this.urlRoot||G();if(this.isNew())return a;return a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(a){this.trigger("change",this,a);this._previousAttributes=i.clone(this.attributes);this._changed=!1},hasChanged:function(a){if(a)return this._previousAttributes[a]!=
this.attributes[a];return this._changed},changedAttributes:function(a){a||(a=this.attributes);var c=this._previousAttributes,d=!1,l;for(l in a)i.isEqual(c[l],a[l])||(d=d||{},d[l]=a[l]);return d},previous:function(a){if(!a||!this._previousAttributes)return null;return this._previousAttributes[a]},previousAttributes:function(){return i.clone(this._previousAttributes)},_performValidation:function(a,c){var d=this.validate(a);if(d)return c.error?c.error(this,d,c):this.trigger("error",this,d,c),!1;return!0}});
o.Collection=function(a,c){c||(c={});if(c.comparator)this.comparator=c.comparator;i.bindAll(this,"_onModelEvent","_removeReference");this._reset();a&&this.reset(a,{silent:!0});this.initialize.apply(this,arguments)};i.extend(o.Collection.prototype,o.Events,{model:o.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,c){if(i.isArray(a))for(var d=0,l=a.length;d<l;d++)this._add(a[d],c);else this._add(a,c);return this},remove:function(a,c){if(i.isArray(a))for(var d=
0,l=a.length;d<l;d++)this._remove(a[d],c);else this._remove(a,c);return this},get:function(a){if(a==null)return null;return this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.models=this.sortBy(this.comparator);a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return i.map(this.models,function(c){return c.get(a)})},
reset:function(a,c){a||(a=[]);c||(c={});this.each(this._removeReference);this._reset();this.add(a,{silent:!0});c.silent||this.trigger("reset",this,c);return this},fetch:function(a){a||(a={});var c=this,d=a.success;a.success=function(i,l,o){c[a.add?"add":"reset"](c.parse(i,o),a);d&&d(c,i)};a.error=I(a.error,c,a);return(this.sync||o.sync).call(this,"read",this,a)},create:function(a,c){var d=this;c||(c={});a=this._prepareModel(a,c);if(!a)return!1;var i=c.success;c.success=function(a,l,o){d.add(a,c);
i&&i(a,l,o)};a.save(null,c);return a},parse:function(a){return a},chain:function(){return i(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(a,c){if(a instanceof o.Model){if(!a.collection)a.collection=this}else{var d=a,a=new this.model(d,{collection:this});a.validate&&!a._performValidation(d,c)&&(a=!1)}return a},_add:function(a,c){c||(c={});a=this._prepareModel(a,c);if(!a)return!1;var d=this.getByCid(a)||this.get(a);if(d)throw Error(["Can't add the same model to a set twice",
d.id]);this._byId[a.id]=a;this._byCid[a.cid]=a;this.models.splice(c.at!=null?c.at:this.comparator?this.sortedIndex(a,this.comparator):this.length,0,a);a.bind("all",this._onModelEvent);this.length++;c.silent||a.trigger("add",a,this,c);return a},_remove:function(a,c){c||(c={});a=this.getByCid(a)||this.get(a);if(!a)return null;delete this._byId[a.id];delete this._byCid[a.cid];this.models.splice(this.indexOf(a),1);this.length--;c.silent||a.trigger("remove",a,this,c);this._removeReference(a);return a},
_removeReference:function(a){this==a.collection&&delete a.collection;a.unbind("all",this._onModelEvent)},_onModelEvent:function(a,c,d,i){(a=="add"||a=="remove")&&d!=this||(a=="destroy"&&this._remove(c,i),c&&a==="change:"+c.idAttribute&&(delete this._byId[c.previous(c.idAttribute)],this._byId[c.id]=c),this.trigger.apply(this,arguments))}});i.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","invoke","max","min","sortBy",
"sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty"],function(a){o.Collection.prototype[a]=function(){return i[a].apply(i,[this.models].concat(i.toArray(arguments)))}});o.Router=function(a){a||(a={});if(a.routes)this.routes=a.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var z=/:([\w\d]+)/g,D=/\*([\w\d]+)/g,P=/[-[\]{}()+?.,\\^$|#\s]/g;i.extend(o.Router.prototype,o.Events,{initialize:function(){},route:function(a,c,d){o.history||(o.history=
new o.History);i.isRegExp(a)||(a=this._routeToRegExp(a));o.history.route(a,i.bind(function(i){i=this._extractParameters(a,i);d.apply(this,i);this.trigger.apply(this,["route:"+c].concat(i))},this))},navigate:function(a,c){o.history.navigate(a,c)},_bindRoutes:function(){if(this.routes){var a=[],c;for(c in this.routes)a.unshift([c,this.routes[c]]);c=0;for(var d=a.length;c<d;c++)this.route(a[c][0],a[c][1],this[a[c][1]])}},_routeToRegExp:function(a){a=a.replace(P,"\\$&").replace(z,"([^/]*)").replace(D,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,c){return a.exec(c).slice(1)}});o.History=function(){this.handlers=[];i.bindAll(this,"checkUrl")};var Q=/^#*!?/,B=/msie [\w.]+/,q=!1;i.extend(o.History.prototype,{interval:50,getFragment:function(a,c){if(a==null)if(this._hasPushState||c){var a=window.location.pathname,d=window.location.search;d&&(a+=d);a.indexOf(this.options.root)==0&&(a=a.substr(this.options.root.length))}else a=window.location.hash;return a.replace(Q,"")},start:function(a){if(q)throw Error("Backbone.history has already been started");
this.options=i.extend({},{root:"/"},this.options,a);this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),c=document.documentMode;if(c=B.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7))this.iframe=C('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?C(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!c?
C(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval);this.fragment=a;q=!0;a=this.loadUrl()||this.loadUrl(window.location.hash);c=window.location.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!c)this.fragment=this.getFragment(null,!0),window.location=this.options.root+"#"+this.fragment;else if(this._wantsPushState&&this._hasPushState&&c&&window.location.hash)this.navigate(window.location.hash);else return a},route:function(a,c){this.handlers.unshift({route:a,
callback:c})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.iframe.location.hash));if(a==this.fragment||a==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var c=this.fragment=this.getFragment(a);return i.any(this.handlers,function(a){if(a.route.test(c))return a.callback(c),!0})},navigate:function(a,c){a=(a||"").replace(Q,"");if(!(this.fragment==a||
this.fragment==decodeURIComponent(a))){if(this._hasPushState){var d=window.location;a.indexOf(this.options.root)!=0&&(a=this.options.root+a);this.fragment=a;window.history.pushState({},document.title,d.protocol+"//"+d.host+a)}else if(window.location.hash=this.fragment=a,this.iframe&&a!=this.getFragment(this.iframe.location.hash))this.iframe.document.open().close(),this.iframe.location.hash=a;c&&this.loadUrl(a)}}});o.View=function(a){this.cid=i.uniqueId("view");this._configure(a||{});this._ensureElement();
this.delegateEvents();this.initialize.apply(this,arguments)};var x=/^(\S+)\s*(.*)$/,t=["model","collection","el","id","attributes","className","tagName"];i.extend(o.View.prototype,o.Events,{tagName:"div",$:function(a){return C(a,this.el)},initialize:function(){},render:function(){return this},remove:function(){C(this.el).remove();return this},make:function(a,c,d){a=document.createElement(a);c&&C(a).attr(c);d&&C(a).html(d);return a},delegateEvents:function(a){if(a||(a=this.events))for(var c in C(this.el).unbind(".delegateEvents"+
this.cid),a){var d=this[a[c]];if(!d)throw Error('Event "'+a[c]+'" does not exist');var l=c.match(x),o=l[1],l=l[2],d=i.bind(d,this);o+=".delegateEvents"+this.cid;l===""?C(this.el).bind(o,d):C(this.el).delegate(l,o,d)}},_configure:function(a){this.options&&(a=i.extend({},this.options,a));for(var c=0,d=t.length;c<d;c++){var l=t[c];a[l]&&(this[l]=a[l])}this.options=a},_ensureElement:function(){if(this.el){if(i.isString(this.el))this.el=C(this.el).get(0)}else{var a=this.attributes||{};if(this.id)a.id=
this.id;if(this.className)a["class"]=this.className;this.el=this.make(this.tagName,a)}}});o.Model.extend=o.Collection.extend=o.Router.extend=o.View.extend=function(a,c){var d=J(this,a,c);d.extend=this.extend;return d};var S={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};o.sync=function(a,c,d){var l=S[a],d=i.extend({type:l,dataType:"json",processData:!1},d);if(!d.url)d.url=F(c)||G();if(!d.data&&c&&(a=="create"||a=="update"))d.contentType="application/json",d.data=JSON.stringify(c.toJSON());
if(o.emulateJSON)d.contentType="application/x-www-form-urlencoded",d.processData=!0,d.data=d.data?{model:d.data}:{};if(o.emulateHTTP&&(l==="PUT"||l==="DELETE")){if(o.emulateJSON)d.data._method=l;d.type="POST";d.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",l)}}return C.ajax(d)};var R=function(){},J=function(a,c,d){var l;l=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)};i.extend(l,a);R.prototype=a.prototype;l.prototype=new R;c&&i.extend(l.prototype,
c);d&&i.extend(l,d);l.prototype.constructor=l;l.__super__=a.prototype;return l},F=function(a){if(!a||!a.url)return null;return i.isFunction(a.url)?a.url():a.url},G=function(){throw Error('A "url" property or function must be specified');},I=function(a,c,d){return function(i){a?a(c,i,d):c.trigger("error",c,i,d)}}}).call(this);window.Modernizr=function(d,l,o){var i={},C=l.documentElement;l.head||l.getElementsByTagName("head");var z=l.createElement("modernizr"),z=z.style,D=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),P={},Q=[],B=function(d,i,o,q){var t,a=l.createElement("div");if(parseInt(o,10))for(;o--;)t=l.createElement("div"),t.id=q?q[o]:"modernizr"+(o+1),a.appendChild(t);o=["&shy;<style>",d,"</style>"].join("");a.id="modernizr";a.innerHTML+=o;C.appendChild(a);d=i(a,d);a.parentNode.removeChild(a);return!!d},q,x={}.hasOwnProperty,
t;typeof x!==o&&typeof x.call!==o?t=function(d,i){return x.call(d,i)}:t=function(d,i){return i in d&&typeof d.constructor.prototype[i]===o};(function(l,o){var q=l.join(""),t=o.length;B(q,function(l){for(var l=l.childNodes,a={};t--;)a[l[t].id]=l[t];i.touch="ontouchstart"in d||a.touch.offsetTop===9},t,o)})([,["@media (",D.join("touch-enabled),("),"modernizr){#touch{top:9px;position:absolute}}"].join("")],[,"touch"]);P.touch=function(){return i.touch};for(var S in P)t(P,S)&&(q=S.toLowerCase(),i[q]=P[S](),
Q.push((i[q]?"":"no-")+q));z.cssText="";z=null;d.attachEvent&&function(){var d=l.createElement("div");d.innerHTML="<elem></elem>";return d.childNodes.length!==1}()&&function(d,i){function l(d){for(var h=-1;++h<c;)d.createElement(a[h])}d.iepp=d.iepp||{};var q=d.iepp,t=q.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",a=t.split("|"),c=a.length,k=RegExp("(^|\\s)("+t+")","gi"),y=RegExp("<(/*)("+
t+")","gi"),s=/^\s*[\{\}]\s*$/,x=RegExp("(^|[^\\n]*?\\s)("+t+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),w=i.createDocumentFragment(),K=i.documentElement,t=K.firstChild,z=i.createElement("body"),h=i.createElement("style"),j=/print|all/,p;q.getCSS=function(a,c){if(a+""===o)return"";for(var d=-1,h=a.length,k,i=[];++d<h;)k=a[d],k.disabled||(c=k.media||c,j.test(c)&&i.push(q.getCSS(k.imports,c),k.cssText),c="all");return i.join("")};q.parseCSS=function(a){for(var c=[],d;(d=x.exec(a))!=null;)c.push(((s.exec(d[1])?
"\n":d[1])+d[2]+d[3]).replace(k,"$1.iepp_$2")+d[4]);return c.join("\n")};q.writeHTML=function(){var d=-1;for(p=p||i.body;++d<c;)for(var h=i.getElementsByTagName(a[d]),k=h.length,j=-1;++j<k;)h[j].className.indexOf("iepp_")<0&&(h[j].className+=" iepp_"+a[d]);w.appendChild(p);K.appendChild(z);z.className=p.className;z.id=p.id;z.innerHTML=p.innerHTML.replace(y,"<$1font")};q._beforePrint=function(){h.styleSheet.cssText=q.parseCSS(q.getCSS(i.styleSheets,"all"));q.writeHTML()};q.restoreHTML=function(){z.innerHTML=
"";K.removeChild(z);K.appendChild(p)};q._afterPrint=function(){q.restoreHTML();h.styleSheet.cssText=""};l(i);l(w);q.disablePP||(t.insertBefore(h,t.firstChild),h.media="print",h.className="iepp-printshim",d.attachEvent("onbeforeprint",q._beforePrint),d.attachEvent("onafterprint",q._afterPrint))}(d,l);i._version="2.0.6";i._prefixes=D;i.testStyles=B;C.className=C.className.replace(/\bno-js\b/,"")+(" js "+Q.join(" "));return i}(this,this.document);
(function(d,l,o){function i(){for(var a=1,c=-1;R.length-++c;)if(R[c].s&&!(a=R[c].r))break;a&&D()}function C(a){var c=l.createElement("script"),d;c.src=a.s;c.onreadystatechange=c.onload=function(){!d&&(!c.readyState||c.readyState=="loaded"||c.readyState=="complete")&&(d=1,i(),c.onload=c.onreadystatechange=null)};x(function(){d||(d=1,i())},p.errorTimeout);a.e?c.onload():t.parentNode.insertBefore(c,t)}function z(a){var d=l.createElement("link"),h;d.href=a.s;d.rel="stylesheet";d.type="text/css";if(!a.e&&
(c||F)){var k=function(a){x(function(){if(!h)try{a.sheet.cssRules.length?(h=1,i()):k(a)}catch(c){c.code==1E3||c.message=="security"||c.message=="denied"?(h=1,x(function(){i()},0)):k(a)}},0)};k(d)}else d.onload=function(){h||(h=1,x(function(){i()},0))},a.e&&d.onload();x(function(){h||(h=1,i())},p.errorTimeout);!a.e&&t.parentNode.insertBefore(d,t)}function D(){var a=R.shift();J=1;a?a.t?x(function(){a.t=="c"?z(a):C(a)},0):(a(),i()):J=0}function P(a,c,d,h,k,j){function o(){!q&&(!s.readyState||s.readyState==
"loaded"||s.readyState=="complete")&&(w.r=q=1,!J&&i(),s.onload=s.onreadystatechange=null,x(function(){I.removeChild(s)},0))}var s=l.createElement(a),q=0,w={t:d,s:c,e:j};s.src=s.data=c;!G&&(s.style.display="none");s.width=s.height="0";a!="object"&&(s.type=d);s.onload=s.onreadystatechange=o;a=="img"?s.onerror=o:a=="script"&&(s.onerror=function(){w.e=w.r=1;D()});R.splice(h,0,w);I.insertBefore(s,G?null:t);x(function(){q||(I.removeChild(s),w.r=w.e=q=1,i())},p.errorTimeout)}function Q(a,c,d){var h=c=="c"?
s:y;J=0;c=c||"j";w(a)?P(h,a,c,this.i++,q,d):(R.splice(this.i++,0,a),R.length==1&&D());return this}function B(){var a=p;a.loader={load:Q,i:0};return a}var q=l.documentElement,x=d.setTimeout,t=l.getElementsByTagName("script")[0],S={}.toString,R=[],J=0,F="MozAppearance"in q.style,G=F&&!!l.createRange().compareNode,I=G?q:t.parentNode,a=d.opera&&S.call(d.opera)=="[object Opera]",c="webkitAppearance"in q.style,k=c&&"async"in l.createElement("script"),y=F?"object":a||k?"img":"script",s=c?"img":y,M=Array.isArray||
function(a){return S.call(a)=="[object Array]"},w=function(a){return typeof a=="string"},K=function(a){return S.call(a)=="[object Function]"},T=[],h={},j,p;p=function(a){function c(a){var a=a.split("!"),d=T.length,k=a.pop(),i=a.length,k={url:k,origUrl:k,prefixes:a},j,l;for(l=0;l<i;l++)(j=h[a[l]])&&(k=j(k));for(l=0;l<d;l++)k=T[l](k);return k}function d(a,h,k,i,j){var l=c(a),p=l.autoCallback;if(!l.bypass){h&&(h=K(h)?h:h[a]||h[i]||h[a.split("/").pop().split("?")[0]]);if(l.instead)return l.instead(a,
h,k,i,j);k.load(l.url,l.forceCSS||!l.forceJS&&/css$/.test(l.url)?"c":o,l.noexec);(K(h)||K(p))&&k.load(function(){B();h&&h(l.origUrl,j,i);p&&p(l.origUrl,j,i)})}}function k(a,c){function h(a){if(w(a))d(a,l,c,0,i);else if(Object(a)===a)for(p in a)a.hasOwnProperty(p)&&d(a[p],l,c,p,i)}var i=!!a.test,j=a.load||a.both,l=a.callback,p;h(i?a.yep:a.nope);h(j);a.complete&&c.load(a.complete)}var i,j,l=this.yepnope.loader;if(w(a))d(a,0,l,0);else if(M(a))for(i=0;i<a.length;i++)j=a[i],w(j)?d(j,0,l,0):M(j)?p(j):Object(j)===
j&&k(j,l);else Object(a)===a&&k(a,l)};p.addPrefix=function(a,c){h[a]=c};p.addFilter=function(a){T.push(a)};p.errorTimeout=1E4;l.readyState==null&&l.addEventListener&&(l.readyState="loading",l.addEventListener("DOMContentLoaded",j=function(){l.removeEventListener("DOMContentLoaded",j,0);l.readyState="complete"},0));d.yepnope=B()})(this,this.document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};(function(d,l,o){function i(a,c,d){var i=jQuery.inArray(a,q)>-1;(a=="width"||a=="height")&&c===parseFloat(d.css(a))&&(i=!1);return i}function C(a){return parseFloat(a.replace(/px/i,""))}function z(a){for(var c in a)return!1;return!0}function D(a){for(var c in a)if((c=="width"||c=="height")&&(a[c]=="show"||a[c]=="hide"||a[c]=="toggle"))return!0;return!1}function P(a,d,i,l,o,q,x,h){a=typeof a=="undefined"?{}:a;a.secondary=typeof a.secondary=="undefined"?{}:a.secondary;for(var j=t.length-1;j>=0;j--)typeof a[t[j]+
"transition-property"]=="undefined"&&(a[t[j]+"transition-property"]=""),a[t[j]+"transition-property"]+=", "+(q===!0&&x===!0?t[j]+"transform":d),a[t[j]+"transition-duration"]=i+"ms",a[t[j]+"transition-timing-function"]=l,a.secondary[q===!0&&x===!0?t[j]+"transform":d]=q===!0&&x===!0?h===!0&&c?"translate3d("+a.meta.left+"px,"+a.meta.top+"px,0)":"translate("+a.meta.left+"px,"+a.meta.top+"px)":o;return a}function Q(a,c,d,i,l,o,q,h){var j=a.data(G)?z(a.data(G))?jQuery.extend(!0,{},F):a.data(G):jQuery.extend(!0,
{},F),p=l,u=jQuery.inArray(c,x)>-1;if(u){var r=j.meta,t=C(a.css(c))||0,B=c+"_o",p=u?l-t:l;r[c]=p;r[B]=a.css(c)=="auto"?0+p:t+p||0;j.meta=r;q&&p===0&&(p=0-r[B],r[c]=p,r[B]=0)}return a.data(G,P(j,c,d,i,p,o,q,h))}function B(a,c,d,i){var l=R.exec(c),o=a.css(d)==="auto"?0:a.css(d),o=typeof o=="string"?C(o):o;typeof c=="string"&&C(c);var i=i===!0?0:o,q=a.is(":hidden"),h=a.translation();d=="left"&&(i=parseInt(o,10)+h.x);d=="top"&&(i=parseInt(o,10)+h.y);!l&&c=="show"?(i=1,q&&a.css({display:"block",opacity:0})):
!l&&c=="hide"&&(i=0);if(l)return a=parseFloat(l[2]),l[1]&&(a=(l[1]==="-="?-1:1)*a+parseInt(i,10)),a;return i}var q=["top","right","bottom","left","opacity","height","width"],x=["top","right","bottom","left"],t=["","-webkit-","-moz-","-o-"],S=["avoidTransforms","useTranslate3d","leaveTransforms"],R=/^([+-]=)?([\d+-.]+)(.*)$/,J=/([A-Z])/g,F={secondary:{},meta:{top:0,right:0,bottom:0,left:0}},G="jQe",d=(document.body||document.documentElement).style,I=d.WebkitTransition!==void 0?"webkitTransitionEnd":
d.OTransition!==void 0?"oTransitionEnd":"transitionend",a=d.WebkitTransition!==void 0||d.MozTransition!==void 0||d.OTransition!==void 0||d.transition!==void 0,c="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix;jQuery.fn.translation=function(){if(!this[0])return null;for(var a=window.getComputedStyle(this[0],null),c={x:0,y:0},d=t.length-1;d>=0;d--){var i=a.getPropertyValue(t[d]+"transform");if(i&&/matrix/i.test(i)){a=i.replace(/^matrix\(/i,"").split(/, |\)$/g);c={x:parseInt(a[4],10),y:parseInt(a[5],
10)};break}}return c};jQuery.fn.animate=function(c,d,o,q){var c=c||{},w=typeof c.bottom=="undefined"&&typeof c.right=="undefined",C=jQuery.speed(d,o,q),F=this,h=0,j=function(){h--;h===0&&typeof C.complete=="function"&&C.complete.apply(F[0],arguments)};if(!a||z(c)||D(c)||C.duration<=0||jQuery.fn.animate.defaults.avoidTransforms===!0&&c.avoidTransforms!==!1)return l.apply(this,arguments);return this[C.queue===!0?"queue":"each"](function(){var a=jQuery(this),d=jQuery.extend({},C),o=function(){for(var d=
{},h=t.length-1;h>=0;h--)d[t[h]+"transition-property"]="none",d[t[h]+"transition-duration"]="",d[t[h]+"transition-timing-function"]="";a.unbind(I);if(!c.leaveTransforms==!0){for(var i=a.data(G)||{},l={},h=t.length-1;h>=0;h--)l[t[h]+"transform"]="";if(w&&typeof i.meta!="undefined")for(var h=0,o;o=x[h];++h)l[o]=i.meta[o+"_o"]+"px";a.css(d).css(l)}c.opacity==="hide"&&a.css("display","none");a.data(G,null);j.call(a)},q={bounce:"cubic-bezier(0.0, 0.35, .5, 1.3)",linear:"linear",swing:"ease-in-out",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",
easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",
easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",
easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)"},s={},q=q[d.easing||"swing"]?q[d.easing||"swing"]:d.easing||"swing",y;for(y in c)if(jQuery.inArray(y,S)===-1){var D=jQuery.inArray(y,x)>-1,F=B(a,c[y],y,D&&c.avoidTransforms!==!0);c.avoidTransforms!==!0&&i(y,F,a)?Q(a,y,d.duration,q,D&&c.avoidTransforms===!0?F+"px":F,D&&c.avoidTransforms!==!0,w,c.useTranslate3d===!0):s[y]=c[y]}y=a.data(G)||{};for(q=t.length-1;q>=0;q--)typeof y[t[q]+"transition-property"]!="undefined"&&(y[t[q]+"transition-property"]=
y[t[q]+"transition-property"].substr(2));a.data(G,y).unbind(I);if(!z(a.data(G))&&!z(a.data(G).secondary)){h++;a.css(a.data(G));var M=a.data(G).secondary;setTimeout(function(){a.bind(I,o).css(M)})}else d.queue=!1;z(s)||(h++,l.apply(a,[s,{duration:d.duration,easing:jQuery.easing[d.easing]?d.easing:jQuery.easing.swing?"swing":"linear",complete:j,queue:d.queue}]));return!0})};jQuery.fn.animate.defaults={};jQuery.fn.stop=function(c,d,i){if(!a)return o.apply(this,[c,d]);c&&this.queue([]);for(var l={},q=
t.length-1;q>=0;q--)l[t[q]+"transition-property"]="none",l[t[q]+"transition-duration"]="",l[t[q]+"transition-timing-function"]="";this.each(function(){var a=jQuery(this),q=window.getComputedStyle(this,null),h={},j;if(!z(a.data(G))&&!z(a.data(G).secondary)){j=a.data(G);if(d){if(h=j.secondary,!i&&typeof j.meta.left_o!==void 0||typeof j.meta.top_o!==void 0){h.left=typeof j.meta.left_o!==void 0?j.meta.left_o:"auto";h.top=typeof j.meta.top_o!==void 0?j.meta.top_o:"auto";for(j=t.length-1;j>=0;j--)h[t[j]+
"transform"]=""}}else for(var p in a.data(G).secondary)if(p=p.replace(J,"-$1").toLowerCase(),h[p]=q.getPropertyValue(p),!i&&/matrix/i.test(h[p])){j=h[p].replace(/^matrix\(/i,"").split(/, |\)$/g);h.left=parseFloat(j[4])+parseFloat(a.css("left"))+"px"||"auto";h.top=parseFloat(j[5])+parseFloat(a.css("top"))+"px"||"auto";for(j=t.length-1;j>=0;j--)h[t[j]+"transform"]=""}a.unbind(I).css(l).css(h).data(G,null)}else o.apply(a,[c,d])});return this}})(jQuery,jQuery.fn.animate,jQuery.fn.stop);var gui=gui||{};gui.array=gui.array||{};(function(){gui.array.numArray=function(d){for(var l=[],o=0;o<d.length;o++)l.push(Number(d[o]));return l}})();gui=gui||{};gui.string=gui.string||{};(function(){gui.string.stripQuotes=function(d){if(d&&d.charCodeAt(0)==34)return d.substr(1,d.length-2);return d};gui.string.trim=function(d){if(String.trim)return String.trim(d);return d.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}})();gui=gui||{};gui.data=gui.data||{};
(function(){var d=gui.string;gui.data.BaseCsvParser=function(d,o,i){this.delimiter=d?d:"\t";this.skipFinal=i!=!1;this.fieldNames=this.data=null};gui.data.BaseCsvParser.prototype={isValid:function(){return data!=null},parse:function(d){var o,i,C=[],d=d.split(/\r\n|\r|\n/),z=d.length;(o=this.parseFirstRow(d[0]))&&C.push(o);for(o=1;o<=z-2;++o)i=d[o],i.length!=0&&(i=this.parseRow(i.split(this.delimiter)))&&C.push(i);(d=this.parseFinalRow(d[z-1]))&&C.push(d);return this.buildData(C)},buildData:function(d){return d},
getFieldNames:function(){return this.fieldNames},parseFirstRow:function(l){if(this.fieldNames==null){this.fieldNames=l.split(this.delimiter);for(l=0;l<this.fieldNames.length;l++)this.fieldNames[l]=d.trim(d.stripQuotes(this.fieldNames[l]));return null}else return this.parseRow(l.split(this.delimiter))},parseFinalRow:function(d){return d.indexOf(this.delimiter)<0?null:this.parseRow(d.split(this.delimiter))},prepFieldName:function(l){return d.stripQuotes(l)},parseRow:function(l){var o={};if(l.length<
this.fieldNames.length)return null;for(var i=0;i<this.fieldNames.length;++i)o[this.fieldNames[i]]=d.stripQuotes(l[i]);return o}}})();Date.prototype.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.prototype.getMonthName=function(){return this.monthNames[this.getMonth()]};Date.prototype.getShortMonthName=function(){return this.getMonthName().substr(0,3)};gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.BankOfEnglandMPC=Backbone.View.extend({initialize:function(){this.membersUrl=this.options.membersUrl;this.decisionsUrl=this.options.decisionsUrl;_.bind(this,"render","membersLoaded");this.model=new gui.bankofenglandmpc.Model;var d;d=_.bind(function(d){this.membersLoaded(d)},this);$.ajax(this.membersUrl).success(d)},membersLoaded:function(d){this.model.setMembers((new gui.bankofenglandmpc.MembersCsvParser).parse(d));d=_.bind(function(d){this.decisionsLoaded(d)},this);
$.ajax(this.decisionsUrl).success(d)},decisionsLoaded:function(d){this.model.setDecisions((new gui.bankofenglandmpc.DecisionsCsvParser(this.model.get("members"))).parse(d));this.render()},render:function(){this.el.html(_.template($("#template_boempc_baseView").html(),{}));new gui.bankofenglandmpc.HeaderView({el:$("#boempc_header"),model:this.model});new gui.bankofenglandmpc.MembersView({el:$("#boempc_members"),model:this.model});new gui.bankofenglandmpc.ResultsView({el:$("#boempc_results"),model:this.model});
new gui.bankofenglandmpc.GraphView({el:$("#boempc_graph"),model:this.model})}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.GraphView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","showDecision");this.model.bind("change:decision",this.showDecision);this.render()},render:function(){this.el.html(_.template($("#template_boempc_graph").html(),{}));var d=[],l=0;this.model.get("decisions").forEach(function(o){d.push([l,o.get("new_rate")]);l++},this);this.chart=(new gui.bankofenglandmpc.Chart(this.$(".graphPanel")[0],20,20)).plot(d,0,2)},showDecision:function(){var d=this.model.get("decision"),
l=this.model.get("decisions").indexOf(this.model.get("decision"));this.chart.highlight(d,l)}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.HeaderView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","showDecision");this.model.bind("change:decision",this.showDecision);var d=new Date;this.defaultVariables={title:"Bank of England Members",description:"Some description copy about the interactive",month:d.getMonthName(),year:d.getFullYear(),article_url:""};this.render(this.defaultVariables)},render:function(d){d=this.el.html(_.template($("#template_boempc_header").html(),d));d.css({opacity:0});
d.animate({opacity:1},300)},showDecision:function(){var d=this.model.get("decision"),l=d?d.toJSON():this.defaultVariables;if(d)l.title=d.get("result")+" at "+d.get("new_rate")+"%";this.render(l)}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.MembersView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","showMember");this.circles={};this.model.bind("change:member",this.showMember);this.render();this.delegateEvents(this.events())},render:function(){this.el.html(_.template($("#template_boempc_members").html(),{}));var d=_.template($("#template_boempc_membername").html());this.model.get("members").forEach(function(l){if(l.id!=0){var o=$(d(l.toJSON()));o.data("member",l);var i=Raphael(_.last(o.find(".memberBullet")),
18,18).circle(9,9,8);i.attr({fill:l.get("colour"),"stroke-width":0});this.circles[l.id]=i;o.appendTo(this.$(".memberlist"))}},this)},events:function(){return Modernizr.touch?{"touchstart div[class=memberName]":"selectMember"}:{"click div[class=memberName]":"selectMember"}},selectMember:function(d){this.model.changeMember($(d.currentTarget).data("member"))},showMember:function(){this.$(".memberdetail").empty();var d=this.model.get("member");if(d.id!=0){var l=$(_.template($("#template_boempc_memberdetail").html(),
d.toJSON()));l.css({opacity:0});l.animate({opacity:1},300);l.appendTo(this.$(".memberdetail"));this.selectedCircle&&this.selectedCircle.attr({"stroke-width":0});this.selectedCircle=this.circles[d.id];this.selectedCircle.attr({"stroke-width":1})}}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.ResultsView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","renderVote","showMember","showHoverMember","selectMember","showDecision","mouseOver","mouseOut");this.circles={};this.model.bind("change:member",this.showMember);this.model.bind("change:hoverMember",this.showHoverMember);this.model.bind("change:decision",this.showDecision);this.render();this.delegateEvents(this.events())},render:function(){this.el.html(_.template($("#template_boempc_results").html(),{}));
var d=_.template($("#template_boempc_monthtable").html());this.model.get("decisions").forEach(function(l){var o=l.toJSON();o.change=o.change==0?"-":o.change+"pt";var i=$(d(o));i.data({decision:l});i.find(".resultLabel").addClass("bg"+o.result);this.renderVote(l.get("votes").r,"raise").appendTo(i.find(".raise")[0]);this.renderVote(l.get("votes").h,"hold").appendTo(i.find(".hold")[0]);this.renderVote(l.get("votes").l,"lower").appendTo(i.find(".lower")[0]);i.appendTo(this.$(".months"))},this)},renderVote:function(d,
l){var o=$("<ul></ul>");d.forEach(function(d){var d=d.get("member"),C=$("<li></li>").data({member:d}),z=this.circles[d.id]?this.circles[d.id]:this.circles[d.id]=[],D=Raphael(C[0],20,20),P;switch(l){case "raise":P=D.path("M1 17L10 3L19 17L1 17");break;case "hold":P=D.circle(10,10,9);break;case "lower":P=D.path("M1 3L10 17L19 3L1 3")}P.attr({fill:d.get("colour"),"stroke-width":0});z.push(P);o.append(C)},this);return o},events:function(){return Modernizr.touch?{"touchstart .month":"selectMonth","touchstart li":"selectMember"}:
{"click .month":"selectMonth","mouseenter .month":"mouseOver","mouseleave .month":"mouseOut","click li":"selectMember"}},selectMember:function(d){this.model.changeDecision($(d.currentTarget).closest(".month").data("decision"));this.model.changeMember($(d.currentTarget).data("member"));this.model.changeHoverMember($(d.currentTarget).data("member"));d.stopPropagation()},mouseOver:function(d){$(d.currentTarget).closest(".month").prepend('<div class="over"></div>')},mouseOut:function(){this.$(".over").remove()},
selectMonth:function(d){this.model.changeDecision($(d.currentTarget).data("decision"))},showMember:function(){this.model.get("member")!=this.model.get("hoverMember")&&this.$(".callout").remove();var d=this.model.get("member");this.memberArray&&_.each(this.memberArray,function(d){d.attr({"stroke-width":0})});this.memberArray=this.circles[d.id];d.id!=0&&_.each(this.memberArray,function(d){d.attr({"stroke-width":1})})},showHoverMember:function(){this.$(".callout").remove();var d=this.model.get("hoverMember"),
l=this.model.get("decision");d&&(new gui.bankofenglandmpc.ResultsToolTip(this.el,this.currentMonth,d,l)).render()},showDecision:function(){this.$(".callout").remove();var d=this.model,l=d.get("decision"),o=!0;this.currentMonth&&(this.currentMonth.animate({opacity:0.5},300),Modernizr.touch||this.currentMonth.find("li").unbind("mouseenter").unbind("mouseleave"),o=!1);_.each(this.$(".month"),function(i){i=$(i);i.data("decision")==l?(this.currentMonth=i,i.animate({opacity:1},300),Modernizr.touch||i.find("li").mouseenter(function(i){d.changeHoverMember($(i.currentTarget).data("member"))}).mouseleave(function(){d.changeHoverMember(null)})):
o&&i.animate({opacity:0.5},300)},this)}});gui.bankofenglandmpc.ResultsToolTip=function(d,l,o,i){this.container=d;this.target=l;this.member=o;this.decision=i};gui.bankofenglandmpc.ResultsToolTip.prototype={render:function(){var d,l=this.target.position().left>400?"left":"right",o=this.target.position().left+(l=="left"?-130:this.target.width()),i;this.member.id==0?(d={name:"No member information available",extentOfChange:""},i=this.target.height()*0.5):(d=this.decision.get("votes"),d=(d.r.get(this.member.id)||
d.h.get(this.member.id)||d.l.get(this.member.id)).get("extentOfChange"),d=d==0?"voted to hold":d>0?"voted for a raise of "+d+"%":"voted for a lowering of "+d+"%",d={name:this.member.get("name"),extentOfChange:d},_.each(this.target.find("li"),function(d){d=$(d);if(d.data("member")==this.member)i=d.position().top},this));d=_.template($("#template_boempc_callout").html(),d);d=$(d);d.css({opacity:0,top:i,left:o+(l=="left"?-10:10)});d.addClass(l);d.animate({left:o,opacity:1},300);Raphael(d.find(".arrow")[0],
10,18).path(l=="left"?"M10 9L0 0L0 18L10 9":"M0 9L10 0L10 18L0 9").attr({fill:"#666666","stroke-width":0});d.appendTo(this.container)}}})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.Chart=function(d,l,o){this.elem=d;this.$=$(d);this.paddingLeft=l||0;this.paddingRight=o||0;this.width=this.$.width();this.height=this.$.height();this.stepSize=10;this.paper=Raphael(this.elem,this.width,this.height)};gui.bankofenglandmpc.Chart.prototype={plot:function(d,l,o){if(!(d.length<2)){this.data=d;var i=o-l,C=this.height/i;this.stepSize=(this.width-this.paddingLeft-this.paddingRight)/(d.length-1);this.midPointY=i*0.5+l;var z=[],D,P;_.each(d,function(d){D=this.stepSize*
Number(d[0])+this.paddingLeft;P=this.height-(Number(d[1])-l)*C;z.push("L"+D+" "+P);this.paper.path("M"+D+" 0L"+D+" "+this.height).attr({stroke:"#CCCCCC","stroke-width":1,"stroke-dasharray":"- "})},this);z[0]=z[0].replace("L","M");this.paper.path(z.join("")).attr({stroke:"#666666"});this.renderAxis(l,o);return this}},renderAxis:function(d,l){var o=this.paper.text(0,0,this.formatAxisLabel(l.toString())).attr({"text-anchor":"start","font-size":14,fill:"#666666"});o.attr({y:o.getBBox().height*0.5});o=
this.paper.text(0,0,this.formatAxisLabel(d.toString())).attr({"text-anchor":"start","font-size":14,fill:"#666666"});o.attr({y:this.height-o.getBBox().height*0.5})},formatAxisLabel:function(d){return d==0?d.toString():d.toString()+"%"},highlight:function(d,l){if(!this.highlightBox)this.highlightBox=this.paper.rect(0,1,this.paddingLeft*2-2,this.height-2).attr({stroke:"#333333","stroke-width":1,"stroke-dasharray":"- ",x:l*this.stepSize+1,opacity:0}),this.label=this.paper.text(0,0,"0%").attr({"font-size":12,
fill:"#666666",y:20});var o=this;d?(this.highlightBox.animate({x:l*this.stepSize+1,opacity:1},500,"<>").onAnimation(function(){var d=o.data[Math.round(this.attrs.x/o.stepSize)][1];o.label.attr({text:d+"%",x:this.attrs.x+o.paddingLeft,y:d<o.midPointY?o.height*0.3:o.height*0.7})}),this.label.animateWith(this.highlightBox,{opacity:1},500)):(this.highlightBox.animate({opacity:0},500),this.label.animateWith(this.highlightBox,{opacity:0},500))}}})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.Model=Backbone.Model.extend({defaults:{decision:{},decisions:[],member:null,hoverMember:null,members:null},initialize:function(){this.bind("change:member",function(){this.get("member")});this.bind("change:decision",function(){this.get("decision")});this.bind("change:hoverMember",function(){this.get("hoverMember")})},changeMember:function(d){this.set({member:d})},changeHoverMember:function(d){this.set({hoverMember:d})},changeDecision:function(d){this.set({decision:d});
this.set({hoverMember:null})},setMembers:function(d){this.set({members:d})},setDecisions:function(d){this.set({decisions:d})}});gui.bankofenglandmpc.Vote=Backbone.Model.extend({});gui.bankofenglandmpc.Votes=Backbone.Collection.extend({model:gui.bankofenglandmpc.Vote,comparator:function(d){return Number(d.get("member").get("seatID"))-Number(d.get("extentOfChange"))*200}});gui.bankofenglandmpc.Member=Backbone.Model.extend({initialize:function(){this.id=this.attributes.memberID}});gui.bankofenglandmpc.Members=
Backbone.Collection.extend({model:gui.bankofenglandmpc.Member,comparator:function(d){return-Number(d.get("memberID"))+Number(d.get("seatID"))*200}});gui.bankofenglandmpc.Decision=Backbone.Model.extend({});gui.bankofenglandmpc.Decisions=Backbone.Collection.extend({model:gui.bankofenglandmpc.Decision})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};(function(){gui.bankofenglandmpc.MembersCsvParser=function(){};gui.bankofenglandmpc.MembersCsvParser.prototype=new gui.data.BaseCsvParser;_.extend(gui.bankofenglandmpc.MembersCsvParser.prototype,{buildData:function(d){var l=new gui.bankofenglandmpc.Members;_.each(d,function(d){l.add(new gui.bankofenglandmpc.Member(d))});return l}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.DecisionsCsvParser=function(d){this.members=d};gui.bankofenglandmpc.DecisionsCsvParser.prototype=new gui.data.BaseCsvParser;_.extend(gui.bankofenglandmpc.DecisionsCsvParser.prototype,{buildData:function(d){d.shift();var l=new gui.bankofenglandmpc.Decisions,o,i,C,z,D;_.each(d,function(d){i=d.votes={r:new gui.bankofenglandmpc.Votes,h:new gui.bankofenglandmpc.Votes,l:new gui.bankofenglandmpc.Votes};for(var Q=1;Q<10;Q++)D=d["m_"+Q].split(","),D.length!=2&&(D=[0,0]),z=
D[1]==0?i.h:D[1]>0?i.r:i.l,C=new gui.bankofenglandmpc.Vote({id:Q,member:this.members.get(D[0]),extentOfChange:D[1]}),z.add(C),delete d["m_"+Q];o=new gui.bankofenglandmpc.Decision(d);l.add(o);l.length>11&&l.remove(l.at(0))},this);return l}})})();
