(function(){function d(){if(d.is(arguments[0],x)){for(var b=arguments[0],e=sa[F](d,b.splice(0,3+d.is(b[0],v))),g=e.set(),n=0,t=b[r];n<t;n++){var f=b[n]||{};P[q](f.type)&&g[N](e[f.type]().attr(f))}return g}return sa[F](d,arguments)}function h(){for(var b=[],e=0;e<32;e++)b[e]=(~~(u.random()*16))[C](16);b[12]=4;b[16]=(b[16]&3|8)[C](16);return"r-"+b[y]("")}function m(b,e,g){function n(){var t=Array[D].slice.call(arguments,0),f=t[y]("\u25ba"),a=n.cache=n.cache||{},c=n.count=n.count||[];if(a[q](f))return g?
g(a[f]):a[f];c[r]>=1E3&&delete a[c.shift()];c[N](f);a[f]=b[F](e,t);return g?g(a[f]):a[f]}return n}function l(){return this.x+I+this.y}function z(b){return function(e,g,n,t){var f={back:b};d.is(n,"function")?t=n:f.rot=n;e&&e.constructor==O&&(e=e.attrs.path);e&&(f.along=e);return this.animate(f,g,t)}}function B(b,e,g,n,t,f){function a(b,e){var g,f,n,t;n=b;for(f=0;f<8;f++){t=((o*n+d)*n+c)*n-b;if(i(t)<e)return n;g=(3*o*n+2*d)*n+c;if(i(g)<1.0E-6)break;n-=t/g}g=0;f=1;n=b;if(n<g)return g;if(n>f)return f;
for(;g<f;){t=((o*n+d)*n+c)*n;if(i(t-b)<e)break;b>t?g=n:f=n;n=(f-g)/2+g}return n}var c=3*e,d=3*(n-e)-c,o=1-c-d,j=3*g,k=3*(t-g)-j,p=1-j-k;return function(b,e){var g=a(b,e);return((p*g+k)*g+j)*g}(b,1/(200*f))}d.version="1.5.2";var E=/[, ]+/,P={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},Q=/\{(\d+)\}/g,D="prototype",q="hasOwnProperty",w=document,s=window,S={was:Object[D][q].call(s,"Raphael"),is:s.Raphael},R=function(){this.customAttributes={}},J,F="apply",G="createTouch"in w,I=" ",a=String,c="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend".split(I),
k={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},y="join",r="length",M=a[D].toLowerCase,u=Math,K=u.max,T=u.min,i=u.abs,j=u.pow,p=u.PI,v="number",x="array",C="toString",ab=Object[D][C],N="push",Ea=/^url\(['"]?([^\)]+?)['"]?\)$/i,bb=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
cb={NaN:1,Infinity:1,"-Infinity":1},db=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,U=u.round,H=parseFloat,aa=parseInt,ia=a[D].toUpperCase,ja={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt",
"stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},ta={along:"along",blur:v,"clip-rect":"csv",cx:v,cy:v,fill:"colour","fill-opacity":v,"font-size":v,height:v,opacity:v,path:"path",r:v,rotation:"csv",rx:v,ry:v,scale:"csv",stroke:"colour","stroke-opacity":v,"stroke-width":v,translation:"csv",width:v,x:v,y:v},eb=/^(from|to|\d+%?)$/,ua=/\s*,\s*/,fb={hs:1,rg:1},gb=/,?([achlmqrstvxz]),?/gi,
hb=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,ib=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,Fa=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,jb=function(b,e){return b.key-e.key};d.type=s.SVGAngle||w.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(d.type=="VML"){var X=w.createElement("div");X.innerHTML='<v:shape adj="1"/>';X=X.firstChild;X.style.behavior="url(#default#VML)";if(!(X&&typeof X.adj=="object"))return d.type=null;X=null}d.svg=
!(d.vml=d.type=="VML");R[D]=d[D];J=R[D];d._id=0;d._oid=0;d.fn={};d.is=function(b,e){e=M.call(e);if(e=="finite")return!cb[q](+b);return e=="null"&&b===null||e==typeof b||e=="object"&&b===Object(b)||e=="array"&&Array.isArray&&Array.isArray(b)||ab.call(b).slice(8,-1).toLowerCase()==e};d.angle=function(b,e,g,n,t,f){if(t==null){b-=g;e-=n;if(!b&&!e)return 0;return((b<0)*180+u.atan(-e/-b)*180/p+360)%360}return d.angle(b,e,t,f)-d.angle(g,n,t,f)};d.rad=function(b){return b%360*p/180};d.deg=function(b){return b*
180/p%360};d.snapTo=function(b,e,g){g=d.is(g,"finite")?g:10;if(d.is(b,x))for(var n=b.length;n--;){if(i(b[n]-e)<=g)return b[n]}else{b=+b;n=e%b;if(n<g)return e-n;if(n>b-g)return e-n+b}return e};d.setWindow=function(b){s=b;w=s.document};var ka=function(b){if(d.vml){var e=/^\s+|\s+$/g,g;try{var n=new ActiveXObject("htmlfile");n.write("<body>");n.close();g=n.body}catch(t){g=createPopup().document.body}var f=g.createTextRange();ka=m(function(b){try{g.style.color=a(b).replace(e,"");var n=f.queryCommandValue("ForeColor");
return"#"+("000000"+((n&255)<<16|n&65280|(n&16711680)>>>16)[C](16)).slice(-6)}catch(t){return"none"}})}else{var c=w.createElement("i");c.title="Rapha\u00ebl Colour Picker";c.style.display="none";w.body.appendChild(c);ka=m(function(b){c.style.color=b;return w.defaultView.getComputedStyle(c,"").getPropertyValue("color")})}return ka(b)},Ga=function(){return"hsb("+[this.h,this.s,this.b]+")"},kb=function(){return"hsl("+[this.h,this.s,this.l]+")"},lb=function(){return this.hex};d.hsb2rgb=function(b,e,g,
n){if(d.is(b,"object")&&"h"in b&&"s"in b&&"b"in b)g=b.b,e=b.s,b=b.h,n=b.o;return d.hsl2rgb(b,e,g/2,n)};d.hsl2rgb=function(b,e,g,n){if(d.is(b,"object")&&"h"in b&&"s"in b&&"l"in b)g=b.l,e=b.s,b=b.h;if(b>1||e>1||g>1)b/=360,e/=100,g/=100;var t={},f=["r","g","b"],a;if(e){g<0.5?a=g*(1+e):a=g+e-g*e;for(var e=2*g-a,c=0;c<3;c++)g=b+1/3*-(c-1),g<0&&g++,g>1&&g--,g*6<1?t[f[c]]=e+(a-e)*6*g:g*2<1?t[f[c]]=a:g*3<2?t[f[c]]=e+(a-e)*(2/3-g)*6:t[f[c]]=e}else t={r:g,g:g,b:g};t.r*=255;t.g*=255;t.b*=255;t.hex="#"+(16777216|
t.b|t.g<<8|t.r<<16).toString(16).slice(1);d.is(n,"finite")&&(t.opacity=n);t.toString=lb;return t};d.rgb2hsb=function(b,e,g){if(e==null&&d.is(b,"object")&&"r"in b&&"g"in b&&"b"in b)g=b.b,e=b.g,b=b.r;if(e==null&&d.is(b,"string"))g=d.getRGB(b),b=g.r,e=g.g,g=g.b;if(b>1||e>1||g>1)b/=255,e/=255,g/=255;var n=K(b,e,g),t=T(b,e,g),f;if(t==n)return{h:0,s:0,b:n,toString:Ga};t=n-t;b==n?f=(e-g)/t:e==n?f=2+(g-b)/t:f=4+(b-e)/t;f/=6;f<0&&f++;f>1&&f--;return{h:f,s:t/n,b:n,toString:Ga}};d.rgb2hsl=function(b,e,g){if(e==
null&&d.is(b,"object")&&"r"in b&&"g"in b&&"b"in b)g=b.b,e=b.g,b=b.r;if(e==null&&d.is(b,"string"))g=d.getRGB(b),b=g.r,e=g.g,g=g.b;if(b>1||e>1||g>1)b/=255,e/=255,g/=255;var n=K(b,e,g),t=T(b,e,g),f,a=(n+t)/2;if(t==n)b={h:0,s:0,l:a};else{var c=n-t;b==n?f=(e-g)/c:e==n?f=2+(g-b)/c:f=4+(b-e)/c;f/=6;f<0&&f++;f>1&&f--;b={h:f,s:a<0.5?c/(n+t):c/(2-n-t),l:a}}b.toString=kb;return b};d._path2string=function(){return this.join(",").replace(gb,"$1")};d.getRGB=m(function(b){if(!b||(b=a(b)).indexOf("-")+1)return{r:-1,
g:-1,b:-1,hex:"none",error:1};if(b=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(fb[q](b.toLowerCase().substring(0,2))||b.charAt()=="#")&&(b=ka(b));var e,g,n,t,f;if(b=b.match(bb)){b[2]&&(n=aa(b[2].substring(5),16),g=aa(b[2].substring(3,5),16),e=aa(b[2].substring(1,3),16));b[3]&&(n=aa((f=b[3].charAt(3))+f,16),g=aa((f=b[3].charAt(2))+f,16),e=aa((f=b[3].charAt(1))+f,16));b[4]&&(f=b[4].split(ua),e=H(f[0]),f[0].slice(-1)=="%"&&(e*=2.55),g=H(f[1]),f[1].slice(-1)=="%"&&(g*=2.55),n=H(f[2]),f[2].slice(-1)==
"%"&&(n*=2.55),b[1].toLowerCase().slice(0,4)=="rgba"&&(t=H(f[3])),f[3]&&f[3].slice(-1)=="%"&&(t/=100));if(b[5])return f=b[5].split(ua),e=H(f[0]),f[0].slice(-1)=="%"&&(e*=2.55),g=H(f[1]),f[1].slice(-1)=="%"&&(g*=2.55),n=H(f[2]),f[2].slice(-1)=="%"&&(n*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="\u00b0")&&(e/=360),b[1].toLowerCase().slice(0,4)=="hsba"&&(t=H(f[3])),f[3]&&f[3].slice(-1)=="%"&&(t/=100),d.hsb2rgb(e,g,n,t);if(b[6])return f=b[6].split(ua),e=H(f[0]),f[0].slice(-1)=="%"&&(e*=2.55),g=H(f[1]),
f[1].slice(-1)=="%"&&(g*=2.55),n=H(f[2]),f[2].slice(-1)=="%"&&(n*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="\u00b0")&&(e/=360),b[1].toLowerCase().slice(0,4)=="hsla"&&(t=H(f[3])),f[3]&&f[3].slice(-1)=="%"&&(t/=100),d.hsl2rgb(e,g,n,t);b={r:e,g:g,b:n};b.hex="#"+(16777216|n|g<<8|e<<16).toString(16).slice(1);d.is(t,"finite")&&(b.opacity=t);return b}return{r:-1,g:-1,b:-1,hex:"none",error:1}},d);d.getColor=function(b){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:b||0.75},e=this.hsb2rgb(b.h,
b.s,b.b);b.h+=0.075;if(b.h>1)b.h=0,b.s-=0.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b});return e.hex};d.getColor.reset=function(){delete this.start};d.parsePathString=m(function(b){if(!b)return null;var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},g=[];d.is(b,x)&&d.is(b[0],x)&&(g=la(b));g[r]||a(b).replace(hb,function(b,t,f){var a=[],b=M.call(t);f.replace(ib,function(b,e){e&&a[N](+e)});b=="m"&&a[r]>2&&(g[N]([t].concat(a.splice(0,2))),b="l",t=t=="m"?"l":"L");for(;a[r]>=e[b];)if(g[N]([t].concat(a.splice(0,
e[b]))),!e[b])break});g[C]=d._path2string;return g});d.findDotsAtSegment=function(b,e,g,n,t,f,a,c,i){var d=1-i,k=j(d,3)*b+j(d,2)*3*i*g+d*3*i*i*t+j(i,3)*a,d=j(d,3)*e+j(d,2)*3*i*n+d*3*i*i*f+j(i,3)*c,v=b+2*i*(g-b)+i*i*(t-2*g+b),h=e+2*i*(n-e)+i*i*(f-2*n+e),l=g+2*i*(t-g)+i*i*(a-2*t+g),r=n+2*i*(f-n)+i*i*(c-2*f+n),b=(1-i)*b+i*g,e=(1-i)*e+i*n,t=(1-i)*t+i*a,f=(1-i)*f+i*c,c=90-u.atan((v-l)/(h-r))*180/p;(v>l||h<r)&&(c+=180);return{x:k,y:d,m:{x:v,y:h},n:{x:l,y:r},start:{x:b,y:e},end:{x:t,y:f},alpha:c}};var na=
m(function(b){if(!b)return{x:0,y:0,width:0,height:0};for(var b=ma(b),e=0,g=0,n=[],t=[],f,a=0,c=b[r];a<c;a++)f=b[a],f[0]=="M"?(e=f[1],g=f[2],n[N](e),t[N](g)):(e=mb(e,g,f[1],f[2],f[3],f[4],f[5],f[6]),n=n.concat(e.min.x,e.max.x),t=t.concat(e.min.y,e.max.y),e=f[5],g=f[6]);b=T[F](0,n);f=T[F](0,t);return{x:b,y:f,width:K[F](0,n)-b,height:K[F](0,t)-f}}),la=function(b){var e=[];if(!d.is(b,x)||!d.is(b&&b[0],x))b=d.parsePathString(b);for(var g=0,n=b[r];g<n;g++){e[g]=[];for(var t=0,f=b[g][r];t<f;t++)e[g][t]=
b[g][t]}e[C]=d._path2string;return e},va=m(function(b){if(!d.is(b,x)||!d.is(b&&b[0],x))b=d.parsePathString(b);var e=[],g=0,n=0,t=0,f=0,a=0;b[0][0]=="M"&&(g=b[0][1],n=b[0][2],t=g,f=n,a++,e[N](["M",g,n]));for(var c=b[r];a<c;a++){var i=e[a]=[],o=b[a];if(o[0]!=M.call(o[0]))switch(i[0]=M.call(o[0]),i[0]){case "a":i[1]=o[1];i[2]=o[2];i[3]=o[3];i[4]=o[4];i[5]=o[5];i[6]=+(o[6]-g).toFixed(3);i[7]=+(o[7]-n).toFixed(3);break;case "v":i[1]=+(o[1]-n).toFixed(3);break;case "m":t=o[1],f=o[2];default:for(var j=1,
k=o[r];j<k;j++)i[j]=+(o[j]-(j%2?g:n)).toFixed(3)}else{e[a]=[];o[0]=="m"&&(t=o[1]+g,f=o[2]+n);i=0;for(j=o[r];i<j;i++)e[a][i]=o[i]}o=e[a][r];switch(e[a][0]){case "z":g=t;n=f;break;case "h":g+=+e[a][o-1];break;case "v":n+=+e[a][o-1];break;default:g+=+e[a][o-2],n+=+e[a][o-1]}}e[C]=d._path2string;return e},0,la),ea=m(function(b){if(!d.is(b,x)||!d.is(b&&b[0],x))b=d.parsePathString(b);var e=[],g=0,n=0,t=0,f=0,a=0;b[0][0]=="M"&&(g=+b[0][1],n=+b[0][2],t=g,f=n,a++,e[0]=["M",g,n]);for(var c=b[r];a<c;a++){var i=
e[a]=[],o=b[a];if(o[0]!=ia.call(o[0]))switch(i[0]=ia.call(o[0]),i[0]){case "A":i[1]=o[1];i[2]=o[2];i[3]=o[3];i[4]=o[4];i[5]=o[5];i[6]=+(o[6]+g);i[7]=+(o[7]+n);break;case "V":i[1]=+o[1]+n;break;case "H":i[1]=+o[1]+g;break;case "M":t=+o[1]+g,f=+o[2]+n;default:for(var j=1,k=o[r];j<k;j++)i[j]=+o[j]+(j%2?g:n)}else{j=0;for(k=o[r];j<k;j++)e[a][j]=o[j]}switch(i[0]){case "Z":g=t;n=f;break;case "H":g=i[1];break;case "V":n=i[1];break;case "M":t=e[a][e[a][r]-2],f=e[a][e[a][r]-1];default:g=e[a][e[a][r]-2],n=e[a][e[a][r]-
1]}}e[C]=d._path2string;return e},null,la),Ha=function(b,e,g,n,a,f){var i=1/3,c=2/3;return[i*b+c*g,i*e+c*n,i*a+c*g,i*f+c*n,a,f]},Ia=function(b,e,g,n,a,f,c,d,j,o){var k=p*120/180,v=p/180*(+a||0),h=[],l,x=m(function(b,e,g){var f=b*u.cos(g)-e*u.sin(g),b=b*u.sin(g)+e*u.cos(g);return{x:f,y:b}});if(o)q=o[0],l=o[1],f=o[2],C=o[3];else{l=x(b,e,-v);b=l.x;e=l.y;l=x(d,j,-v);d=l.x;j=l.y;u.cos(p/180*a);u.sin(p/180*a);l=(b-d)/2;q=(e-j)/2;C=l*l/(g*g)+q*q/(n*n);C>1&&(C=u.sqrt(C),g*=C,n*=C);var C=g*g,da=n*n,C=(f==
c?-1:1)*u.sqrt(i((C*da-C*q*q-da*l*l)/(C*q*q+da*l*l))),f=C*g*q/n+(b+d)/2,C=C*-n*l/g+(e+j)/2,q=u.asin(((e-C)/n).toFixed(9));l=u.asin(((j-C)/n).toFixed(9));q=b<f?p-q:q;l=d<f?p-l:l;q<0&&(q=p*2+q);l<0&&(l=p*2+l);c&&q>l&&(q-=p*2);!c&&l>q&&(l-=p*2)}if(i(l-q)>k){var h=l,da=d,K=j;l=q+k*(c&&l>q?1:-1);d=f+g*u.cos(l);j=C+n*u.sin(l);h=Ia(d,j,g,n,a,0,c,da,K,[l,h,f,C])}f=l-q;a=u.cos(q);k=u.sin(q);c=u.cos(l);l=u.sin(l);f=u.tan(f/4);g=4/3*g*f;f*=4/3*n;n=[b,e];b=[b+g*k,e-f*a];e=[d+g*l,j-f*c];d=[d,j];b[0]=2*n[0]-b[0];
b[1]=2*n[1]-b[1];if(o)return[b,e,d].concat(h);h=[b,e,d].concat(h)[y]().split(",");o=[];d=0;for(j=h[r];d<j;d++)o[d]=d%2?x(h[d-1],h[d],v).y:x(h[d],h[d+1],v).x;return o},oa=function(b,e,g,n,a,f,c,i,d){var o=1-d;return{x:j(o,3)*b+j(o,2)*3*d*g+o*3*d*d*a+j(d,3)*c,y:j(o,3)*e+j(o,2)*3*d*n+o*3*d*d*f+j(d,3)*i}},mb=m(function(b,e,g,n,a,f,c,d){var j=a-2*g+b-(c-2*a+g),o=2*(g-b)-2*(a-g),k=b-g,p=(-o+u.sqrt(o*o-4*j*k))/2/j,j=(-o-u.sqrt(o*o-4*j*k))/2/j,v=[e,d],l=[b,c];i(p)>"1e12"&&(p=0.5);i(j)>"1e12"&&(j=0.5);p>0&&
p<1&&(p=oa(b,e,g,n,a,f,c,d,p),l[N](p.x),v[N](p.y));j>0&&j<1&&(p=oa(b,e,g,n,a,f,c,d,j),l[N](p.x),v[N](p.y));j=f-2*n+e-(d-2*f+n);o=2*(n-e)-2*(f-n);k=e-n;p=(-o+u.sqrt(o*o-4*j*k))/2/j;j=(-o-u.sqrt(o*o-4*j*k))/2/j;i(p)>"1e12"&&(p=0.5);i(j)>"1e12"&&(j=0.5);p>0&&p<1&&(p=oa(b,e,g,n,a,f,c,d,p),l[N](p.x),v[N](p.y));j>0&&j<1&&(p=oa(b,e,g,n,a,f,c,d,j),l[N](p.x),v[N](p.y));return{min:{x:T[F](0,l),y:T[F](0,v)},max:{x:K[F](0,l),y:K[F](0,v)}}}),ma=m(function(b,e){var g=ea(b),n=e&&ea(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,
qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=function(b,e){var g,f;if(!b)return["C",e.x,e.y,e.x,e.y,e.x,e.y];!(b[0]in{T:1,Q:1})&&(e.qx=e.qy=null);switch(b[0]){case "M":e.X=b[1];e.Y=b[2];break;case "A":b=["C"].concat(Ia[F](0,[e.x,e.y].concat(b.slice(1))));break;case "S":g=e.x+(e.x-(e.bx||e.x));f=e.y+(e.y-(e.by||e.y));b=["C",g,f].concat(b.slice(1));break;case "T":e.qx=e.x+(e.x-(e.qx||e.x));e.qy=e.y+(e.y-(e.qy||e.y));b=["C"].concat(Ha(e.x,e.y,e.qx,e.qy,b[1],b[2]));break;case "Q":e.qx=
b[1];e.qy=b[2];b=["C"].concat(Ha(e.x,e.y,b[1],b[2],b[3],b[4]));break;case "L":b=["C"].concat([e.x,e.y,b[1],b[2],b[1],b[2]]);break;case "H":b=["C"].concat([e.x,e.y,b[1],e.y,b[1],e.y]);break;case "V":b=["C"].concat([e.x,e.y,e.x,b[1],e.x,b[1]]);break;case "Z":b=["C"].concat([e.x,e.y,e.X,e.Y,e.X,e.Y])}return b},i=function(b,e){if(b[e][r]>7){b[e].shift();for(var f=b[e];f[r];)b.splice(e++,0,["C"].concat(f.splice(0,6)));b.splice(e,1);k=K(g[r],n&&n[r]||0)}},d=function(b,e,f,a,c){if(b&&e&&b[c][0]=="M"&&e[c][0]!=
"M")e.splice(c,0,["M",a.x,a.y]),f.bx=0,f.by=0,f.x=b[c][1],f.y=b[c][2],k=K(g[r],n&&n[r]||0)},j=0,k=K(g[r],n&&n[r]||0);for(;j<k;j++){g[j]=c(g[j],a);i(g,j);n&&(n[j]=c(n[j],f));n&&i(n,j);d(g,n,a,f,j);d(n,g,f,a,j);var p=g[j],v=n&&n[j],l=p[r],h=n&&v[r];a.x=p[l-2];a.y=p[l-1];a.bx=H(p[l-4])||a.x;a.by=H(p[l-3])||a.y;f.bx=n&&(H(v[h-4])||f.x);f.by=n&&(H(v[h-3])||f.y);f.x=n&&v[h-2];f.y=n&&v[h-1]}return n?[g,n]:g},null,la),Ja=m(function(b){for(var e=[],g=0,n=b[r];g<n;g++){var a={},f=b[g].match(/^([^:]*):?([\d\.]*)/);
a.color=d.getRGB(f[1]);if(a.color.error)return null;a.color=a.color.hex;f[2]&&(a.offset=f[2]+"%");e[N](a)}g=1;for(n=e[r]-1;g<n;g++)if(!e[g].offset){b=H(e[g-1].offset||0);f=0;for(a=g+1;a<n;a++)if(e[a].offset){f=e[a].offset;break}f||(f=100,a=n);f=H(f);for(f=(f-b)/(a-g+1);g<a;g++)b+=f,e[g].offset=b+"%"}return e}),Ka=function(b,e,g,n){if(d.is(b,"string")||d.is(b,"object")){if(b=d.is(b,"string")?w.getElementById(b):b,b.tagName)return e==null?{container:b,width:b.style.pixelWidth||b.offsetWidth,height:b.style.pixelHeight||
b.offsetHeight}:{container:b,width:e,height:g}}else return{container:1,x:b,y:e,width:g,height:n}},wa=function(b,e){var g=this,n;for(n in e)if(e[q](n)&&!(n in b))switch(typeof e[n]){case "function":(function(e){b[n]=b===g?e:function(){return e[F](g,arguments)}})(e[n]);break;case "object":b[n]=b[n]||{};wa.call(this,b[n],e[n]);break;default:b[n]=e[n]}},ca=function(b,e){b==e.top&&(e.top=b.prev);b==e.bottom&&(e.bottom=b.next);b.next&&(b.next.prev=b.prev);b.prev&&(b.prev.next=b.next)},La=function(b,e){if(e.top!==
b)ca(b,e),b.next=null,b.prev=e.top,e.top.next=b,e.top=b},Ma=function(b,e){if(e.bottom!==b)ca(b,e),b.next=e.bottom,b.prev=null,e.bottom.prev=b,e.bottom=b},Na=function(b,e,g){ca(b,g);e==g.top&&(g.top=b);e.next&&(e.next.prev=b);b.next=e.next;b.prev=e;e.next=b},Oa=function(b,e,g){ca(b,g);e==g.bottom&&(g.bottom=b);e.prev&&(e.prev.next=b);b.prev=e.prev;e.prev=b;b.next=e},Pa=function(b){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+b+"\u201d of removed object");}};d.pathToRelative=
va;if(d.svg){J.svgns="http://www.w3.org/2000/svg";J.xlink="http://www.w3.org/1999/xlink";var U=function(b){return+b+(~~b===b)*0.5},A=function(b,e){if(e)for(var g in e)e[q](g)&&b.setAttribute(g,a(e[g]));else return b=w.createElementNS(J.svgns,b),b.style.webkitTapHighlightColor="rgba(0,0,0,0)",b};d[C]=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var Qa=function(b,e){var g=A("path");e.canvas&&e.canvas.appendChild(g);g=new O(g,e);g.type="path";ba(g,{fill:"none",
stroke:"#000",path:b});return g},fa=function(b,e,g){var n="linear",c=0.5,f=0.5,d=b.style,e=a(e).replace(Fa,function(b,e,g){n="radial";e&&g&&(c=H(e),f=H(g),b=(f>0.5)*2-1,j(c-0.5,2)+j(f-0.5,2)>0.25&&(f=u.sqrt(0.25-j(c-0.5,2))*b+0.5)&&f!=0.5&&(f=f.toFixed(5)-1.0E-5*b));return""}),e=e.split(/\s*\-\s*/);if(n=="linear"){var k=e.shift(),k=-H(k);if(isNaN(k))return null;var k=[0,0,u.cos(k*p/180),u.sin(k*p/180)],v=1/(K(i(k[2]),i(k[3]))||1);k[2]*=v;k[3]*=v;k[2]<0&&(k[0]=-k[2],k[2]=0);k[3]<0&&(k[1]=-k[3],k[3]=
0)}e=Ja(e);if(!e)return null;v=b.getAttribute("fill");(v=v.match(/^url\(#(.*)\)$/))&&g.defs.removeChild(w.getElementById(v[1]));v=A(n+"Gradient");v.id=h();A(v,n=="radial"?{fx:c,fy:f}:{x1:k[0],y1:k[1],x2:k[2],y2:k[3]});g.defs.appendChild(v);g=0;for(k=e[r];g<k;g++){var o=A("stop");A(o,{offset:e[g].offset?e[g].offset:g?"100%":"0%","stop-color":e[g].color||"#fff"});v.appendChild(o)}A(b,{fill:"url(#"+v.id+")",opacity:1,"fill-opacity":1});d.fill="";d.opacity=1;return d.fillOpacity=1},xa=function(b){var e=
b.getBBox();A(b.pattern,{patternTransform:d.format("translate({0},{1})",e.x,e.y)})},ba=function(b,e){var g={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},n=b.node,c=b.attrs,f=b.rotate(),i=function(b,f){if(f=g[M.call(f)]){for(var a=b.attrs["stroke-width"]||"1",c={round:a,square:a,butt:0}[b.attrs["stroke-linecap"]||e["stroke-linecap"]]||0,i=[],d=f[r];d--;)i[d]=f[d]*a+(d%2?1:-1)*c;A(n,{"stroke-dasharray":i[y](",")})}};
e[q]("rotation")&&(f=e.rotation);var j=a(f).split(E);j.length-1?(j[1]=+j[1],j[2]=+j[2]):j=null;H(f)&&b.rotate(0,!0);for(var k in e)if(e[q](k)&&ja[q](k)){var o=e[k];c[k]=o;switch(k){case "blur":b.blur(o);break;case "rotation":b.rotate(o,!0);break;case "href":case "title":case "target":var p=n.parentNode;if(M.call(p.tagName)!="a"){var v=A("a");p.insertBefore(v,n);v.appendChild(n);p=v}k=="target"&&o=="blank"?p.setAttributeNS(b.paper.xlink,"show","new"):p.setAttributeNS(b.paper.xlink,k,o);break;case "cursor":n.style.cursor=
o;break;case "clip-rect":p=a(o).split(E);if(p[r]==4){b.clip&&b.clip.parentNode.parentNode.removeChild(b.clip.parentNode);var l=A("clipPath"),v=A("rect");l.id=h();A(v,{x:p[0],y:p[1],width:p[2],height:p[3]});l.appendChild(v);b.paper.defs.appendChild(l);A(n,{"clip-path":"url(#"+l.id+")"});b.clip=v}o||((o=w.getElementById(n.getAttribute("clip-path").replace(/(^url\(#|\)$)/g,"")))&&o.parentNode.removeChild(o),A(n,{"clip-path":""}),delete b.clip);break;case "path":b.type=="path"&&A(n,{d:o?c.path=ea(o):
"M0,0"});break;case "width":if(n.setAttribute(k,o),c.fx)k="x",o=c.x;else break;case "x":c.fx&&(o=-c.x-(c.width||0));case "rx":if(k=="rx"&&b.type=="rect")break;case "cx":j&&(k=="x"||k=="cx")&&(j[1]+=o-c[k]);n.setAttribute(k,o);b.pattern&&xa(b);break;case "height":if(n.setAttribute(k,o),c.fy)k="y",o=c.y;else break;case "y":c.fy&&(o=-c.y-(c.height||0));case "ry":if(k=="ry"&&b.type=="rect")break;case "cy":j&&(k=="y"||k=="cy")&&(j[2]+=o-c[k]);n.setAttribute(k,o);b.pattern&&xa(b);break;case "r":b.type==
"rect"?A(n,{rx:o,ry:o}):n.setAttribute(k,o);break;case "src":b.type=="image"&&n.setAttributeNS(b.paper.xlink,"href",o);break;case "stroke-width":n.style.strokeWidth=o;n.setAttribute(k,o);c["stroke-dasharray"]&&i(b,c["stroke-dasharray"]);break;case "stroke-dasharray":i(b,o);break;case "translation":o=a(o).split(E);o[0]=+o[0]||0;o[1]=+o[1]||0;j&&(j[1]+=o[0],j[2]+=o[1]);pa.call(b,o[0],o[1]);break;case "scale":o=a(o).split(E);b.scale(+o[0]||1,+o[1]||+o[0]||1,isNaN(H(o[2]))?null:+o[2],isNaN(H(o[3]))?null:
+o[3]);break;case "fill":if(p=a(o).match(Ea)){var l=A("pattern"),m=A("image");l.id=h();A(l,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});A(m,{x:0,y:0});m.setAttributeNS(b.paper.xlink,"href",p[1]);l.appendChild(m);o=w.createElement("img");o.style.cssText="position:absolute;left:-9999em;top-9999em";o.onload=function(){A(l,{width:this.offsetWidth,height:this.offsetHeight});A(m,{width:this.offsetWidth,height:this.offsetHeight});w.body.removeChild(this);b.paper.safari()};w.body.appendChild(o);
o.src=p[1];b.paper.defs.appendChild(l);n.style.fill="url(#"+l.id+")";A(n,{fill:"url(#"+l.id+")"});b.pattern=l;b.pattern&&xa(b);break}p=d.getRGB(o);if(p.error)if(({circle:1,ellipse:1}[q](b.type)||a(o).charAt()!="r")&&fa(n,o,b.paper)){c.gradient=o;c.fill="none";break}else delete e.gradient,delete c.gradient,!d.is(c.opacity,"undefined")&&d.is(e.opacity,"undefined")&&A(n,{opacity:c.opacity}),!d.is(c["fill-opacity"],"undefined")&&d.is(e["fill-opacity"],"undefined")&&A(n,{"fill-opacity":c["fill-opacity"]});
p[q]("opacity")&&A(n,{"fill-opacity":p.opacity>1?p.opacity/100:p.opacity});case "stroke":p=d.getRGB(o);n.setAttribute(k,p.hex);k=="stroke"&&p[q]("opacity")&&A(n,{"stroke-opacity":p.opacity>1?p.opacity/100:p.opacity});break;case "gradient":(({circle:1,ellipse:1})[q](b.type)||a(o).charAt()!="r")&&fa(n,o,b.paper);break;case "opacity":c.gradient&&!c[q]("stroke-opacity")&&A(n,{"stroke-opacity":o>1?o/100:o});case "fill-opacity":if(c.gradient){if(p=w.getElementById(n.getAttribute("fill").replace(/^url\(#|\)$/g,
"")))p=p.getElementsByTagName("stop"),p[p[r]-1].setAttribute("stop-opacity",o);break}default:k=="font-size"&&(o=aa(o,10)+"px"),p=k.replace(/(\-.)/g,function(b){return ia.call(b.substring(1))}),n.style[p]=o,n.setAttribute(k,o)}}nb(b,e);j?b.rotate(j.join(I)):H(f)&&b.rotate(f,!0)},nb=function(b,e){if(!(b.type!="text"||!e[q]("text")&&!e[q]("font")&&!e[q]("font-size")&&!e[q]("x")&&!e[q]("y"))){var g=b.attrs,n=b.node,c=n.firstChild?aa(w.defaultView.getComputedStyle(n.firstChild,"").getPropertyValue("font-size"),
10):10;if(e[q]("text")){for(g.text=e.text;n.firstChild;)n.removeChild(n.firstChild);for(var f=a(e.text).split("\n"),i=0,j=f[r];i<j;i++)if(f[i]){var k=A("tspan");i&&A(k,{dy:c*1.2,x:g.x});k.appendChild(w.createTextNode(f[i]));n.appendChild(k)}}else{f=n.getElementsByTagName("tspan");i=0;for(j=f[r];i<j;i++)i&&A(f[i],{dy:c*1.2,x:g.x})}A(n,{y:g.y});c=b.getBBox();(c=g.y-(c.y+c.height/2))&&d.is(c,"finite")&&A(n,{y:g.y+c})}},O=function(b,e){this[0]=b;this.id=d._oid++;this.node=b;b.raphael=this;this.paper=
e;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!e.bottom&&(e.bottom=this);(this.prev=e.top)&&(e.top.next=this);e.top=this;this.next=null},L=O[D];O[D].rotate=function(b,e,g){if(this.removed)return this;if(b==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][y](I);return this._.rt.deg}var n=this.getBBox(),b=a(b).split(E);b[r]-1&&(e=H(b[1]),g=H(b[2]));b=H(b[0]);e!=null&&e!==!1?this._.rt.deg=b:this._.rt.deg+=b;g==null&&(e=null);
this._.rt.cx=e;this._.rt.cy=g;e=e==null?n.x+n.width/2:e;g=g==null?n.y+n.height/2:g;this._.rt.deg?(this.transformations[0]=d.format("rotate({0} {1} {2})",this._.rt.deg,e,g),this.clip&&A(this.clip,{transform:d.format("rotate({0} {1} {2})",-this._.rt.deg,e,g)})):(this.transformations[0]="",this.clip&&A(this.clip,{transform:""}));A(this.node,{transform:this.transformations[y](I)});return this};O[D].hide=function(){!this.removed&&(this.node.style.display="none");return this};O[D].show=function(){!this.removed&&
(this.node.style.display="");return this};O[D].remove=function(){if(!this.removed){ca(this,this.paper);this.node.parentNode.removeChild(this.node);for(var b in this)delete this[b];this.removed=!0}};O[D].getBBox=function(){if(this.removed)return this;if(this.type=="path")return na(this.attrs.path);if(this.node.style.display=="none"){this.show();var b=!0}var e={};try{e=this.node.getBBox()}catch(g){}finally{e=e||{}}if(this.type=="text")for(var e={x:e.x,y:Infinity,width:0,height:0},n=0,a=this.node.getNumberOfChars();n<
a;n++){var f=this.node.getExtentOfChar(n);f.y<e.y&&(e.y=f.y);f.y+f.height-e.y>e.height&&(e.height=f.y+f.height-e.y);f.x+f.width-e.x>e.width&&(e.width=f.x+f.width-e.x)}b&&this.hide();return e};O[D].attr=function(b,e){if(this.removed)return this;if(b==null){var g={},n;for(n in this.attrs)this.attrs[q](n)&&(g[n]=this.attrs[n]);this._.rt.deg&&(g.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(g.scale=this.scale());g.gradient&&g.fill=="none"&&(g.fill=g.gradient)&&delete g.gradient;return g}if(e==
null&&d.is(b,"string")){if(b=="translation")return pa.call(this);if(b=="rotation")return this.rotate();if(b=="scale")return this.scale();if(b=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[b]}if(e==null&&d.is(b,x)){n={};for(var g=0,a=b.length;g<a;g++)n[b[g]]=this.attr(b[g]);return n}e!=null?(g={},g[b]=e):b!=null&&d.is(b,"object")&&(g=b);for(a in this.paper.customAttributes)if(this.paper.customAttributes[q](a)&&g[q](a)&&d.is(this.paper.customAttributes[a],
"function"))for(var f in n=this.paper.customAttributes[a].apply(this,[].concat(g[a])),this.attrs[a]=g[a],n)n[q](f)&&(g[f]=n[f]);ba(this,g);return this};O[D].toFront=function(){if(this.removed)return this;this.node.parentNode.appendChild(this.node);var b=this.paper;b.top!=this&&La(this,b);return this};O[D].toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Ma(this,this.paper));return this};
O[D].insertAfter=function(b){if(this.removed)return this;var e=b.node||b[b.length-1].node;e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node);Na(this,b,this.paper);return this};O[D].insertBefore=function(b){if(this.removed)return this;var e=b.node||b[0].node;e.parentNode.insertBefore(this.node,e);Oa(this,b,this.paper);return this};O[D].blur=function(b){if(+b!==0){var e=A("filter"),g=A("feGaussianBlur");this.attrs.blur=b;e.id=h();A(g,{stdDeviation:+b||
1.5});e.appendChild(g);this.paper.defs.appendChild(e);this._blur=e;A(this.node,{filter:"url(#"+e.id+")"})}else this._blur&&(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};var Ra=function(b,e,g,n){var a=A("circle");b.canvas&&b.canvas.appendChild(a);b=new O(a,b);b.attrs={cx:e,cy:g,r:n,fill:"none",stroke:"#000"};b.type="circle";A(a,b.attrs);return b},Sa=function(b,e,g,a,c,f){var i=A("rect");b.canvas&&b.canvas.appendChild(i);
b=new O(i,b);b.attrs={x:e,y:g,width:a,height:c,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"};b.type="rect";A(i,b.attrs);return b},Ta=function(b,e,g,a,c){var f=A("ellipse");b.canvas&&b.canvas.appendChild(f);b=new O(f,b);b.attrs={cx:e,cy:g,rx:a,ry:c,fill:"none",stroke:"#000"};b.type="ellipse";A(f,b.attrs);return b},Ua=function(b,e,g,a,c,f){var i=A("image");A(i,{x:g,y:a,width:c,height:f,preserveAspectRatio:"none"});i.setAttributeNS(b.xlink,"href",e);b.canvas&&b.canvas.appendChild(i);b=new O(i,b);
b.attrs={x:g,y:a,width:c,height:f,src:e};b.type="image";return b},Va=function(b,e,g,a){var c=A("text");A(c,{x:e,y:g,"text-anchor":"middle"});b.canvas&&b.canvas.appendChild(c);b=new O(c,b);b.attrs={x:e,y:g,"text-anchor":"middle",text:a,font:ja.font,stroke:"none",fill:"#000"};b.type="text";ba(b,b.attrs);return b},Wa=function(b,e){this.width=b||this.width;this.height=e||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);return this},sa=function(){var b=
Ka[F](0,arguments),e=b&&b.container,g=b.x,a=b.y,c=b.width,b=b.height;if(!e)throw Error("SVG container not found.");var f=A("svg"),g=g||0,a=a||0,c=c||512,b=b||342;A(f,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:c,height:b});e==1?(f.style.cssText="position:absolute;left:"+g+"px;top:"+a+"px",w.body.appendChild(f)):e.firstChild?e.insertBefore(f,e.firstChild):e.appendChild(f);e=new R;e.width=c;e.height=b;e.canvas=f;wa.call(e,e,d.fn);e.clear();return e};J.clear=function(){for(var b=this.canvas;b.firstChild;)b.removeChild(b.firstChild);
this.bottom=this.top=null;(this.desc=A("desc")).appendChild(w.createTextNode("Created with Rapha\u00ebl"));b.appendChild(this.desc);b.appendChild(this.defs=A("defs"))};J.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=Pa(b)}}if(d.vml){var Xa={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},ob=/([clmz]),?([^clmz]*)/gi,pb=/ progid:\S+Blur\([^\)]+\)/g,qb=/-?[^,\s-]+/g,ga=1E3+I+1E3,ha={path:1,rect:1},rb=function(b){var e=/[ahqstv]/ig,
g=ea;a(b).match(e)&&(g=ma);e=/[clmz]/g;if(g==ea&&!a(b).match(e))return b=a(b).replace(ob,function(b,e,g){var f=[],a=M.call(e)=="m",c=Xa[e];g.replace(qb,function(b){a&&f[r]==2&&(c+=f+Xa[e=="m"?"l":"L"],f=[]);f[N](U(b*10))});return c+f});for(var e=g(b),n,b=[],c=0,f=e[r];c<f;c++){g=e[c];n=M.call(e[c][0]);n=="z"&&(n="x");for(var i=1,d=g[r];i<d;i++)n+=U(g[i]*10)+(i!=d-1?",":"");b[N](n)}return b[y](I)};d[C]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+
this.version};Qa=function(b,e){var g=V("group");g.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";g.coordsize=e.coordsize;g.coordorigin=e.coordorigin;var a=V("shape"),c=a.style;c.width=e.width+"px";c.height=e.height+"px";a.coordsize=ga;a.coordorigin=e.coordorigin;g.appendChild(a);a=new O(a,g,e);c={fill:"none",stroke:"#000"};b&&(c.path=b);a.type="path";a.path=[];a.Path="";ba(a,c);e.canvas.appendChild(g);return a};ba=function(b,e){b.attrs=b.attrs||{};var g=b.node,
c=b.attrs,i=g.style,f;f=(e.x!=c.x||e.y!=c.y||e.width!=c.width||e.height!=c.height||e.r!=c.r)&&b.type=="rect";for(var j in e)e[q](j)&&(c[j]=e[j]);if(f)c.path=Ya(c.x,c.y,c.width,c.height,c.r),b.X=c.x,b.Y=c.y,b.W=c.width,b.H=c.height;e.href&&(g.href=e.href);e.title&&(g.title=e.title);e.target&&(g.target=e.target);e.cursor&&(i.cursor=e.cursor);"blur"in e&&b.blur(e.blur);if(e.path&&b.type=="path"||f)g.path=rb(c.path);e.rotation!=null&&b.rotate(e.rotation,!0);e.translation&&(f=a(e.translation).split(E),
pa.call(b,f[0],f[1]),b._.rt.cx!=null&&(b._.rt.cx+=+f[0],b._.rt.cy+=+f[1],b.setBox(b.attrs,f[0],f[1])));e.scale&&(f=a(e.scale).split(E),b.scale(+f[0]||1,+f[1]||+f[0]||1,+f[2]||null,+f[3]||null));if("clip-rect"in e){f=a(e["clip-rect"]).split(E);if(f[r]==4){f[2]=+f[2]+ +f[0];f[3]=+f[3]+ +f[1];j=g.clipRect||w.createElement("div");var k=j.style,p=g.parentNode;k.clip=d.format("rect({1}px {2}px {3}px {0}px)",f);if(!g.clipRect)k.position="absolute",k.top=0,k.left=0,k.width=b.paper.width+"px",k.height=b.paper.height+
"px",p.parentNode.insertBefore(j,p),j.appendChild(p),g.clipRect=j}e["clip-rect"]||g.clipRect&&(g.clipRect.style.clip="")}b.type=="image"&&e.src&&(g.src=e.src);if(b.type=="image"&&e.opacity)g.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+e.opacity*100+")",i.filter=(g.filterMatrix||"")+(g.filterOpacity||"");e.font&&(i.font=e.font);e["font-family"]&&(i.fontFamily='"'+e["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"');e["font-size"]&&(i.fontSize=e["font-size"]);e["font-weight"]&&
(i.fontWeight=e["font-weight"]);e["font-style"]&&(i.fontStyle=e["font-style"]);if(e.opacity!=null||e["stroke-width"]!=null||e.fill!=null||e.stroke!=null||e["stroke-width"]!=null||e["stroke-opacity"]!=null||e["fill-opacity"]!=null||e["stroke-dasharray"]!=null||e["stroke-miterlimit"]!=null||e["stroke-linejoin"]!=null||e["stroke-linecap"]!=null){g=b.shape||g;f=g.getElementsByTagName("fill")&&g.getElementsByTagName("fill")[0];j=!1;!f&&(j=f=V("fill"));if("fill-opacity"in e||"opacity"in e)i=((+c["fill-opacity"]+
1||2)-1)*((+c.opacity+1||2)-1)*((+d.getRGB(e.fill).o+1||2)-1),i=T(K(i,0),1),f.opacity=i;e.fill&&(f.on=!0);if(f.on==null||e.fill=="none")f.on=!1;if(f.on&&e.fill)if(i=e.fill.match(Ea))f.src=i[1],f.type="tile";else if(f.color=d.getRGB(e.fill).hex,f.src="",f.type="solid",d.getRGB(e.fill).error&&(b.type in{circle:1,ellipse:1}||a(e.fill).charAt()!="r")&&fa(b,e.fill))c.fill="none",c.gradient=e.fill;j&&g.appendChild(f);f=g.getElementsByTagName("stroke")&&g.getElementsByTagName("stroke")[0];j=!1;!f&&(j=f=
V("stroke"));if(e.stroke&&e.stroke!="none"||e["stroke-width"]||e["stroke-opacity"]!=null||e["stroke-dasharray"]||e["stroke-miterlimit"]||e["stroke-linejoin"]||e["stroke-linecap"])f.on=!0;(e.stroke=="none"||f.on==null||e.stroke==0||e["stroke-width"]==0)&&(f.on=!1);i=d.getRGB(e.stroke);f.on&&e.stroke&&(f.color=i.hex);i=((+c["stroke-opacity"]+1||2)-1)*((+c.opacity+1||2)-1)*((+i.o+1||2)-1);k=(H(e["stroke-width"])||1)*0.75;i=T(K(i,0),1);e["stroke-width"]==null&&(k=c["stroke-width"]);e["stroke-width"]&&
(f.weight=k);k&&k<1&&(i*=k)&&(f.weight=1);f.opacity=i;e["stroke-linejoin"]&&(f.joinstyle=e["stroke-linejoin"]||"miter");f.miterlimit=e["stroke-miterlimit"]||8;e["stroke-linecap"]&&(f.endcap=e["stroke-linecap"]=="butt"?"flat":e["stroke-linecap"]=="square"?"square":"round");if(e["stroke-dasharray"])i={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},f.dashstyle=i[q](e["stroke-dasharray"])?
i[e["stroke-dasharray"]]:"";j&&g.appendChild(f)}if(b.type=="text")switch(i=b.paper.span.style,c.font&&(i.font=c.font),c["font-family"]&&(i.fontFamily=c["font-family"]),c["font-size"]&&(i.fontSize=c["font-size"]),c["font-weight"]&&(i.fontWeight=c["font-weight"]),c["font-style"]&&(i.fontStyle=c["font-style"]),b.node.string&&(b.paper.span.innerHTML=a(b.node.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>")),b.W=c.w=b.paper.span.offsetWidth,b.H=c.h=b.paper.span.offsetHeight,b.X=
c.x,b.Y=c.y+U(b.H/2),c["text-anchor"]){case "start":b.node.style["v-text-align"]="left";b.bbx=U(b.W/2);break;case "end":b.node.style["v-text-align"]="right";b.bbx=-U(b.W/2);break;default:b.node.style["v-text-align"]="center"}};fa=function(b,e){b.attrs=b.attrs||{};var g,c="linear",i=".5 .5";b.attrs.gradient=e;e=a(e).replace(Fa,function(b,e,g){c="radial";e&&g&&(e=H(e),g=H(g),j(e-0.5,2)+j(g-0.5,2)>0.25&&(g=u.sqrt(0.25-j(e-0.5,2))*((g>0.5)*2-1)+0.5),i=e+I+g);return""});e=e.split(/\s*\-\s*/);if(c=="linear"){var f=
e.shift(),f=-H(f);if(isNaN(f))return null}var d=Ja(e);if(!d)return null;b=b.shape||b.node;g=b.getElementsByTagName("fill")[0]||V("fill");!g.parentNode&&b.appendChild(g);if(d[r]){g.on=!0;g.method="none";g.color=d[0].color;g.color2=d[d[r]-1].color;for(var k=[],p=0,o=d[r];p<o;p++)d[p].offset&&k[N](d[p].offset+I+d[p].color);g.colors&&(g.colors.value=k[r]?k[y]():"0% "+g.color);c=="radial"?(g.type="gradientradial",g.focus="100%",g.focussize=i,g.focusposition=i):(g.type="gradient",g.angle=(270-f)%360)}return 1};
O=function(b,e,g){this[0]=b;this.id=d._oid++;this.node=b;b.raphael=this;this.Y=this.X=0;this.attrs={};this.Group=e;this.paper=g;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!g.bottom&&(g.bottom=this);(this.prev=g.top)&&(g.top.next=this);g.top=this;this.next=null};L=O[D];L.rotate=function(b,e,g){if(this.removed)return this;if(b==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][y](I);return this._.rt.deg}b=a(b).split(E);b[r]-1&&(e=H(b[1]),g=H(b[2]));b=H(b[0]);e!=null?this._.rt.deg=b:
this._.rt.deg+=b;g==null&&(e=null);this._.rt.cx=e;this._.rt.cy=g;this.setBox(this.attrs,e,g);this.Group.style.rotation=this._.rt.deg;return this};L.setBox=function(b,e,g){if(this.removed)return this;var c=this.Group.style,a=this.shape&&this.shape.style||this.node.style,b=b||{},f;for(f in b)b[q](f)&&(this.attrs[f]=b[f]);var e=e||this._.rt.cx,g=g||this._.rt.cy,i=this.attrs,d;switch(this.type){case "circle":b=i.cx-i.r;f=i.cy-i.r;d=i=i.r*2;break;case "ellipse":b=i.cx-i.rx;f=i.cy-i.ry;d=i.rx*2;i=i.ry*
2;break;case "image":b=+i.x;f=+i.y;d=i.width||0;i=i.height||0;break;case "text":this.textpath.v=["m",U(i.x),", ",U(i.y-2),"l",U(i.x)+1,", ",U(i.y-2)][y]("");b=i.x-U(this.W/2);f=i.y-this.H/2;d=this.W;i=this.H;break;case "rect":case "path":this.attrs.path?(i=na(this.attrs.path),b=i.x,f=i.y,d=i.width,i=i.height):(f=b=0,d=this.paper.width,i=this.paper.height);break;default:f=b=0,d=this.paper.width,i=this.paper.height}var e=(e==null?b+d/2:e)-this.paper.width/2,g=(g==null?f+i/2:g)-this.paper.height/2,j;
c.left!=(j=e+"px")&&(c.left=j);c.top!=(j=g+"px")&&(c.top=j);this.X=ha[q](this.type)?-e:b;this.Y=ha[q](this.type)?-g:f;this.W=d;this.H=i;ha[q](this.type)?(a.left!=(j=-e*10+"px")&&(a.left=j),a.top!=(j=-g*10+"px")&&(a.top=j)):this.type=="text"?(a.left!=(j=-e+"px")&&(a.left=j),a.top!=(j=-g+"px")&&(a.top=j)):(c.width!=(j=this.paper.width+"px")&&(c.width=j),c.height!=(j=this.paper.height+"px")&&(c.height=j),a.left!=(j=b-e+"px")&&(a.left=j),a.top!=(j=f-g+"px")&&(a.top=j),a.width!=(j=d+"px")&&(a.width=j),
a.height!=(j=i+"px")&&(a.height=j))};L.hide=function(){!this.removed&&(this.Group.style.display="none");return this};L.show=function(){!this.removed&&(this.Group.style.display="block");return this};L.getBBox=function(){if(this.removed)return this;if(ha[q](this.type))return na(this.attrs.path);return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};L.remove=function(){if(!this.removed){ca(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);
this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)delete this[b];this.removed=!0}};L.attr=function(b,e){if(this.removed)return this;if(b==null){var g={},c;for(c in this.attrs)this.attrs[q](c)&&(g[c]=this.attrs[c]);this._.rt.deg&&(g.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(g.scale=this.scale());g.gradient&&g.fill=="none"&&(g.fill=g.gradient)&&delete g.gradient;return g}if(e==null&&d.is(b,"string")){if(b=="translation")return pa.call(this);if(b=="rotation")return this.rotate();
if(b=="scale")return this.scale();if(b=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[b]}if(this.attrs&&e==null&&d.is(b,x)){var i={};c=0;for(g=b[r];c<g;c++)i[b[c]]=this.attr(b[c]);return i}e!=null&&(g={},g[b]=e);e==null&&d.is(b,"object")&&(g=b);if(g){for(i in this.paper.customAttributes)if(this.paper.customAttributes[q](i)&&g[q](i)&&d.is(this.paper.customAttributes[i],"function"))for(var f in c=this.paper.customAttributes[i].apply(this,[].concat(g[i])),
this.attrs[i]=g[i],c)c[q](f)&&(g[f]=c[f]);g.text&&this.type=="text"&&(this.node.string=g.text);ba(this,g);g.gradient&&({circle:1,ellipse:1}[q](this.type)||a(g.gradient).charAt()!="r")&&fa(this,g.gradient);(!ha[q](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};L.toFront=function(){!this.removed&&this.Group.parentNode.appendChild(this.Group);this.paper.top!=this&&La(this,this.paper);return this};L.toBack=function(){if(this.removed)return this;this.Group.parentNode.firstChild!=this.Group&&
(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Ma(this,this.paper));return this};L.insertAfter=function(b){if(this.removed)return this;b.constructor==W&&(b=b[b.length-1]);b.Group.nextSibling?b.Group.parentNode.insertBefore(this.Group,b.Group.nextSibling):b.Group.parentNode.appendChild(this.Group);Na(this,b,this.paper);return this};L.insertBefore=function(b){if(this.removed)return this;b.constructor==W&&(b=b[0]);b.Group.parentNode.insertBefore(this.Group,b.Group);
Oa(this,b,this.paper);return this};L.blur=function(b){var e=this.node.runtimeStyle,g=e.filter,g=g.replace(pb,"");+b!==0?(this.attrs.blur=b,e.filter=g+I+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+b||1.5)+")",e.margin=d.format("-{0}px 0 0 -{0}px",U(+b||1.5))):(e.filter=g,e.margin=0,delete this.attrs.blur)};var Ra=function(b,e,g,c){var a=V("group"),f=V("oval");a.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";a.coordsize=ga;a.coordorigin=b.coordorigin;
a.appendChild(f);f=new O(f,a,b);f.type="circle";ba(f,{stroke:"#000",fill:"none"});f.attrs.cx=e;f.attrs.cy=g;f.attrs.r=c;f.setBox({x:e-c,y:g-c,width:c*2,height:c*2});b.canvas.appendChild(a);return f},Ya=function(b,e,g,c,a){return a?d.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",b+a,e,g-a*2,a,-a,c-a*2,a*2-g,a*2-c):d.format("M{0},{1}l{2},0,0,{3},{4},0z",b,e,g,c,-g)},Sa=function(b,e,g,c,a,f){var i=Ya(e,g,c,a,f),b=b.path(i),
d=b.attrs;b.X=d.x=e;b.Y=d.y=g;b.W=d.width=c;b.H=d.height=a;d.r=f;d.path=i;b.type="rect";return b},Ta=function(b,e,g,c,a){var f=V("group"),i=V("oval");f.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";f.coordsize=ga;f.coordorigin=b.coordorigin;f.appendChild(i);i=new O(i,f,b);i.type="ellipse";ba(i,{stroke:"#000"});i.attrs.cx=e;i.attrs.cy=g;i.attrs.rx=c;i.attrs.ry=a;i.setBox({x:e-c,y:g-a,width:c*2,height:a*2});b.canvas.appendChild(f);return i},Ua=function(b,e,
g,c,a,f){var i=V("group"),d=V("image");i.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";i.coordsize=ga;i.coordorigin=b.coordorigin;d.src=e;i.appendChild(d);d=new O(d,i,b);d.type="image";d.attrs.src=e;d.attrs.x=g;d.attrs.y=c;d.attrs.w=a;d.attrs.h=f;d.setBox({x:g,y:c,width:a,height:f});b.canvas.appendChild(i);return d},Va=function(b,e,g,c){var i=V("group"),f=V("shape"),j=f.style,k=V("path"),p=V("textpath");i.style.cssText="position:absolute;left:0;top:0;width:"+
b.width+"px;height:"+b.height+"px";i.coordsize=ga;i.coordorigin=b.coordorigin;k.v=d.format("m{0},{1}l{2},{1}",U(e*10),U(g*10),U(e*10)+1);k.textpathok=!0;j.width=b.width;j.height=b.height;p.string=a(c);p.on=!0;f.appendChild(p);f.appendChild(k);i.appendChild(f);j=new O(p,i,b);j.shape=f;j.textpath=k;j.type="text";j.attrs.text=c;j.attrs.x=e;j.attrs.y=g;j.attrs.w=1;j.attrs.h=1;ba(j,{font:ja.font,stroke:"none",fill:"#000"});j.setBox();b.canvas.appendChild(i);return j},Wa=function(b,e){var g=this.canvas.style;
b==+b&&(b+="px");e==+e&&(e+="px");g.width=b;g.height=e;g.clip="rect(0 "+b+" "+e+" 0)";return this},V;w.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!w.namespaces.rvml&&w.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),V=function(b){return w.createElement("<rvml:"+b+' class="rvml">')}}catch(yb){V=function(b){return w.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}sa=function(){var b=Ka[F](0,arguments),e=b.container,g=b.height,c=b.width,a=
b.x,b=b.y;if(!e)throw Error("VML container not found.");var f=new R,i=f.canvas=w.createElement("div"),j=i.style,a=a||0,b=b||0,c=c||512,g=g||342;c==+c&&(c+="px");g==+g&&(g+="px");f.width=1E3;f.height=1E3;f.coordsize=1E4+I+1E4;f.coordorigin="0 0";f.span=w.createElement("span");f.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";i.appendChild(f.span);j.cssText=d.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
c,g);e==1?(w.body.appendChild(i),j.left=a+"px",j.top=b+"px",j.position="absolute"):e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i);wa.call(f,f,d.fn);return f};J.clear=function(){this.canvas.innerHTML="";this.span=w.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};J.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=
Pa(b);return!0}}X=navigator.userAgent.match(/Version\\x2f(.*?)\s/);navigator.vendor=="Apple Computer, Inc."&&(X&&X[1]<4||navigator.platform.slice(0,2)=="iP")?J.safari=function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});s.setTimeout(function(){b.remove()})}:J.safari=function(){};for(var sb=function(){this.returnValue=!1},tb=function(){return this.originalEvent.preventDefault()},ub=function(){this.cancelBubble=!0},vb=function(){return this.originalEvent.stopPropagation()},
wb=function(){if(w.addEventListener)return function(b,e,g,c){var a=G&&k[e]?k[e]:e,f=function(a){if(G&&k[q](e))for(var f=0,i=a.targetTouches&&a.targetTouches.length;f<i;f++)if(a.targetTouches[f].target==b){i=a;a=a.targetTouches[f];a.originalEvent=i;a.preventDefault=tb;a.stopPropagation=vb;break}return g.call(c,a)};b.addEventListener(a,f,!1);return function(){b.removeEventListener(a,f,!1);return!0}};if(w.attachEvent)return function(b,e,g,c){var a=function(b){b=b||s.event;b.preventDefault=b.preventDefault||
sb;b.stopPropagation=b.stopPropagation||ub;return g.call(c,b)};b.attachEvent("on"+e,a);return function(){b.detachEvent("on"+e,a);return!0}}}(),Y=[],ya=function(b){for(var e=b.clientX,g=b.clientY,c=w.documentElement.scrollTop||w.body.scrollTop,a=w.documentElement.scrollLeft||w.body.scrollLeft,f,i=Y.length;i--;){f=Y[i];if(G)for(var d=b.touches.length,j;d--;){if(j=b.touches[d],j.identifier==f.el._drag.id){e=j.clientX;g=j.clientY;(b.originalEvent?b.originalEvent:b).preventDefault();break}}else b.preventDefault();
e+=a;g+=c;f.move&&f.move.call(f.move_scope||f.el,e-f.el._drag.x,g-f.el._drag.y,e,g,b)}},za=function(b){d.unmousemove(ya).unmouseup(za);for(var e=Y.length,g;e--;)g=Y[e],g.el._drag={},g.end&&g.end.call(g.end_scope||g.start_scope||g.move_scope||g.el,b);Y=[]},X=c[r];X--;)(function(b){d[b]=O[D][b]=function(e,g){if(d.is(e,"function"))this.events=this.events||[],this.events.push({name:b,f:e,unbind:wb(this.shape||this.node||w,b,e,g||this)});return this};d["un"+b]=O[D]["un"+b]=function(e){for(var g=this.events,
c=g[r];c--;)if(g[c].name==b&&g[c].f==e){g[c].unbind();g.splice(c,1);!g.length&&delete this.events;break}return this}})(c[X]);L.hover=function(b,e,g,c){return this.mouseover(b,g).mouseout(e,c||g)};L.unhover=function(b,e){return this.unmouseover(b).unmouseout(e)};L.drag=function(b,e,g,c,a,f){this._drag={};this.mousedown(function(i){(i.originalEvent||i).preventDefault();var j=w.documentElement.scrollTop||w.body.scrollTop,k=w.documentElement.scrollLeft||w.body.scrollLeft;this._drag.x=i.clientX+k;this._drag.y=
i.clientY+j;this._drag.id=i.identifier;e&&e.call(a||c||this,i.clientX+k,i.clientY+j,i);!Y.length&&d.mousemove(ya).mouseup(za);Y.push({el:this,move:b,end:g,move_scope:c,start_scope:a,end_scope:f})});return this};L.undrag=function(b,e,g){for(e=Y.length;e--;)Y[e].el==this&&Y[e].move==b&&Y[e].end==g&&Y.splice(e++,1);!Y.length&&d.unmousemove(ya).unmouseup(za)};J.circle=function(b,e,g){return Ra(this,b||0,e||0,g||0)};J.rect=function(b,e,g,c,a){return Sa(this,b||0,e||0,g||0,c||0,a||0)};J.ellipse=function(b,
e,g,c){return Ta(this,b||0,e||0,g||0,c||0)};J.path=function(b){b&&!d.is(b,"string")&&!d.is(b[0],x)&&(b+="");return Qa(d.format[F](d,arguments),this)};J.image=function(b,e,g,c,a){return Ua(this,b||"about:blank",e||0,g||0,c||0,a||0)};J.text=function(b,e,g){return Va(this,b||0,e||0,a(g))};J.set=function(b){arguments[r]>1&&(b=Array[D].splice.call(arguments,0,arguments[r]));return new W(b)};J.setSize=Wa;J.top=J.bottom=null;J.raphael=d;L.resetScale=function(){if(this.removed)return this;this._.sx=1;this._.sy=
1;this.attrs.scale="1 1"};L.scale=function(b,e,g,c){if(this.removed)return this;if(b==null&&e==null)return{x:this._.sx,y:this._.sy,toString:l};e=e||b;!+e&&(e=b);var a,f,d=this.attrs;if(b!=0){var j=this.getBBox(),k=j.x+j.width/2,p=j.y+j.height/2;a=i(b/this._.sx);f=i(e/this._.sy);var g=+g||g==0?g:k,c=+c||c==0?c:p,v=this._.sx>0,h=this._.sy>0,j=~~(b/i(b)),m=~~(e/i(e)),x=a*j,C=f*m,q=this.node.style,k=g+i(k-g)*x*(k>g==v?1:-1),p=c+i(p-c)*C*(p>c==h?1:-1),u=b*j>e*m?f:a;switch(this.type){case "rect":case "image":var K=
d.width*a,w=d.height*f;this.attr({height:w,r:d.r*u,width:K,x:k-K/2,y:p-w/2});break;case "circle":case "ellipse":this.attr({rx:d.rx*a,ry:d.ry*f,r:d.r*u,cx:k,cy:p});break;case "text":this.attr({x:k,y:p});break;case "path":for(var u=va(d.path),N=!0,v=v?x:a,h=h?C:f,C=0,x=u[r];C<x;C++){var M=u[C],s=ia.call(M[0]);if(!(s=="M"&&N))if(N=!1,s=="A")M[u[C][r]-2]*=v,M[u[C][r]-1]*=h,M[1]*=a,M[2]*=f,M[5]=+(j+m?!!+M[5]:!+M[5]);else if(s=="H")for(var s=1,G=M[r];s<G;s++)M[s]*=v;else if(s=="V"){s=1;for(G=M[r];s<G;s++)M[s]*=
h}else{s=1;for(G=M[r];s<G;s++)M[s]*=s%2?v:h}}f=na(u);a=k-f.x-f.width/2;f=p-f.y-f.height/2;u[0][1]+=a;u[0][2]+=f;this.attr({path:u})}this.type in{text:1,image:1}&&(j!=1||m!=1)?this.transformations?(this.transformations[2]="scale(".concat(j,",",m,")"),this.node.setAttribute("transform",this.transformations[y](I)),a=j==-1?-d.x-(K||0):d.x,f=m==-1?-d.y-(w||0):d.y,this.attr({x:a,y:f}),d.fx=j-1,d.fy=m-1):(this.node.filterMatrix=" progid:DXImageTransform.Microsoft"+".Matrix(M11=".concat(j,", M12=0, M21=0, M22=",
m,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),q.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||"")):this.transformations?(this.transformations[2]="",this.node.setAttribute("transform",this.transformations[y](I)),d.fx=0,d.fy=0):(this.node.filterMatrix="",q.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||""));d.scale=[b,e,g,c][y](I);this._.sx=b;this._.sy=e}return this};L.clone=function(){if(this.removed)return null;var b=this.attr();delete b.scale;
delete b.translation;return this.paper[this.type]().attr(b)};var Aa={},qa=function(b,e,c,a,i,f,k,p,v){var o=0,l=100,h=[b,e,c,a,i,f,k,p].join(),m=Aa[h],r,x;!m&&(Aa[h]=m={data:[]});m.timer&&clearTimeout(m.timer);m.timer=setTimeout(function(){delete Aa[h]},2E3);v!=null&&(l=~~qa(b,e,c,a,i,f,k,p)*10);for(var y=0;y<l+1;y++){m.data[v]>y?x=m.data[y*l]:(x=d.findDotsAtSegment(b,e,c,a,i,f,k,p,y/l),m.data[y]=x);y&&(o+=j(j(r.x-x.x,2)+j(r.y-x.y,2),0.5));if(v!=null&&o>=v)return x;r=x}if(v==null)return o},c=function(b,
e){return function(c,a,i){for(var c=ma(c),f,j,k,p,v="",l={},h=0,m=0,x=c.length;m<x;m++){k=c[m];if(k[0]=="M")f=+k[1],j=+k[2];else{p=qa(f,j,k[1],k[2],k[3],k[4],k[5],k[6]);if(h+p>a){if(e&&!l.start){f=qa(f,j,k[1],k[2],k[3],k[4],k[5],k[6],a-h);v+=["C",f.start.x,f.start.y,f.m.x,f.m.y,f.x,f.y];if(i)return v;l.start=v;v=["M",f.x,f.y+"C",f.n.x,f.n.y,f.end.x,f.end.y,k[5],k[6]][y]();h+=p;f=+k[5];j=+k[6];continue}if(!b&&!e)return f=qa(f,j,k[1],k[2],k[3],k[4],k[5],k[6],a-h),{x:f.x,y:f.y,alpha:f.alpha}}h+=p;f=
+k[5];j=+k[6]}v+=k}l.end=v;f=b?h:e?l:d.findDotsAtSegment(f,j,k[1],k[2],k[3],k[4],k[5],k[6],1);f.alpha&&(f={x:f.x,y:f.y,alpha:f.alpha});return f}},Za=c(1),ra=c(),Ba=c(0,1);L.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return Za(this.attrs.path)}};L.getPointAtLength=function(b){if(this.type=="path")return ra(this.attrs.path,b)};L.getSubpath=function(b,e){if(this.type=="path"){if(i(this.getTotalLength()-e)<"1e-6")return Ba(this.attrs.path,
b).end;var c=Ba(this.attrs.path,e,1);return b?Ba(c,b).end:c}};d.easing_formulas={linear:function(b){return b},"<":function(b){return j(b,3)},">":function(b){return j(b-1,3)+1},"<>":function(b){b*=2;if(b<1)return j(b,3)/2;b-=2;return(j(b,3)+2)/2},backIn:function(b){return b*b*(2.70158*b-1.70158)},backOut:function(b){b-=1;return b*b*(2.70158*b+1.70158)+1},elastic:function(b){if(b==0||b==1)return b;return j(2,-10*b)*u.sin((b-0.075)*2*p/0.3)+1},bounce:function(b){b<1/2.75?b*=7.5625*b:b<2/2.75?(b-=1.5/
2.75,b=7.5625*b*b+0.75):b<2.5/2.75?(b-=2.25/2.75,b=7.5625*b*b+0.9375):(b-=2.625/2.75,b=7.5625*b*b+0.984375);return b}};var Z=[],$a=function(){for(var b=+new Date,e=0;e<Z[r];e++){var c=Z[e];if(!c.stop&&!c.el.removed){var a=b-c.start,i=c.ms,f=c.easing,j=c.from,k=c.diff,p=c.to,o=c.t,l=c.el,c={},h;if(a<i){var a=f(a/i),m;for(m in j)if(j[q](m)){switch(ta[m]){case "along":h=a*i*k[m];p.back&&(h=p.len-h);f=ra(p[m],h);l.translate(k.sx-k.x||0,k.sy-k.y||0);k.x=f.x;k.y=f.y;l.translate(f.x-k.sx,f.y-k.sy);p.rot&&
l.rotate(k.r+f.alpha,f.x,f.y);break;case v:h=+j[m]+a*i*k[m];break;case "colour":h="rgb("+[Ca(U(j[m].r+a*i*k[m].r)),Ca(U(j[m].g+a*i*k[m].g)),Ca(U(j[m].b+a*i*k[m].b))][y](",")+")";break;case "path":h=[];for(var f=0,x=j[m][r];f<x;f++){h[f]=[j[m][f][0]];for(var C=1,u=j[m][f][r];C<u;C++)h[f][C]=+j[m][f][C]+a*i*k[m][f][C];h[f]=h[f][y](I)}h=h[y](I);break;case "csv":switch(m){case "translation":h=a*i*k[m][0]-o.x;f=a*i*k[m][1]-o.y;o.x+=h;o.y+=f;h=h+I+f;break;case "rotation":h=+j[m][0]+a*i*k[m][0];j[m][1]&&
(h+=","+j[m][1]+","+j[m][2]);break;case "scale":h=[+j[m][0]+a*i*k[m][0],+j[m][1]+a*i*k[m][1],2 in p[m]?p[m][2]:"",3 in p[m]?p[m][3]:""][y](I);break;case "clip-rect":h=[];for(f=4;f--;)h[f]=+j[m][f]+a*i*k[m][f]}break;default:x=[].concat(j[m]);h=[];for(f=l.paper.customAttributes[m].length;f--;)h[f]=+x[f]+a*i*k[m][f]}c[m]=h}l.attr(c);l._run&&l._run.call(l)}else p.along&&(f=ra(p.along,p.len*!p.back),l.translate(k.sx-(k.x||0)+f.x-k.sx,k.sy-(k.y||0)+f.y-k.sy),p.rot&&l.rotate(k.r+f.alpha,f.x,f.y)),(o.x||
o.y)&&l.translate(-o.x,-o.y),p.scale&&(p.scale+=""),l.attr(p),Z.splice(e--,1)}}d.svg&&l&&l.paper&&l.paper.safari();Z[r]&&setTimeout($a)},xb=function(b,e,c,a,i){var f=c-a;e.timeouts.push(setTimeout(function(){d.is(i,"function")&&i.call(e);e.animate(b,f,b.easing)},a))},Ca=function(b){return K(T(b,255),0)},pa=function(b,e){if(b==null)return{x:this._.tx,y:this._.ty,toString:l};this._.tx+=+b;this._.ty+=+e;switch(this.type){case "circle":case "ellipse":this.attr({cx:+b+this.attrs.cx,cy:+e+this.attrs.cy});
break;case "rect":case "image":case "text":this.attr({x:+b+this.attrs.x,y:+e+this.attrs.y});break;case "path":var c=va(this.attrs.path);c[0][1]+=+b;c[0][2]+=+e;this.attr({path:c})}return this};L.animateWith=function(b,e,c,a,i){for(var f=0,d=Z.length;f<d;f++)Z[f].el.id==b.id&&(e.start=Z[f].start);return this.animate(e,c,a,i)};L.animateAlong=z();L.animateAlongBack=z(1);L.onAnimation=function(b){this._run=b||0;return this};L.animate=function(b,e,c,i){var j=this;j.timeouts=j.timeouts||[];if(d.is(c,"function")||
!c)i=c||null;if(j.removed)return i&&i.call(j),j;var f={},k={},p=!1,l={},o;for(o in b)if(b[q](o)&&(ta[q](o)||j.paper.customAttributes[q](o)))switch(p=!0,f[o]=j.attr(o),f[o]==null&&(f[o]=ja[o]),k[o]=b[o],ta[o]){case "along":var h=Za(b[o]),m=ra(b[o],h*!!b.back),x=j.getBBox();l[o]=h/e;l.tx=x.x;l.ty=x.y;l.sx=m.x;l.sy=m.y;k.rot=b.rot;k.back=b.back;k.len=h;b.rot&&(l.r=H(j.rotate())||0);break;case v:l[o]=(k[o]-f[o])/e;break;case "colour":f[o]=d.getRGB(f[o]);h=d.getRGB(k[o]);l[o]={r:(h.r-f[o].r)/e,g:(h.g-
f[o].g)/e,b:(h.b-f[o].b)/e};break;case "path":h=ma(f[o],k[o]);f[o]=h[0];x=h[1];l[o]=[];h=0;for(m=f[o][r];h<m;h++){l[o][h]=[0];for(var y=1,C=f[o][h][r];y<C;y++)l[o][h][y]=(x[h][y]-f[o][h][y])/e}break;case "csv":m=a(b[o]).split(E);x=a(f[o]).split(E);switch(o){case "translation":f[o]=[0,0];l[o]=[m[0]/e,m[1]/e];break;case "rotation":f[o]=x[1]==m[1]&&x[2]==m[2]?x:[0,m[1],m[2]];l[o]=[(m[0]-f[o][0])/e,0,0];break;case "scale":b[o]=m;f[o]=a(f[o]).split(E);l[o]=[(m[0]-f[o][0])/e,(m[1]-f[o][1])/e,0,0];break;
case "clip-rect":f[o]=a(f[o]).split(E);l[o]=[];for(h=4;h--;)l[o][h]=(m[h]-f[o][h])/e}k[o]=m;break;default:m=[].concat(b[o]);x=[].concat(f[o]);l[o]=[];for(h=j.paper.customAttributes[o][r];h--;)l[o][h]=((m[h]||0)-(x[h]||0))/e}if(p){o=d.easing_formulas[c];if(!o)if((o=a(c).match(db))&&o[r]==5){var u=o;o=function(b){return B(b,+u[1],+u[2],+u[3],+u[4],e)}}else o=function(b){return b};Z.push({start:b.start||+new Date,ms:e,easing:o,from:f,diff:l,to:k,el:j,t:{x:0,y:0}});d.is(i,"function")&&(j._ac=setTimeout(function(){i.call(j)},
e));Z[r]==1&&setTimeout($a)}else{var c=[],M,s;for(s in b)if(b[q](s)&&eb.test(s))o={value:b[s]},s=="from"&&(s=0),s=="to"&&(s=100),o.key=aa(s,10),c.push(o);c.sort(jb);c[0].key&&c.unshift({key:0,value:j.attrs});h=0;for(m=c[r];h<m;h++)xb(c[h].value,j,e/100*c[h].key,e/100*(c[h-1]&&c[h-1].key||0),c[h-1]&&c[h-1].value.callback);(M=c[c[r]-1].value.callback)&&j.timeouts.push(setTimeout(function(){M.call(j)},e))}return this};L.stop=function(){for(var b=0;b<Z.length;b++)Z[b].el.id==this.id&&Z.splice(b--,1);
b=0;for(ii=this.timeouts&&this.timeouts.length;b<ii;b++)clearTimeout(this.timeouts[b]);this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};L.translate=function(b,e){return this.attr({translation:b+" "+e})};L[C]=function(){return"Rapha\u00ebl\u2019s object"};d.ae=Z;var W=function(b){this.items=[];this[r]=0;this.type="set";if(b)for(var e=0,c=b[r];e<c;e++)if(b[e]&&(b[e].constructor==O||b[e].constructor==W))this[this.items[r]]=this.items[this.items[r]]=b[e],this[r]++};W[D][N]=function(){for(var b,
e,c=0,a=arguments[r];c<a;c++)if((b=arguments[c])&&(b.constructor==O||b.constructor==W))e=this.items[r],this[e]=this.items[e]=b,this[r]++;return this};W[D].pop=function(){delete this[this[r]--];return this.items.pop()};for(var Da in L)L[q](Da)&&(W[D][Da]=function(b){return function(){for(var e=0,c=this.items[r];e<c;e++)this.items[e][b][F](this.items[e],arguments);return this}}(Da));W[D].attr=function(b,e){if(b&&d.is(b,x)&&d.is(b[0],"object"))for(var c=0,a=b[r];c<a;c++)this.items[c].attr(b[c]);else{c=
0;for(a=this.items[r];c<a;c++)this.items[c].attr(b,e)}return this};W[D].animate=function(b,e,c,a){(d.is(c,"function")||!c)&&(a=c||null);var i=this.items[r],f=i,j,k=this,p;a&&(p=function(){!--i&&a.call(k)});c=d.is(c,"string")?c:p;for(j=this.items[--f].animate(b,e,c,p);f--;)this.items[f]&&!this.items[f].removed&&this.items[f].animateWith(j,b,e,c,p);return this};W[D].insertAfter=function(b){for(var e=this.items[r];e--;)this.items[e].insertAfter(b);return this};W[D].getBBox=function(){for(var b=[],e=
[],c=[],a=[],i=this.items[r];i--;){var f=this.items[i].getBBox();b[N](f.x);e[N](f.y);c[N](f.x+f.width);a[N](f.y+f.height)}b=T[F](0,b);e=T[F](0,e);return{x:b,y:e,width:K[F](0,c)-b,height:K[F](0,a)-e}};W[D].clone=function(b){for(var b=new W,e=0,c=this.items[r];e<c;e++)b[N](this.items[e].clone());return b};d.registerFont=function(b){if(!b.face)return b;this.fonts=this.fonts||{};var e={w:b.w,face:{},glyphs:{}},c=b.face["font-family"],a;for(a in b.face)b.face[q](a)&&(e.face[a]=b.face[a]);this.fonts[c]?
this.fonts[c][N](e):this.fonts[c]=[e];if(!b.svg)for(var i in e.face["units-per-em"]=aa(b.face["units-per-em"],10),b.glyphs)if(b.glyphs[q](i)&&(c=b.glyphs[i],e.glyphs[i]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(b){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[b]||"M"})+"z"},c.k))for(var f in c.k)c[q](f)&&(e.glyphs[i].k[f]=c.k[f]);return b};J.getFont=function(b,e,c,a){a=a||"normal";c=c||"normal";e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400;if(d.fonts){var i=d.fonts[b];if(!i){var b=
RegExp("(^|\\s)"+b.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i"),f;for(f in d.fonts)if(d.fonts[q](f)&&b.test(f)){i=d.fonts[f];break}}var j;if(i){f=0;for(b=i[r];f<b;f++)if(j=i[f],j.face["font-weight"]==e&&(j.face["font-style"]==c||!j.face["font-style"])&&j.face["font-stretch"]==a)break}return j}};J.print=function(b,e,c,i,j,f,k){var f=f||"middle",k=K(T(k||0,1),-1),p=this.set(),v=a(c).split(""),l=0;d.is(i,c)&&(i=this.getFont(i));if(i){for(var c=(j||16)/i.face["units-per-em"],h=i.face.bbox.split(E),
j=+h[0],f=+h[1]+(f=="baseline"?h[3]-h[1]+ +i.face.descent:(h[3]-h[1])/2),h=0,m=v[r];h<m;h++){var x=h&&i.glyphs[v[h-1]]||{},y=i.glyphs[v[h]];l+=h?(x.w||i.w)+(x.k&&x.k[v[h]]||0)+i.w*k:0;y&&y.d&&p[N](this.path(y.d).attr({fill:"#000",stroke:"none",translation:[l,0]}))}p.scale(c,c,j,f).translate(b-j,e-f)}return p};d.format=function(b,e){var c=d.is(e,x)?[0].concat(e):arguments;b&&d.is(b,"string")&&c[r]-1&&(b=b.replace(Q,function(b,e){return c[++e]==null?"":c[e]}));return b||""};d.ninja=function(){S.was?
s.Raphael=S.is:delete Raphael;return d};d.el=L;d.st=W[D];S.was?s.Raphael=d:Raphael=d})();(function(){var d=this,h=d._,m={},l=Array.prototype,z=Object.prototype,B=l.slice,E=l.unshift,P=z.toString,Q=z.hasOwnProperty,D=l.forEach,q=l.map,w=l.reduce,s=l.reduceRight,S=l.filter,R=l.every,J=l.some,F=l.indexOf,G=l.lastIndexOf,z=Array.isArray,I=Object.keys,a=Function.prototype.bind,c=function(c){return new u(c)};typeof module!=="undefined"&&module.exports?(module.exports=c,c._=c):d._=c;c.VERSION="1.1.6";var k=c.each=c.forEach=function(a,j,d){if(a!=null)if(D&&a.forEach===D)a.forEach(j,d);else if(c.isNumber(a.length))for(var k=
0,h=a.length;k<h;k++){if(j.call(d,a[k],k,a)===m)break}else for(k in a)if(Q.call(a,k)&&j.call(d,a[k],k,a)===m)break};c.map=function(c,a,d){var h=[];if(c==null)return h;if(q&&c.map===q)return c.map(a,d);k(c,function(c,i,k){h[h.length]=a.call(d,c,i,k)});return h};c.reduce=c.foldl=c.inject=function(a,j,d,h){var l=d!==void 0;a==null&&(a=[]);if(w&&a.reduce===w)return h&&(j=c.bind(j,h)),l?a.reduce(j,d):a.reduce(j);k(a,function(c,a,i){!l&&a===0?(d=c,l=!0):d=j.call(h,d,c,a,i)});if(!l)throw new TypeError("Reduce of empty array with no initial value");
return d};c.reduceRight=c.foldr=function(a,j,d,k){a==null&&(a=[]);if(s&&a.reduceRight===s)return k&&(j=c.bind(j,k)),d!==void 0?a.reduceRight(j,d):a.reduceRight(j);a=(c.isArray(a)?a.slice():c.toArray(a)).reverse();return c.reduce(a,j,d,k)};c.find=c.detect=function(c,a,d){var k;y(c,function(c,i,h){if(a.call(d,c,i,h))return k=c,!0});return k};c.filter=c.select=function(c,a,d){var h=[];if(c==null)return h;if(S&&c.filter===S)return c.filter(a,d);k(c,function(c,i,k){a.call(d,c,i,k)&&(h[h.length]=c)});return h};
c.reject=function(c,a,d){var h=[];if(c==null)return h;k(c,function(c,i,k){a.call(d,c,i,k)||(h[h.length]=c)});return h};c.every=c.all=function(c,a,d){var h=!0;if(c==null)return h;if(R&&c.every===R)return c.every(a,d);k(c,function(c,i,k){if(!(h=h&&a.call(d,c,i,k)))return m});return h};var y=c.some=c.any=function(a,d,p){d||(d=c.identity);var h=!1;if(a==null)return h;if(J&&a.some===J)return a.some(d,p);k(a,function(c,a,i){if(h=d.call(p,c,a,i))return m});return h};c.include=c.contains=function(c,a){var d=
!1;if(c==null)return d;if(F&&c.indexOf===F)return c.indexOf(a)!=-1;y(c,function(c){if(d=c===a)return!0});return d};c.invoke=function(a,d){var k=B.call(arguments,2);return c.map(a,function(c){return(d.call?d||c:c[d]).apply(c,k)})};c.pluck=function(a,d){return c.map(a,function(c){return c[d]})};c.max=function(a,d,p){if(!d&&c.isArray(a))return Math.max.apply(Math,a);var h={computed:-Infinity};k(a,function(c,a,i){a=d?d.call(p,c,a,i):c;a>=h.computed&&(h={value:c,computed:a})});return h.value};c.min=function(a,
d,p){if(!d&&c.isArray(a))return Math.min.apply(Math,a);var h={computed:Infinity};k(a,function(c,a,i){a=d?d.call(p,c,a,i):c;a<h.computed&&(h={value:c,computed:a})});return h.value};c.sortBy=function(a,d,k){return c.pluck(c.map(a,function(c,a,i){return{value:c,criteria:d.call(k,c,a,i)}}).sort(function(c,a){var i=c.criteria,d=a.criteria;return i<d?-1:i>d?1:0}),"value")};c.sortedIndex=function(a,d,k){k||(k=c.identity);for(var h=0,l=a.length;h<l;){var m=h+l>>1;k(a[m])<k(d)?h=m+1:l=m}return h};c.toArray=
function(a){if(!a)return[];if(a.toArray)return a.toArray();if(c.isArray(a))return a;if(c.isArguments(a))return B.call(a);return c.values(a)};c.size=function(a){return c.toArray(a).length};c.first=c.head=function(c,a,d){return a!=null&&!d?B.call(c,0,a):c[0]};c.rest=c.tail=function(c,a,d){return B.call(c,a==null||d?1:a)};c.last=function(c){return c[c.length-1]};c.compact=function(a){return c.filter(a,function(c){return!!c})};c.flatten=function(a){return c.reduce(a,function(a,i){if(c.isArray(i))return a.concat(c.flatten(i));
a[a.length]=i;return a},[])};c.without=function(a){var d=B.call(arguments,1);return c.filter(a,function(a){return!c.include(d,a)})};c.uniq=c.unique=function(a,d){return c.reduce(a,function(a,i,k){if(0==k||(d===!0?c.last(a)!=i:!c.include(a,i)))a[a.length]=i;return a},[])};c.intersect=function(a){var d=B.call(arguments,1);return c.filter(c.uniq(a),function(a){return c.every(d,function(i){return c.indexOf(i,a)>=0})})};c.zip=function(){for(var a=B.call(arguments),d=c.max(c.pluck(a,"length")),k=Array(d),
h=0;h<d;h++)k[h]=c.pluck(a,""+h);return k};c.indexOf=function(a,d,k){if(a==null)return-1;var h;if(k)return k=c.sortedIndex(a,d),a[k]===d?k:-1;if(F&&a.indexOf===F)return a.indexOf(d);k=0;for(h=a.length;k<h;k++)if(a[k]===d)return k;return-1};c.lastIndexOf=function(c,a){if(c==null)return-1;if(G&&c.lastIndexOf===G)return c.lastIndexOf(a);for(var d=c.length;d--;)if(c[d]===a)return d;return-1};c.range=function(c,a,d){arguments.length<=1&&(a=c||0,c=0);for(var d=arguments[2]||1,k=Math.max(Math.ceil((a-c)/
d),0),h=0,l=Array(k);h<k;)l[h++]=c,c+=d;return l};c.bind=function(c,d){if(c.bind===a&&a)return a.apply(c,B.call(arguments,1));var k=B.call(arguments,2);return function(){return c.apply(d,k.concat(B.call(arguments)))}};c.bindAll=function(a){var d=B.call(arguments,1);d.length==0&&(d=c.functions(a));k(d,function(d){a[d]=c.bind(a[d],a)});return a};c.memoize=function(a,d){var k={};d||(d=c.identity);return function(){var c=d.apply(this,arguments);return Q.call(k,c)?k[c]:k[c]=a.apply(this,arguments)}};c.delay=
function(c,a){var d=B.call(arguments,2);return setTimeout(function(){return c.apply(c,d)},a)};c.defer=function(a){return c.delay.apply(c,[a,1].concat(B.call(arguments,1)))};var r=function(c,a,d){var k;return function(){var h=this,l=arguments,m=function(){k=null;c.apply(h,l)};d&&clearTimeout(k);if(d||!k)k=setTimeout(m,a)}};c.throttle=function(c,a){return r(c,a,!1)};c.debounce=function(c,a){return r(c,a,!0)};c.once=function(c){var a=!1,d;return function(){if(a)return d;a=!0;return d=c.apply(this,arguments)}};
c.wrap=function(c,a){return function(){var d=[c].concat(B.call(arguments));return a.apply(this,d)}};c.compose=function(){var c=B.call(arguments);return function(){for(var a=B.call(arguments),d=c.length-1;d>=0;d--)a=[c[d].apply(this,a)];return a[0]}};c.after=function(c,a){return function(){if(--c<1)return a.apply(this,arguments)}};c.keys=I||function(c){if(c!==Object(c))throw new TypeError("Invalid object");var a=[],d;for(d in c)Q.call(c,d)&&(a[a.length]=d);return a};c.values=function(a){return c.map(a,
c.identity)};c.functions=c.methods=function(a){return c.filter(c.keys(a),function(d){return c.isFunction(a[d])}).sort()};c.extend=function(c){k(B.call(arguments,1),function(a){for(var d in a)a[d]!==void 0&&(c[d]=a[d])});return c};c.defaults=function(c){k(B.call(arguments,1),function(a){for(var d in a)c[d]==null&&(c[d]=a[d])});return c};c.clone=function(a){return c.isArray(a)?a.slice():c.extend({},a)};c.tap=function(c,a){a(c);return c};c.isEqual=function(a,d){if(a===d)return!0;var k=typeof a;if(k!=
typeof d)return!1;if(a==d)return!0;if(!a&&d||a&&!d)return!1;if(a._chain)a=a._wrapped;if(d._chain)d=d._wrapped;if(a.isEqual)return a.isEqual(d);if(c.isDate(a)&&c.isDate(d))return a.getTime()===d.getTime();if(c.isNaN(a)&&c.isNaN(d))return!1;if(c.isRegExp(a)&&c.isRegExp(d))return a.source===d.source&&a.global===d.global&&a.ignoreCase===d.ignoreCase&&a.multiline===d.multiline;if(k!=="object")return!1;if(a.length&&a.length!==d.length)return!1;var k=c.keys(a),h=c.keys(d);if(k.length!=h.length)return!1;
for(var l in a)if(!(l in d)||!c.isEqual(a[l],d[l]))return!1;return!0};c.isEmpty=function(a){if(c.isArray(a)||c.isString(a))return a.length===0;for(var d in a)if(Q.call(a,d))return!1;return!0};c.isElement=function(a){return!!(a&&a.nodeType==1)};c.isArray=z||function(a){return P.call(a)==="[object Array]"};c.isArguments=function(a){return!(!a||!Q.call(a,"callee"))};c.isFunction=function(a){return!(!a||!a.constructor||!a.call||!a.apply)};c.isString=function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)};
c.isNumber=function(a){return!!(a===0||a&&a.toExponential&&a.toFixed)};c.isNaN=function(a){return a!==a};c.isBoolean=function(a){return a===!0||a===!1};c.isDate=function(a){return!(!a||!a.getTimezoneOffset||!a.setUTCFullYear)};c.isRegExp=function(a){return!(!a||!a.test||!a.exec||!(a.ignoreCase||a.ignoreCase===!1))};c.isNull=function(a){return a===null};c.isUndefined=function(a){return a===void 0};c.noConflict=function(){d._=h;return this};c.identity=function(a){return a};c.times=function(a,c,d){for(var k=
0;k<a;k++)c.call(d,k)};c.mixin=function(a){k(c.functions(a),function(d){T(d,c[d]=a[d])})};var M=0;c.uniqueId=function(a){var c=M++;return a?a+c:c};c.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};c.template=function(a,d){var k=c.templateSettings,k="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(k.interpolate,function(a,c){return"',"+c.replace(/\\'/g,"'")+",'"}).replace(k.evaluate||
null,function(a,c){return"');"+c.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",k=new Function("obj",k);return d?k(d):k};var u=function(a){this._wrapped=a};c.prototype=u.prototype;var K=function(a,d){return d?c(a).chain():a},T=function(a,d){u.prototype[a]=function(){var a=B.call(arguments);E.call(a,this._wrapped);return K(d.apply(c,a),this._chain)}};c.mixin(c);k(["pop","push","reverse","shift","sort",
"splice","unshift"],function(a){var c=l[a];u.prototype[a]=function(){c.apply(this._wrapped,arguments);return K(this._wrapped,this._chain)}});k(["concat","join","slice"],function(a){var c=l[a];u.prototype[a]=function(){return K(c.apply(this._wrapped,arguments),this._chain)}});u.prototype.chain=function(){this._chain=!0;return this};u.prototype.value=function(){return this._wrapped}})();(function(){var d=this,h=d.Backbone,m;m=typeof exports!=="undefined"?exports:d.Backbone={};m.VERSION="0.5.0";var l=d._;if(!l&&typeof require!=="undefined")l=require("underscore")._;var z=d.jQuery||d.Zepto;m.noConflict=function(){d.Backbone=h;return this};m.emulateHTTP=!1;m.emulateJSON=!1;m.Events={bind:function(a,c){var d=this._callbacks||(this._callbacks={});(d[a]||(d[a]=[])).push(c);return this},unbind:function(a,c){var d;if(a){if(d=this._callbacks)if(c){d=d[a];if(!d)return this;for(var h=0,l=d.length;h<
l;h++)if(c===d[h]){d[h]=null;break}}else d[a]=[]}else this._callbacks={};return this},trigger:function(a){var c,d,h,l,m=2;if(!(d=this._callbacks))return this;for(;m--;)if(c=m?a:"all",c=d[c])for(var u=0,q=c.length;u<q;u++)(h=c[u])?(l=m?Array.prototype.slice.call(arguments,1):arguments,h.apply(this,l)):(c.splice(u,1),u--,q--);return this}};m.Model=function(a,c){var d;a||(a={});if(d=this.defaults)l.isFunction(d)&&(d=d()),a=l.extend({},d,a);this.attributes={};this._escapedAttributes={};this.cid=l.uniqueId("c");
this.set(a,{silent:!0});this._changed=!1;this._previousAttributes=l.clone(this.attributes);if(c&&c.collection)this.collection=c.collection;this.initialize.apply(this,arguments)};l.extend(m.Model.prototype,m.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return l.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var c;if(c=this._escapedAttributes[a])return c;c=this.attributes[a];return this._escapedAttributes[a]=
(c==null?"":""+c).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27").replace(/\//g,"&#x2F;")},has:function(a){return this.attributes[a]!=null},set:function(a,c){c||(c={});if(!a)return this;if(a.attributes)a=a.attributes;var d=this.attributes,h=this._escapedAttributes;if(!c.silent&&this.validate&&!this._performValidation(a,c))return!1;if(this.idAttribute in a)this.id=a[this.idAttribute];var m=this._changing;this._changing=
!0;for(var q in a){var u=a[q];if(!l.isEqual(d[q],u))d[q]=u,delete h[q],this._changed=!0,c.silent||this.trigger("change:"+q,this,u,c)}!m&&!c.silent&&this._changed&&this.change(c);this._changing=!1;return this},unset:function(a,c){if(!(a in this.attributes))return this;c||(c={});var d={};d[a]=void 0;if(!c.silent&&this.validate&&!this._performValidation(d,c))return!1;delete this.attributes[a];delete this._escapedAttributes[a];a==this.idAttribute&&delete this.id;this._changed=!0;c.silent||(this.trigger("change:"+
a,this,void 0,c),this.change(c));return this},clear:function(a){a||(a={});var c,d=this.attributes,h={};for(c in d)h[c]=void 0;if(!a.silent&&this.validate&&!this._performValidation(h,a))return!1;this.attributes={};this._escapedAttributes={};this._changed=!0;if(!a.silent){for(c in d)this.trigger("change:"+c,this,void 0,a);this.change(a)}return this},fetch:function(a){a||(a={});var c=this,d=a.success;a.success=function(h,l,m){if(!c.set(c.parse(h,m),a))return!1;d&&d(c,h)};a.error=I(a.error,c,a);return(this.sync||
m.sync).call(this,"read",this,a)},save:function(a,c){c||(c={});if(a&&!this.set(a,c))return!1;var d=this,h=c.success;c.success=function(a,l,m){if(!d.set(d.parse(a,m),c))return!1;h&&h(d,a,m)};c.error=I(c.error,d,c);var l=this.isNew()?"create":"update";return(this.sync||m.sync).call(this,l,this,c)},destroy:function(a){a||(a={});if(this.isNew())return this.trigger("destroy",this,this.collection,a);var c=this,d=a.success;a.success=function(h){c.trigger("destroy",c,c.collection,a);d&&d(c,h)};a.error=I(a.error,
c,a);return(this.sync||m.sync).call(this,"delete",this,a)},url:function(){var a=F(this.collection)||this.urlRoot||G();if(this.isNew())return a;return a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(a){this.trigger("change",this,a);this._previousAttributes=l.clone(this.attributes);this._changed=!1},hasChanged:function(a){if(a)return this._previousAttributes[a]!=
this.attributes[a];return this._changed},changedAttributes:function(a){a||(a=this.attributes);var c=this._previousAttributes,d=!1,h;for(h in a)l.isEqual(c[h],a[h])||(d=d||{},d[h]=a[h]);return d},previous:function(a){if(!a||!this._previousAttributes)return null;return this._previousAttributes[a]},previousAttributes:function(){return l.clone(this._previousAttributes)},_performValidation:function(a,c){var d=this.validate(a);if(d)return c.error?c.error(this,d,c):this.trigger("error",this,d,c),!1;return!0}});
m.Collection=function(a,c){c||(c={});if(c.comparator)this.comparator=c.comparator;l.bindAll(this,"_onModelEvent","_removeReference");this._reset();a&&this.reset(a,{silent:!0});this.initialize.apply(this,arguments)};l.extend(m.Collection.prototype,m.Events,{model:m.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,c){if(l.isArray(a))for(var d=0,h=a.length;d<h;d++)this._add(a[d],c);else this._add(a,c);return this},remove:function(a,c){if(l.isArray(a))for(var d=
0,h=a.length;d<h;d++)this._remove(a[d],c);else this._remove(a,c);return this},get:function(a){if(a==null)return null;return this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.models=this.sortBy(this.comparator);a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return l.map(this.models,function(c){return c.get(a)})},
reset:function(a,c){a||(a=[]);c||(c={});this.each(this._removeReference);this._reset();this.add(a,{silent:!0});c.silent||this.trigger("reset",this,c);return this},fetch:function(a){a||(a={});var c=this,d=a.success;a.success=function(h,l,m){c[a.add?"add":"reset"](c.parse(h,m),a);d&&d(c,h)};a.error=I(a.error,c,a);return(this.sync||m.sync).call(this,"read",this,a)},create:function(a,c){var d=this;c||(c={});a=this._prepareModel(a,c);if(!a)return!1;var h=c.success;c.success=function(a,l,m){d.add(a,c);
h&&h(a,l,m)};a.save(null,c);return a},parse:function(a){return a},chain:function(){return l(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(a,c){if(a instanceof m.Model){if(!a.collection)a.collection=this}else{var d=a,a=new this.model(d,{collection:this});a.validate&&!a._performValidation(d,c)&&(a=!1)}return a},_add:function(a,c){c||(c={});a=this._prepareModel(a,c);if(!a)return!1;var d=this.getByCid(a)||this.get(a);if(d)throw Error(["Can't add the same model to a set twice",
d.id]);this._byId[a.id]=a;this._byCid[a.cid]=a;this.models.splice(c.at!=null?c.at:this.comparator?this.sortedIndex(a,this.comparator):this.length,0,a);a.bind("all",this._onModelEvent);this.length++;c.silent||a.trigger("add",a,this,c);return a},_remove:function(a,c){c||(c={});a=this.getByCid(a)||this.get(a);if(!a)return null;delete this._byId[a.id];delete this._byCid[a.cid];this.models.splice(this.indexOf(a),1);this.length--;c.silent||a.trigger("remove",a,this,c);this._removeReference(a);return a},
_removeReference:function(a){this==a.collection&&delete a.collection;a.unbind("all",this._onModelEvent)},_onModelEvent:function(a,c,d,h){(a=="add"||a=="remove")&&d!=this||(a=="destroy"&&this._remove(c,h),c&&a==="change:"+c.idAttribute&&(delete this._byId[c.previous(c.idAttribute)],this._byId[c.id]=c),this.trigger.apply(this,arguments))}});l.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","invoke","max","min","sortBy",
"sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty"],function(a){m.Collection.prototype[a]=function(){return l[a].apply(l,[this.models].concat(l.toArray(arguments)))}});m.Router=function(a){a||(a={});if(a.routes)this.routes=a.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var B=/:([\w\d]+)/g,E=/\*([\w\d]+)/g,P=/[-[\]{}()+?.,\\^$|#\s]/g;l.extend(m.Router.prototype,m.Events,{initialize:function(){},route:function(a,c,d){m.history||(m.history=
new m.History);l.isRegExp(a)||(a=this._routeToRegExp(a));m.history.route(a,l.bind(function(h){h=this._extractParameters(a,h);d.apply(this,h);this.trigger.apply(this,["route:"+c].concat(h))},this))},navigate:function(a,c){m.history.navigate(a,c)},_bindRoutes:function(){if(this.routes){var a=[],c;for(c in this.routes)a.unshift([c,this.routes[c]]);c=0;for(var d=a.length;c<d;c++)this.route(a[c][0],a[c][1],this[a[c][1]])}},_routeToRegExp:function(a){a=a.replace(P,"\\$&").replace(B,"([^/]*)").replace(E,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,c){return a.exec(c).slice(1)}});m.History=function(){this.handlers=[];l.bindAll(this,"checkUrl")};var Q=/^#*!?/,D=/msie [\w.]+/,q=!1;l.extend(m.History.prototype,{interval:50,getFragment:function(a,c){if(a==null)if(this._hasPushState||c){var a=window.location.pathname,d=window.location.search;d&&(a+=d);a.indexOf(this.options.root)==0&&(a=a.substr(this.options.root.length))}else a=window.location.hash;return a.replace(Q,"")},start:function(a){if(q)throw Error("Backbone.history has already been started");
this.options=l.extend({},{root:"/"},this.options,a);this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),c=document.documentMode;if(c=D.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7))this.iframe=z('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?z(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!c?
z(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval);this.fragment=a;q=!0;a=this.loadUrl()||this.loadUrl(window.location.hash);c=window.location.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!c)this.fragment=this.getFragment(null,!0),window.location=this.options.root+"#"+this.fragment;else if(this._wantsPushState&&this._hasPushState&&c&&window.location.hash)this.navigate(window.location.hash);else return a},route:function(a,c){this.handlers.unshift({route:a,
callback:c})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.iframe.location.hash));if(a==this.fragment||a==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var c=this.fragment=this.getFragment(a);return l.any(this.handlers,function(a){if(a.route.test(c))return a.callback(c),!0})},navigate:function(a,c){a=(a||"").replace(Q,"");if(!(this.fragment==a||
this.fragment==decodeURIComponent(a))){if(this._hasPushState){var d=window.location;a.indexOf(this.options.root)!=0&&(a=this.options.root+a);this.fragment=a;window.history.pushState({},document.title,d.protocol+"//"+d.host+a)}else if(window.location.hash=this.fragment=a,this.iframe&&a!=this.getFragment(this.iframe.location.hash))this.iframe.document.open().close(),this.iframe.location.hash=a;c&&this.loadUrl(a)}}});m.View=function(a){this.cid=l.uniqueId("view");this._configure(a||{});this._ensureElement();
this.delegateEvents();this.initialize.apply(this,arguments)};var w=/^(\S+)\s*(.*)$/,s=["model","collection","el","id","attributes","className","tagName"];l.extend(m.View.prototype,m.Events,{tagName:"div",$:function(a){return z(a,this.el)},initialize:function(){},render:function(){return this},remove:function(){z(this.el).remove();return this},make:function(a,c,d){a=document.createElement(a);c&&z(a).attr(c);d&&z(a).html(d);return a},delegateEvents:function(a){if(a||(a=this.events))for(var c in z(this.el).unbind(".delegateEvents"+
this.cid),a){var d=this[a[c]];if(!d)throw Error('Event "'+a[c]+'" does not exist');var h=c.match(w),m=h[1],h=h[2],d=l.bind(d,this);m+=".delegateEvents"+this.cid;h===""?z(this.el).bind(m,d):z(this.el).delegate(h,m,d)}},_configure:function(a){this.options&&(a=l.extend({},this.options,a));for(var c=0,d=s.length;c<d;c++){var h=s[c];a[h]&&(this[h]=a[h])}this.options=a},_ensureElement:function(){if(this.el){if(l.isString(this.el))this.el=z(this.el).get(0)}else{var a=this.attributes||{};if(this.id)a.id=
this.id;if(this.className)a["class"]=this.className;this.el=this.make(this.tagName,a)}}});m.Model.extend=m.Collection.extend=m.Router.extend=m.View.extend=function(a,c){var d=J(this,a,c);d.extend=this.extend;return d};var S={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};m.sync=function(a,c,d){var h=S[a],d=l.extend({type:h,dataType:"json",processData:!1},d);if(!d.url)d.url=F(c)||G();if(!d.data&&c&&(a=="create"||a=="update"))d.contentType="application/json",d.data=JSON.stringify(c.toJSON());
if(m.emulateJSON)d.contentType="application/x-www-form-urlencoded",d.processData=!0,d.data=d.data?{model:d.data}:{};if(m.emulateHTTP&&(h==="PUT"||h==="DELETE")){if(m.emulateJSON)d.data._method=h;d.type="POST";d.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",h)}}return z.ajax(d)};var R=function(){},J=function(a,c,d){var h;h=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)};l.extend(h,a);R.prototype=a.prototype;h.prototype=new R;c&&l.extend(h.prototype,
c);d&&l.extend(h,d);h.prototype.constructor=h;h.__super__=a.prototype;return h},F=function(a){if(!a||!a.url)return null;return l.isFunction(a.url)?a.url():a.url},G=function(){throw Error('A "url" property or function must be specified');},I=function(a,c,d){return function(h){a?a(c,h,d):c.trigger("error",c,h,d)}}}).call(this);window.Modernizr=function(d,h,m){var l={},z=h.documentElement;h.head||h.getElementsByTagName("head");var B=h.createElement("modernizr"),B=B.style,E=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),P={},Q=[],D=function(d,l,m,q){var s,a=h.createElement("div");if(parseInt(m,10))for(;m--;)s=h.createElement("div"),s.id=q?q[m]:"modernizr"+(m+1),a.appendChild(s);m=["&shy;<style>",d,"</style>"].join("");a.id="modernizr";a.innerHTML+=m;z.appendChild(a);d=l(a,d);a.parentNode.removeChild(a);return!!d},q,w={}.hasOwnProperty,
s;typeof w!==m&&typeof w.call!==m?s=function(d,h){return w.call(d,h)}:s=function(d,h){return h in d&&typeof d.constructor.prototype[h]===m};(function(h,m){var q=h.join(""),s=m.length;D(q,function(h){for(var h=h.childNodes,a={};s--;)a[h[s].id]=h[s];l.touch="ontouchstart"in d||a.touch.offsetTop===9},s,m)})([,["@media (",E.join("touch-enabled),("),"modernizr){#touch{top:9px;position:absolute}}"].join("")],[,"touch"]);P.touch=function(){return l.touch};for(var S in P)s(P,S)&&(q=S.toLowerCase(),l[q]=P[S](),
Q.push((l[q]?"":"no-")+q));B.cssText="";B=null;d.attachEvent&&function(){var d=h.createElement("div");d.innerHTML="<elem></elem>";return d.childNodes.length!==1}()&&function(d,h){function l(d){for(var h=-1;++h<c;)d.createElement(a[h])}d.iepp=d.iepp||{};var q=d.iepp,s=q.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",a=s.split("|"),c=a.length,k=RegExp("(^|\\s)("+s+")","gi"),y=RegExp("<(/*)("+
s+")","gi"),r=/^\s*[\{\}]\s*$/,w=RegExp("(^|[^\\n]*?\\s)("+s+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),u=h.createDocumentFragment(),K=h.documentElement,s=K.firstChild,z=h.createElement("body"),i=h.createElement("style"),j=/print|all/,p;q.getCSS=function(a,c){if(a+""===m)return"";for(var d=-1,h=a.length,i,k=[];++d<h;)i=a[d],i.disabled||(c=i.media||c,j.test(c)&&k.push(q.getCSS(i.imports,c),i.cssText),c="all");return k.join("")};q.parseCSS=function(a){for(var c=[],d;(d=w.exec(a))!=null;)c.push(((r.exec(d[1])?
"\n":d[1])+d[2]+d[3]).replace(k,"$1.iepp_$2")+d[4]);return c.join("\n")};q.writeHTML=function(){var d=-1;for(p=p||h.body;++d<c;)for(var i=h.getElementsByTagName(a[d]),k=i.length,j=-1;++j<k;)i[j].className.indexOf("iepp_")<0&&(i[j].className+=" iepp_"+a[d]);u.appendChild(p);K.appendChild(z);z.className=p.className;z.id=p.id;z.innerHTML=p.innerHTML.replace(y,"<$1font")};q._beforePrint=function(){i.styleSheet.cssText=q.parseCSS(q.getCSS(h.styleSheets,"all"));q.writeHTML()};q.restoreHTML=function(){z.innerHTML=
"";K.removeChild(z);K.appendChild(p)};q._afterPrint=function(){q.restoreHTML();i.styleSheet.cssText=""};l(h);l(u);q.disablePP||(s.insertBefore(i,s.firstChild),i.media="print",i.className="iepp-printshim",d.attachEvent("onbeforeprint",q._beforePrint),d.attachEvent("onafterprint",q._afterPrint))}(d,h);l._version="2.0.6";l._prefixes=E;l.testStyles=D;z.className=z.className.replace(/\bno-js\b/,"")+(" js "+Q.join(" "));return l}(this,this.document);
(function(d,h,m){function l(){for(var a=1,c=-1;R.length-++c;)if(R[c].s&&!(a=R[c].r))break;a&&E()}function z(a){var c=h.createElement("script"),d;c.src=a.s;c.onreadystatechange=c.onload=function(){!d&&(!c.readyState||c.readyState=="loaded"||c.readyState=="complete")&&(d=1,l(),c.onload=c.onreadystatechange=null)};w(function(){d||(d=1,l())},p.errorTimeout);a.e?c.onload():s.parentNode.insertBefore(c,s)}function B(a){var d=h.createElement("link"),i;d.href=a.s;d.rel="stylesheet";d.type="text/css";if(!a.e&&
(c||F)){var k=function(a){w(function(){if(!i)try{a.sheet.cssRules.length?(i=1,l()):k(a)}catch(c){c.code==1E3||c.message=="security"||c.message=="denied"?(i=1,w(function(){l()},0)):k(a)}},0)};k(d)}else d.onload=function(){i||(i=1,w(function(){l()},0))},a.e&&d.onload();w(function(){i||(i=1,l())},p.errorTimeout);!a.e&&s.parentNode.insertBefore(d,s)}function E(){var a=R.shift();J=1;a?a.t?w(function(){a.t=="c"?B(a):z(a)},0):(a(),l()):J=0}function P(a,c,d,i,k,j){function m(){!r&&(!q.readyState||q.readyState==
"loaded"||q.readyState=="complete")&&(u.r=r=1,!J&&l(),q.onload=q.onreadystatechange=null,w(function(){I.removeChild(q)},0))}var q=h.createElement(a),r=0,u={t:d,s:c,e:j};q.src=q.data=c;!G&&(q.style.display="none");q.width=q.height="0";a!="object"&&(q.type=d);q.onload=q.onreadystatechange=m;a=="img"?q.onerror=m:a=="script"&&(q.onerror=function(){u.e=u.r=1;E()});R.splice(i,0,u);I.insertBefore(q,G?null:s);w(function(){r||(I.removeChild(q),u.r=u.e=r=1,l())},p.errorTimeout)}function Q(a,c,d){var h=c=="c"?
r:y;J=0;c=c||"j";u(a)?P(h,a,c,this.i++,q,d):(R.splice(this.i++,0,a),R.length==1&&E());return this}function D(){var a=p;a.loader={load:Q,i:0};return a}var q=h.documentElement,w=d.setTimeout,s=h.getElementsByTagName("script")[0],S={}.toString,R=[],J=0,F="MozAppearance"in q.style,G=F&&!!h.createRange().compareNode,I=G?q:s.parentNode,a=d.opera&&S.call(d.opera)=="[object Opera]",c="webkitAppearance"in q.style,k=c&&"async"in h.createElement("script"),y=F?"object":a||k?"img":"script",r=c?"img":y,M=Array.isArray||
function(a){return S.call(a)=="[object Array]"},u=function(a){return typeof a=="string"},K=function(a){return S.call(a)=="[object Function]"},T=[],i={},j,p;p=function(a){function c(a){var a=a.split("!"),d=T.length,h=a.pop(),k=a.length,h={url:h,origUrl:h,prefixes:a},j,l;for(l=0;l<k;l++)(j=i[a[l]])&&(h=j(h));for(l=0;l<d;l++)h=T[l](h);return h}function d(a,h,i,k,j){var l=c(a),p=l.autoCallback;if(!l.bypass){h&&(h=K(h)?h:h[a]||h[k]||h[a.split("/").pop().split("?")[0]]);if(l.instead)return l.instead(a,
h,i,k,j);i.load(l.url,l.forceCSS||!l.forceJS&&/css$/.test(l.url)?"c":m,l.noexec);(K(h)||K(p))&&i.load(function(){D();h&&h(l.origUrl,j,k);p&&p(l.origUrl,j,k)})}}function h(a,c){function i(a){if(u(a))d(a,l,c,0,k);else if(Object(a)===a)for(m in a)a.hasOwnProperty(m)&&d(a[m],l,c,m,k)}var k=!!a.test,j=a.load||a.both,l=a.callback,m;i(k?a.yep:a.nope);i(j);a.complete&&c.load(a.complete)}var k,j,l=this.yepnope.loader;if(u(a))d(a,0,l,0);else if(M(a))for(k=0;k<a.length;k++)j=a[k],u(j)?d(j,0,l,0):M(j)?p(j):Object(j)===
j&&h(j,l);else Object(a)===a&&h(a,l)};p.addPrefix=function(a,c){i[a]=c};p.addFilter=function(a){T.push(a)};p.errorTimeout=1E4;h.readyState==null&&h.addEventListener&&(h.readyState="loading",h.addEventListener("DOMContentLoaded",j=function(){h.removeEventListener("DOMContentLoaded",j,0);h.readyState="complete"},0));d.yepnope=D()})(this,this.document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};(function(d,h,m){function l(a,c,d){var h=jQuery.inArray(a,q)>-1;(a=="width"||a=="height")&&c===parseFloat(d.css(a))&&(h=!1);return h}function z(a){return parseFloat(a.replace(/px/i,""))}function B(a){for(var c in a)return!1;return!0}function E(a){for(var c in a)if((c=="width"||c=="height")&&(a[c]=="show"||a[c]=="hide"||a[c]=="toggle"))return!0;return!1}function P(a,d,h,l,m,q,w,i){a=typeof a=="undefined"?{}:a;a.secondary=typeof a.secondary=="undefined"?{}:a.secondary;for(var j=s.length-1;j>=0;j--)typeof a[s[j]+
"transition-property"]=="undefined"&&(a[s[j]+"transition-property"]=""),a[s[j]+"transition-property"]+=", "+(q===!0&&w===!0?s[j]+"transform":d),a[s[j]+"transition-duration"]=h+"ms",a[s[j]+"transition-timing-function"]=l,a.secondary[q===!0&&w===!0?s[j]+"transform":d]=q===!0&&w===!0?i===!0&&c?"translate3d("+a.meta.left+"px,"+a.meta.top+"px,0)":"translate("+a.meta.left+"px,"+a.meta.top+"px)":m;return a}function Q(a,c,d,h,l,m,q,i){var j=a.data(G)?B(a.data(G))?jQuery.extend(!0,{},F):a.data(G):jQuery.extend(!0,
{},F),p=l,s=jQuery.inArray(c,w)>-1;if(s){var x=j.meta,C=z(a.css(c))||0,D=c+"_o",p=s?l-C:l;x[c]=p;x[D]=a.css(c)=="auto"?0+p:C+p||0;j.meta=x;q&&p===0&&(p=0-x[D],x[c]=p,x[D]=0)}return a.data(G,P(j,c,d,h,p,m,q,i))}function D(a,c,d,h){var l=R.exec(c),m=a.css(d)==="auto"?0:a.css(d),m=typeof m=="string"?z(m):m;typeof c=="string"&&z(c);var h=h===!0?0:m,q=a.is(":hidden"),i=a.translation();d=="left"&&(h=parseInt(m,10)+i.x);d=="top"&&(h=parseInt(m,10)+i.y);!l&&c=="show"?(h=1,q&&a.css({display:"block",opacity:0})):
!l&&c=="hide"&&(h=0);if(l)return a=parseFloat(l[2]),l[1]&&(a=(l[1]==="-="?-1:1)*a+parseInt(h,10)),a;return h}var q=["top","right","bottom","left","opacity","height","width"],w=["top","right","bottom","left"],s=["","-webkit-","-moz-","-o-"],S=["avoidTransforms","useTranslate3d","leaveTransforms"],R=/^([+-]=)?([\d+-.]+)(.*)$/,J=/([A-Z])/g,F={secondary:{},meta:{top:0,right:0,bottom:0,left:0}},G="jQe",d=(document.body||document.documentElement).style,I=d.WebkitTransition!==void 0?"webkitTransitionEnd":
d.OTransition!==void 0?"oTransitionEnd":"transitionend",a=d.WebkitTransition!==void 0||d.MozTransition!==void 0||d.OTransition!==void 0||d.transition!==void 0,c="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix;jQuery.fn.translation=function(){if(!this[0])return null;for(var a=window.getComputedStyle(this[0],null),c={x:0,y:0},d=s.length-1;d>=0;d--){var h=a.getPropertyValue(s[d]+"transform");if(h&&/matrix/i.test(h)){a=h.replace(/^matrix\(/i,"").split(/, |\)$/g);c={x:parseInt(a[4],10),y:parseInt(a[5],
10)};break}}return c};jQuery.fn.animate=function(c,d,m,q){var c=c||{},u=typeof c.bottom=="undefined"&&typeof c.right=="undefined",z=jQuery.speed(d,m,q),F=this,i=0,j=function(){i--;i===0&&typeof z.complete=="function"&&z.complete.apply(F[0],arguments)};if(!a||B(c)||E(c)||z.duration<=0||jQuery.fn.animate.defaults.avoidTransforms===!0&&c.avoidTransforms!==!1)return h.apply(this,arguments);return this[z.queue===!0?"queue":"each"](function(){var a=jQuery(this),d=jQuery.extend({},z),m=function(){for(var d=
{},h=s.length-1;h>=0;h--)d[s[h]+"transition-property"]="none",d[s[h]+"transition-duration"]="",d[s[h]+"transition-timing-function"]="";a.unbind(I);if(!c.leaveTransforms==!0){for(var i=a.data(G)||{},l={},h=s.length-1;h>=0;h--)l[s[h]+"transform"]="";if(u&&typeof i.meta!="undefined")for(var h=0,m;m=w[h];++h)l[m]=i.meta[m+"_o"]+"px";a.css(d).css(l)}c.opacity==="hide"&&a.css("display","none");a.data(G,null);j.call(a)},q={bounce:"cubic-bezier(0.0, 0.35, .5, 1.3)",linear:"linear",swing:"ease-in-out",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",
easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",
easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",
easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)"},r={},q=q[d.easing||"swing"]?q[d.easing||"swing"]:d.easing||"swing",y;for(y in c)if(jQuery.inArray(y,S)===-1){var E=jQuery.inArray(y,w)>-1,F=D(a,c[y],y,E&&c.avoidTransforms!==!0);c.avoidTransforms!==!0&&l(y,F,a)?Q(a,y,d.duration,q,E&&c.avoidTransforms===!0?F+"px":F,E&&c.avoidTransforms!==!0,u,c.useTranslate3d===!0):r[y]=c[y]}y=a.data(G)||{};for(q=s.length-1;q>=0;q--)typeof y[s[q]+"transition-property"]!="undefined"&&(y[s[q]+"transition-property"]=
y[s[q]+"transition-property"].substr(2));a.data(G,y).unbind(I);if(!B(a.data(G))&&!B(a.data(G).secondary)){i++;a.css(a.data(G));var M=a.data(G).secondary;setTimeout(function(){a.bind(I,m).css(M)})}else d.queue=!1;B(r)||(i++,h.apply(a,[r,{duration:d.duration,easing:jQuery.easing[d.easing]?d.easing:jQuery.easing.swing?"swing":"linear",complete:j,queue:d.queue}]));return!0})};jQuery.fn.animate.defaults={};jQuery.fn.stop=function(c,d,h){if(!a)return m.apply(this,[c,d]);c&&this.queue([]);for(var l={},q=
s.length-1;q>=0;q--)l[s[q]+"transition-property"]="none",l[s[q]+"transition-duration"]="",l[s[q]+"transition-timing-function"]="";this.each(function(){var a=jQuery(this),q=window.getComputedStyle(this,null),i={},j;if(!B(a.data(G))&&!B(a.data(G).secondary)){j=a.data(G);if(d){if(i=j.secondary,!h&&typeof j.meta.left_o!==void 0||typeof j.meta.top_o!==void 0){i.left=typeof j.meta.left_o!==void 0?j.meta.left_o:"auto";i.top=typeof j.meta.top_o!==void 0?j.meta.top_o:"auto";for(j=s.length-1;j>=0;j--)i[s[j]+
"transform"]=""}}else for(var p in a.data(G).secondary)if(p=p.replace(J,"-$1").toLowerCase(),i[p]=q.getPropertyValue(p),!h&&/matrix/i.test(i[p])){j=i[p].replace(/^matrix\(/i,"").split(/, |\)$/g);i.left=parseFloat(j[4])+parseFloat(a.css("left"))+"px"||"auto";i.top=parseFloat(j[5])+parseFloat(a.css("top"))+"px"||"auto";for(j=s.length-1;j>=0;j--)i[s[j]+"transform"]=""}a.unbind(I).css(l).css(i).data(G,null)}else m.apply(a,[c,d])});return this}})(jQuery,jQuery.fn.animate,jQuery.fn.stop);var gui=gui||{};gui.array=gui.array||{};(function(){gui.array.numArray=function(d){for(var h=[],m=0;m<d.length;m++)h.push(Number(d[m]));return h}})();gui=gui||{};gui.map=gui.map||{};(function(){var d=gui.array;gui.map.parse_lat_lng_string=function(h){return d.numArray(h.Point.coordinates.split(",",2))};gui.map.addGoogleMapLayers=function(d,m){_.each(d,function(d){d.setMap(m)})};gui.map.clearGoogleMapLayers=function(d){_.each(d,function(d){d.setMap(null)})};gui.map.deleteGoogleMapLayers=function(d){gui.map.clearGoogleMapLayers(d);d.length=0}})();gui=gui||{};gui.string=gui.string||{};(function(){gui.string.stripQuotes=function(d){if(d&&d.charCodeAt(0)==34)return d.substr(1,d.length-2);return d};gui.string.trim=function(d){if(String.trim)return String.trim(d);return d.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}})();gui=gui||{};gui.data=gui.data||{};
(function(){var d=gui.string;gui.data.BaseCsvParser=function(d,m,l){this.delimiter=d?d:"\t";this.skipFinal=l!=!1;this.fieldNames=this.data=null};gui.data.BaseCsvParser.prototype={isValid:function(){return data!=null},parse:function(d){var m,l,z=[],d=d.split(/\r\n|\r|\n/),B=d.length;(m=this.parseFirstRow(d[0]))&&z.push(m);for(m=1;m<=B-2;++m)l=d[m],l.length!=0&&(l=this.parseRow(l.split(this.delimiter)))&&z.push(l);(d=this.parseFinalRow(d[B-1]))&&z.push(d);return this.buildData(z)},buildData:function(d){return d},
getFieldNames:function(){return this.fieldNames},parseFirstRow:function(h){if(this.fieldNames==null){this.fieldNames=h.split(this.delimiter);for(h=0;h<this.fieldNames.length;h++)this.fieldNames[h]=d.trim(d.stripQuotes(this.fieldNames[h]));return null}else return this.parseRow(h.split(this.delimiter))},parseFinalRow:function(d){return d.indexOf(this.delimiter)<0?null:this.parseRow(d.split(this.delimiter))},prepFieldName:function(h){return d.stripQuotes(h)},parseRow:function(h){var m={};if(h.length<
this.fieldNames.length)return null;for(var l=0;l<this.fieldNames.length;++l)m[this.fieldNames[l]]=d.stripQuotes(h[l]);return m}}})();gui=gui||{};gui.facebook=gui.facebook||{};
(function(){gui.facebook.Facebook=function(d){var h=$("body").append('<div id="fb-root"></div>'),m=this;window.fbAsyncInit=function(){FB.init(d);m.getLoginStatus();FB.Event.subscribe("auth.login",function(d){console.log("Hello");console.log(d.session)});FB.Event.subscribe("auth.logout",function(d){console.log("Goodbye");console.log(d)})};var l=document.createElement("script");l.src=document.location.protocol+"//connect.facebook.net/en_US/all.js";l.async=!0;h.append(l)};gui.facebook.Facebook.prototype=
{getLoginStatus:function(){var d=this;FB.getLoginStatus(function(h){h.session||(console.log("Goodbye"),console.log(h),$("body").append("<a>Login to Facebook</a>").click(function(){d.doLogin()}))})},doLogin:function(){FB.login(function(d){d.session||(console.log("Goodbye"),console.log(d))})}}})();Date.prototype.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.prototype.getMonthName=function(){return this.monthNames[this.getMonth()]};Date.prototype.getShortMonthName=function(){return this.getMonthName().substr(0,3)};gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.BankOfEnglandMPC=Backbone.View.extend({initialize:function(){this.membersUrl=this.options.membersUrl;this.decisionsUrl=this.options.decisionsUrl;_.bind(this,"render","membersLoaded");this.model=new gui.bankofenglandmpc.Model;var d;d=_.bind(function(d){this.membersLoaded(d)},this);$.ajax(this.membersUrl).success(d)},membersLoaded:function(d){this.model.setMembers((new gui.bankofenglandmpc.MembersCsvParser).parse(d));d=_.bind(function(d){this.decisionsLoaded(d)},this);
$.ajax(this.decisionsUrl).success(d)},decisionsLoaded:function(d){this.model.setDecisions((new gui.bankofenglandmpc.DecisionsCsvParser(this.model.get("members"))).parse(d));this.render()},render:function(){this.el.html(_.template($("#template_boempc_baseView").html(),{}));new gui.bankofenglandmpc.HeaderView({el:$("#boempc_header"),model:this.model});new gui.bankofenglandmpc.MembersView({el:$("#boempc_members"),model:this.model});new gui.bankofenglandmpc.ResultsView({el:$("#boempc_results"),model:this.model});
new gui.bankofenglandmpc.GraphView({el:$("#boempc_graph"),model:this.model})}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.GraphView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","showDecision");this.model.bind("change:decision",this.showDecision);this.render()},render:function(){this.el.html(_.template($("#template_boempc_graph").html(),{}));var d=[],h=0;this.model.get("decisions").forEach(function(m){d.push([h,m.get("new_rate")]);h++},this);this.chart=(new gui.bankofenglandmpc.Chart(this.$(".graphPanel")[0],20,20)).plot(d,0,2)},showDecision:function(){var d=this.model.get("decision"),
h=this.model.get("decisions").indexOf(this.model.get("decision"));this.chart.highlight(d,h)}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.HeaderView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","showDecision");this.model.bind("change:decision",this.showDecision);var d=new Date;this.defaultVariables={title:"Bank of England Members",description:"Some description copy about the interactive",month:d.getMonthName(),year:d.getFullYear(),article_url:""};this.render(this.defaultVariables)},render:function(d){d=this.el.html(_.template($("#template_boempc_header").html(),d));d.css({opacity:0});
d.animate({opacity:1},300)},showDecision:function(){var d=this.model.get("decision"),h=d?d.toJSON():this.defaultVariables;if(d)h.title=d.get("result")+" at "+d.get("new_rate")+"%";this.render(h)}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.MembersView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","showMember");this.circles={};this.model.bind("change:member",this.showMember);this.render();this.delegateEvents(this.events())},render:function(){this.el.html(_.template($("#template_boempc_members").html(),{}));var d=_.template($("#template_boempc_membername").html());this.model.get("members").forEach(function(h){if(h.id!=0){var m=$(d(h.toJSON()));m.data("member",h);var l=Raphael(_.last(m.find(".memberBullet")),
18,18).circle(9,9,8);l.attr({fill:h.get("colour"),"stroke-width":0});this.circles[h.id]=l;m.appendTo(this.$(".memberlist"))}},this)},events:function(){return Modernizr.touch?{"touchstart div[class=memberName]":"selectMember"}:{"click div[class=memberName]":"selectMember"}},selectMember:function(d){this.model.changeMember($(d.currentTarget).data("member"))},showMember:function(){this.$(".memberdetail").empty();var d=this.model.get("member");if(d.id!=0){var h=$(_.template($("#template_boempc_memberdetail").html(),
d.toJSON()));h.css({opacity:0});h.animate({opacity:1},300);h.appendTo(this.$(".memberdetail"));this.selectedCircle&&this.selectedCircle.attr({"stroke-width":0});this.selectedCircle=this.circles[d.id];this.selectedCircle.attr({"stroke-width":1})}}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.ResultsView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","renderVote","showMember","showHoverMember","selectMember","showDecision","mouseOver","mouseOut");this.circles={};this.model.bind("change:member",this.showMember);this.model.bind("change:hoverMember",this.showHoverMember);this.model.bind("change:decision",this.showDecision);this.render();this.delegateEvents(this.events())},render:function(){this.el.html(_.template($("#template_boempc_results").html(),{}));
var d=_.template($("#template_boempc_monthtable").html());this.model.get("decisions").forEach(function(h){var m=h.toJSON();m.change=m.change==0?"-":m.change+"pt";var l=$(d(m));l.data({decision:h});l.find(".resultLabel").addClass("bg"+m.result);this.renderVote(h.get("votes").r,"raise").appendTo(l.find(".raise")[0]);this.renderVote(h.get("votes").h,"hold").appendTo(l.find(".hold")[0]);this.renderVote(h.get("votes").l,"lower").appendTo(l.find(".lower")[0]);l.appendTo(this.$(".months"))},this)},renderVote:function(d,
h){var m=$("<ul></ul>");d.forEach(function(d){var d=d.get("member"),z=$("<li></li>").data({member:d}),B=this.circles[d.id]?this.circles[d.id]:this.circles[d.id]=[],E=Raphael(z[0],20,20),P;switch(h){case "raise":P=E.path("M1 17L10 3L19 17L1 17");break;case "hold":P=E.circle(10,10,9);break;case "lower":P=E.path("M1 3L10 17L19 3L1 3")}P.attr({fill:d.get("colour"),"stroke-width":0});B.push(P);m.append(z)},this);return m},events:function(){return Modernizr.touch?{"touchstart .month":"selectMonth","touchstart li":"selectMember"}:
{"click .month":"selectMonth","mouseenter .month":"mouseOver","mouseleave .month":"mouseOut","click li":"selectMember"}},selectMember:function(d){this.model.changeDecision($(d.currentTarget).closest(".month").data("decision"));this.model.changeMember($(d.currentTarget).data("member"));this.model.changeHoverMember($(d.currentTarget).data("member"));d.stopPropagation()},mouseOver:function(d){$(d.currentTarget).closest(".month").prepend('<div class="over"></div>')},mouseOut:function(){this.$(".over").remove()},
selectMonth:function(d){this.model.changeDecision($(d.currentTarget).data("decision"))},showMember:function(){this.model.get("member")!=this.model.get("hoverMember")&&this.$(".callout").remove();var d=this.model.get("member");this.memberArray&&_.each(this.memberArray,function(d){d.attr({"stroke-width":0})});this.memberArray=this.circles[d.id];d.id!=0&&_.each(this.memberArray,function(d){d.attr({"stroke-width":1})})},showHoverMember:function(){this.$(".callout").remove();var d=this.model.get("hoverMember"),
h=this.model.get("decision");d&&(new gui.bankofenglandmpc.ResultsToolTip(this.el,this.currentMonth,d,h)).render()},showDecision:function(){this.$(".callout").remove();var d=this.model,h=d.get("decision"),m=!0;this.currentMonth&&(this.currentMonth.animate({opacity:0.5},300),Modernizr.touch||this.currentMonth.find("li").unbind("mouseenter").unbind("mouseleave"),m=!1);_.each(this.$(".month"),function(l){l=$(l);l.data("decision")==h?(this.currentMonth=l,l.animate({opacity:1},300),Modernizr.touch||l.find("li").mouseenter(function(h){d.changeHoverMember($(h.currentTarget).data("member"))}).mouseleave(function(){d.changeHoverMember(null)})):
m&&l.animate({opacity:0.5},300)},this)}});gui.bankofenglandmpc.ResultsToolTip=function(d,h,m,l){this.container=d;this.target=h;this.member=m;this.decision=l};gui.bankofenglandmpc.ResultsToolTip.prototype={render:function(){var d,h=this.target.position().left>400?"left":"right",m=this.target.position().left+(h=="left"?-130:this.target.width()),l;this.member.id==0?(d={name:"No member information available",extentOfChange:""},l=this.target.height()*0.5):(d=this.decision.get("votes"),d=(d.r.get(this.member.id)||
d.h.get(this.member.id)||d.l.get(this.member.id)).get("extentOfChange"),d=d==0?"voted to hold":d>0?"voted for a raise of "+d+"%":"voted for a lowering of "+d+"%",d={name:this.member.get("name"),extentOfChange:d},_.each(this.target.find("li"),function(d){d=$(d);if(d.data("member")==this.member)l=d.position().top},this));d=_.template($("#template_boempc_callout").html(),d);d=$(d);d.css({opacity:0,top:l,left:m+(h=="left"?-10:10)});d.addClass(h);d.animate({left:m,opacity:1},300);Raphael(d.find(".arrow")[0],
10,18).path(h=="left"?"M10 9L0 0L0 18L10 9":"M0 9L10 0L10 18L0 9").attr({fill:"#666666","stroke-width":0});d.appendTo(this.container)}}})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.Chart=function(d,h,m){this.elem=d;this.$=$(d);this.paddingLeft=h||0;this.paddingRight=m||0;this.width=this.$.width();this.height=this.$.height();this.stepSize=10;this.paper=Raphael(this.elem,this.width,this.height)};gui.bankofenglandmpc.Chart.prototype={plot:function(d,h,m){if(!(d.length<2)){this.data=d;var l=m-h,z=this.height/l;this.stepSize=(this.width-this.paddingLeft-this.paddingRight)/(d.length-1);this.midPointY=l*0.5+h;var B=[],E,P;_.each(d,function(d){E=this.stepSize*
Number(d[0])+this.paddingLeft;P=this.height-(Number(d[1])-h)*z;B.push("L"+E+" "+P);this.paper.path("M"+E+" 0L"+E+" "+this.height).attr({stroke:"#CCCCCC","stroke-width":1,"stroke-dasharray":"- "})},this);B[0]=B[0].replace("L","M");this.paper.path(B.join("")).attr({stroke:"#666666"});this.renderAxis(h,m);return this}},renderAxis:function(d,h){var m=this.paper.text(0,0,this.formatAxisLabel(h.toString())).attr({"text-anchor":"start","font-size":14,fill:"#666666"});m.attr({y:m.getBBox().height*0.5});m=
this.paper.text(0,0,this.formatAxisLabel(d.toString())).attr({"text-anchor":"start","font-size":14,fill:"#666666"});m.attr({y:this.height-m.getBBox().height*0.5})},formatAxisLabel:function(d){return d==0?d.toString():d.toString()+"%"},highlight:function(d,h){if(!this.highlightBox)this.highlightBox=this.paper.rect(0,1,this.paddingLeft*2-2,this.height-2).attr({stroke:"#333333","stroke-width":1,"stroke-dasharray":"- ",x:h*this.stepSize+1,opacity:0}),this.label=this.paper.text(0,0,"0%").attr({"font-size":12,
fill:"#666666",y:20});var m=this;d?(this.highlightBox.animate({x:h*this.stepSize+1,opacity:1},500,"<>").onAnimation(function(){var d=m.data[Math.round(this.attrs.x/m.stepSize)][1];m.label.attr({text:d+"%",x:this.attrs.x+m.paddingLeft,y:d<m.midPointY?m.height*0.3:m.height*0.7})}),this.label.animateWith(this.highlightBox,{opacity:1},500)):(this.highlightBox.animate({opacity:0},500),this.label.animateWith(this.highlightBox,{opacity:0},500))}}})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.Model=Backbone.Model.extend({defaults:{decision:{},decisions:[],member:null,hoverMember:null,members:null},initialize:function(){this.bind("change:member",function(){this.get("member")});this.bind("change:decision",function(){this.get("decision")});this.bind("change:hoverMember",function(){this.get("hoverMember")})},changeMember:function(d){this.set({member:d})},changeHoverMember:function(d){this.set({hoverMember:d})},changeDecision:function(d){this.set({decision:d});
this.set({hoverMember:null})},setMembers:function(d){this.set({members:d})},setDecisions:function(d){this.set({decisions:d})}});gui.bankofenglandmpc.Vote=Backbone.Model.extend({});gui.bankofenglandmpc.Votes=Backbone.Collection.extend({model:gui.bankofenglandmpc.Vote,comparator:function(d){return Number(d.get("member").get("seatID"))-Number(d.get("extentOfChange"))*200}});gui.bankofenglandmpc.Member=Backbone.Model.extend({initialize:function(){this.id=this.attributes.memberID}});gui.bankofenglandmpc.Members=
Backbone.Collection.extend({model:gui.bankofenglandmpc.Member,comparator:function(d){return-Number(d.get("memberID"))+Number(d.get("seatID"))*200}});gui.bankofenglandmpc.Decision=Backbone.Model.extend({});gui.bankofenglandmpc.Decisions=Backbone.Collection.extend({model:gui.bankofenglandmpc.Decision})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};(function(){gui.bankofenglandmpc.MembersCsvParser=function(){};gui.bankofenglandmpc.MembersCsvParser.prototype=new gui.data.BaseCsvParser;_.extend(gui.bankofenglandmpc.MembersCsvParser.prototype,{buildData:function(d){var h=new gui.bankofenglandmpc.Members;_.each(d,function(d){h.add(new gui.bankofenglandmpc.Member(d))});return h}})})();gui=gui||{};gui.bankofenglandmpc=gui.bankofenglandmpc||{};
(function(){gui.bankofenglandmpc.DecisionsCsvParser=function(d){this.members=d};gui.bankofenglandmpc.DecisionsCsvParser.prototype=new gui.data.BaseCsvParser;_.extend(gui.bankofenglandmpc.DecisionsCsvParser.prototype,{buildData:function(d){d.shift();var h=new gui.bankofenglandmpc.Decisions,m,l,z,B,E;_.each(d,function(d){l=d.votes={r:new gui.bankofenglandmpc.Votes,h:new gui.bankofenglandmpc.Votes,l:new gui.bankofenglandmpc.Votes};for(var Q=1;Q<10;Q++)E=d["m_"+Q].split(","),E.length!=2&&(E=[0,0]),B=
E[1]==0?l.h:E[1]>0?l.r:l.l,z=new gui.bankofenglandmpc.Vote({id:Q,member:this.members.get(E[0]),extentOfChange:E[1]}),B.add(z),delete d["m_"+Q];m=new gui.bankofenglandmpc.Decision(d);h.add(m);h.length>11&&h.remove(h.at(0))},this);return h}})})();
